!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=55)}([function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(4),o=new Map,a=new Map,{int16:l,uint16:h,uint24:c,s32:u,u32:d}=s,p="thermometer";function f(t,e){const i=o.get(this),r=Object.create(null);for(const n of this.components)i[n]=new f[n](Object.assign({controller:e.controller||t,freq:e.freq,board:this.board},e)),r[n]={get:()=>i[n]},g[n]&&(r[g[n]]=r[n]);Object.defineProperties(this,r)}f.accelerometer=i(28),f.altimeter=i(37),f.barometer=i(38),f.gyro=i(39),f.hygrometer=i(40),f.magnetometer=i(41),f.orientation=i(42),f.thermometer=i(43);const g={thermometer:"temperature"},E={SHT31D:{ADDRESSES:{value:[68]},REGISTER:{value:{SOFT_RESET:12450,MEASURE_HIGH_REPEATABILITY:9216}},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e);i.i2cConfig(e),i.i2cWrite(r,[this.REGISTER.SOFT_RESET>>8,255&this.REGISTER.SOFT_RESET]);const n={temperature:null,humidity:null},s=()=>{i.i2cWrite(r,[this.REGISTER.MEASURE_HIGH_REPEATABILITY>>8,255&this.REGISTER.MEASURE_HIGH_REPEATABILITY]),setTimeout(()=>{i.i2cReadOnce(r,6,t=>{n.temperature=h(t[0],t[1]),n.humidity=h(t[3],t[4]),this.emit("data",n),s()})},16)};s()}},identifier:{value:t=>"sht-31d-"+E.addressResolver(E.SHT31D,t)}},HTU21D:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:227,SOFT_RESET:254}},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e);e.delay=5e4,i.i2cConfig(e),i.i2cWrite(r,this.REGISTER.SOFT_RESET);const n={temperature:null,humidity:null};let s=0;const o=()=>{const t=0===s,e=t?this.REGISTER.TEMPERATURE:this.REGISTER.HUMIDITY;i.i2cReadOnce(r,e,2,e=>{t?n.temperature=h(e[0],e[1]):n.humidity=h(e[0],e[1]),2==++s&&(s=0,this.emit("data",n)),o()})};o()}},identifier:{value:t=>"htu-s1d-"+E.addressResolver(E.HTU21D,t)}},HIH6130:{ADDRESSES:{value:[39]},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e);i.i2cConfig(e);const n={humidity:null,temperature:null};let s=36.65;const o=()=>{i.i2cWrite(r,160,[0,0]),setTimeout(()=>{i.i2cWrite(r,128,[0,0]),i.i2cReadOnce(r,4,t=>{const e=t[0]>>6;n.humidity=l(63&t[0],t[1]),n.temperature=l(t[2],t[3]>>2),0===e&&s--,1===e&&s++,this.emit("data",n),o()})},s)};o()}},identifier:{value:t=>"hih6130-"+E.addressResolver(E.HIH6130,t)}},DHT_I2C_NANO_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{READ:0}},initialize:{value(t,e){const i=t.io;let r=11;const n=E.addressResolver(this,e);i.i2cConfig(e);const s=/(\d{2})/.exec(e.controller),o=s&&s.length&&s[0];o&&(r=+o,Number.isNaN(r)&&(r=11));const a={temperature:null,humidity:null};i.i2cWrite(n,[2,r]),i.i2cRead(n,4,t=>{a.humidity=l(t[0],t[1]),a.temperature=l(t[2],t[3]),this.emit("data",a)})}},identifier:{value:t=>"dht_i2c_nano_backpack-"+E.addressResolver(E.DHT_I2C_NANO_BACKPACK,t)}},MPU6050:{ADDRESSES:{value:[104,105]},REGISTER:{value:{SETUP:[107,0],READ:59}},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e),n={accelerometer:{},temperature:{},gyro:{}};i.i2cConfig(e),i.i2cWrite(r,this.REGISTER.SETUP),i.i2cRead(r,this.REGISTER.READ,14,t=>{n.accelerometer={x:l(t[0],t[1]),y:l(t[2],t[3]),z:l(t[4],t[5])},n.temperature=l(t[6],t[7]),n.gyro={x:l(t[8],t[9]),y:l(t[10],t[11]),z:l(t[12],t[13])},this.emit("data",n)})}},identifier:{value:t=>"mpu-6050-"+E.addressResolver(E.MPU6050,t)}},BNO055:{ADDRESSES:{value:[40,41]},REGISTER:{value:{READ:{ACCEL:8,MAG:14,GYRO:20,EULER:26,QUARTERNION:32,TEMP:52},LENGTH:{ACCEL:6,MAG:6,GYRO:6,EULER:6,QUARTERNION:8,TEMP:1},OPR_MODE_ADDR:61,OPR_MODES:{CONFIG:0,ACCONLY:1,MAGONLY:2,GYRONLY:3,ACCMAG:4,ACCGYRO:5,MAGGYRO:6,AMG:7,IMUPLUS:8,COMPASS:9,M4G:10,NDOF_FMC_OFF:11,NDOF:12},PWR_MODE_ADDR:62,PWR_MODES:{NORMAL:0,LOW:1,SUSPEND:2},PAGE_ID_ADDR:7,PAGE_STATES:{ZERO:0},CALIBRATION:53,SYS_TRIGGER:63,UNIT_SEL_ADDR:59,AXIS_MAP_CONFIG_ADDR:65,AXIS_MAP_SIGN_ADDR:66}},initialize:{value(t,e){const i=t.io,r=e.calibrationMask||192,n=E.addressResolver(this,e),s={accelerometer:{x:null,y:null,z:null},gyro:{x:null,y:null,z:null},magnetometer:{x:null,y:null,z:null},orientation:{euler:{heading:null,roll:null,pitch:null},quarternion:{w:null,x:null,y:null,z:null}},temperature:null,calibration:null};i.i2cConfig(e),i.i2cWriteReg(n,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.CONFIG),i.i2cWriteReg(n,this.REGISTER.PAGE_ID_ADDR,this.REGISTER.PAGE_STATES.ZERO),i.i2cWriteReg(n,this.REGISTER.SYS_TRIGGER,32);new Promise(t=>{setTimeout(()=>{i.i2cWriteReg(n,this.REGISTER.PWR_MODE_ADDR,this.REGISTER.PWR_MODES.NORMAL),i.i2cWriteReg(n,this.REGISTER.SYS_TRIGGER,e.enableExternalCrystal?128:0);const r=e.axisMap||36;i.i2cWriteReg(n,this.REGISTER.AXIS_MAP_CONFIG_ADDR,r);const s=e.axisSign||0;i.i2cWriteReg(n,this.REGISTER.AXIS_MAP_SIGN_ADDR,s),setTimeout(()=>{i.i2cWriteReg(n,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.NDOF),t()},10)},650)}).then(()=>new Promise(t=>{const e=()=>{i.i2cReadOnce(n,this.REGISTER.CALIBRATION,1,i=>{const n=i[0],o=s.calibration!==n;s.calibration=n,o&&this.emit("calibration",s.calibration),(n&r)===r?(this.emit("calibrated"),t()):e()})};e()})).then(()=>{i.i2cRead(n,this.REGISTER.READ.TEMP,2,t=>{s.temperature=t[0];const e=s.calibration!==t[1];s.calibration=t[1],this.emit("data",s),e&&this.emit("calibration",s.calibration)}),i.i2cRead(n,this.REGISTER.READ.ACCEL,18,t=>{s.accelerometer={x:l(t[1],t[0]),y:l(t[3],t[2]),z:l(t[5],t[4])},s.magnetometer={x:l(t[7],t[6]),y:l(t[9],t[8]),z:l(t[11],t[10])},s.gyro={x:l(t[13],t[12]),y:l(t[15],t[14]),z:l(t[17],t[16])},this.emit("data",s)}),i.i2cRead(n,this.REGISTER.READ.EULER,14,t=>{s.orientation.euler={heading:l(t[1],t[0]),roll:l(t[3],t[2]),pitch:l(t[5],t[4])},s.orientation.quarternion={w:l(t[7],t[6]),x:l(t[9],t[8]),y:l(t[11],t[10]),z:l(t[13],t[12])},this.emit("data",s)})})}},identifier:{value:t=>"bno055-"+E.addressResolver(E.BNO055,t)}},MPL115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{COEFFICIENTS:4,PADC_MSB:0,CONVERT:18}},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e);i.i2cConfig(e);const n={pressure:null,temperature:null},s={a0:null,b1:null,b2:null,c12:null},o=t=>{const e=h(t[0],t[1])>>6,i=h(t[2],t[3])>>6;n.pressure=s.a0+(s.b1+s.c12*i)*e+s.b2*i,n.temperature=i,this.emit("data",n),a()};var a=()=>{i.i2cWriteReg(r,this.REGISTER.CONVERT,0),i.i2cReadOnce(r,this.REGISTER.PADC_MSB,4,o)};new Promise(t=>{i.i2cReadOnce(r,this.REGISTER.COEFFICIENTS,8,e=>{const i=l(e[0],e[1]),r=l(e[2],e[3]),n=l(e[4],e[5]),o=l(e[6],e[7])>>2;s.a0=i/8,s.b1=r/8192,s.b2=n/16384,s.c12=o/4194304,t()})}).then(a)}},identifier:{value:t=>"mpl115a2-"+E.addressResolver(E.MPL115A2,t)}},MPL3115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{STATUS:0,PRESSURE:1,CONFIG:19,BAR_IN_MSB:20,BAR_IN_LSB:21,CONTROL:38}},MASK:{value:{STATUS:{PRESSURE_DATA_READ:4},CONTROL:{SBYB:1,OS128:56,ALTIMETER:128,PRESSURE:0},CONFIG:{TDEFE:1,PDEFE:2,DREM:4}}},initialize:{value(t,e){const i=t.io;let r=!1,n=null,s=0;const o=E.addressResolver(this,e);let a=0;const l={pressure:0,altitude:0,temperature:0};void 0!==e.elevation&&(n=e.elevation),null!==n&&n<=0&&(s=Math.abs(n)+1,n=1);const u=t=>{i.i2cReadOnce(o,this.REGISTER.STATUS,1,e=>{e[0]&this.MASK.STATUS.PRESSURE_DATA_READ?t():setTimeout(()=>{u(t)},100)})},d=()=>{const t=r?this.MASK.CONTROL.PRESSURE:this.MASK.CONTROL.ALTIMETER,e=this.MASK.CONTROL.SBYB|this.MASK.CONTROL.OS128|t;i.i2cWrite(o,this.REGISTER.CONTROL,e),u(()=>{i.i2cReadOnce(o,this.REGISTER.PRESSURE,6,t=>{const e=c(t[1],t[2],t[3])>>4,i=h(t[4],t[5])>>4;let n;if(l.temperature=i,r)l.pressure=e,this.emit("data",l);else{n=(t[1]<<8|t[2])+(t[3]>>4)/16,a=(3*a+n)/4,l.altitude=a-s}r=!r,d()})})},p=[],f=()=>{i.i2cWrite(o,this.REGISTER.CONTROL,59),i.i2cWrite(o,this.REGISTER.CONTROL,57),setTimeout(()=>{i.i2cReadOnce(o,this.REGISTER.PRESSURE,6,t=>{const e=t[1],r=t[2],s=(t[3]>>4)/4;if(p.push((e<<10|r<<2)+s),4===p.length){const t=(p[0]+p[1]+p[2]+p[3])/4/(1-225577e-10*n)**5.255;i.i2cWrite(o,this.REGISTER.BAR_IN_MSB,t/2>>8),i.i2cWrite(o,this.REGISTER.BAR_IN_LSB,t/2&255),i.i2cWrite(o,this.REGISTER.CONTROL,187),i.i2cWrite(o,this.REGISTER.CONTROL,185),setTimeout(()=>{i.i2cReadOnce(o,this.REGISTER.PRESSURE,6,t=>{const e=t[1],i=t[2],r=t[3];a=(e<<8|i)+(r>>4)/16,d(!1)})},550)}else f()})},500)};i.i2cConfig(Object.assign(e,{settings:{stopTX:!0}})),i.i2cWriteReg(o,45,0),i.i2cWriteReg(o,this.REGISTER.BAR_IN_MSB,0),i.i2cWriteReg(o,this.REGISTER.BAR_IN_LSB,0),i.i2cWriteReg(o,this.REGISTER.CONFIG,this.MASK.CONFIG.TDEFE|this.MASK.CONFIG.PDEFE|this.MASK.CONFIG.DREM),null!==n?f():d()}},identifier:{value:t=>"mpl3115a2-"+E.addressResolver(E.MPL3115A2,t)}},BMP180:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:170,READ:0,READ_START:244,READ_RESULT:246}},initialize:{value(t,e){const i=t.io;let r=null,n=0;void 0!==e.elevation&&(r=e.elevation),(null!=r&&r<=0||null==r)&&(n=Math.abs(r)+1,r=1);const o=E.addressResolver(this,e),a=e.mode||3,u=[5,8,14,26][a],d=s.constrain(a,0,3),p={a1:null,a2:null,a3:null,a4:null,a5:null,a6:null,b1:null,b2:null,b5:null,mb:null,mc:null,md:null};i.i2cConfig(e);new Promise(t=>{i.i2cReadOnce(o,this.REGISTER.COEFFICIENTS,22,e=>{p.a1=l(e[0],e[1]),p.a2=l(e[2],e[3]),p.a3=l(e[4],e[5]),p.a4=h(e[6],e[7]),p.a5=h(e[8],e[9]),p.a6=h(e[10],e[11]),p.b1=l(e[12],e[13]),p.b2=l(e[14],e[15]),p.mb=l(e[16],e[17]),p.mc=l(e[18],e[19]),p.md=l(e[20],e[21]),t()})}).then(()=>{const t={altitude:null,pressure:null,temperature:null};let e=0;const a=()=>{const h=0===e,f=h?46:52+(d<<6),g=h?2:3,E=h?5:u;i.i2cWriteReg(o,this.REGISTER.READ_START,f),setTimeout(()=>{i.i2cReadOnce(o,this.REGISTER.READ_RESULT,g,i=>{let o,u,f,g,E,m,v,y,R,b,S;if(h)u=l(i[0],i[1]),f=(u-p.a6)*p.a5>>15,g=(p.mc<<11)/(f+p.md)>>0,p.b5=f+g|0,t.temperature=(p.b5+8>>4)/10;else{u=c(i[0],i[1],i[2])>>8-d,y=p.b5-4e3,b=y*y,S=b>>12,f=p.b2*S>>11,g=p.a2*y>>11,E=f+g,m=(2+(4*p.a1+E<<d))/4>>0,f=p.a3*y>>13,g=p.b1*S>>16,E=f+g+2>>2,v=p.a4*(E+32768)>>15,R=(u-m)*(5e4>>d),o=R<s.POW_2_31?2*R/v:R/v*2,o>>=0,f=(o>>8)*(o>>8),f=3038*f>>16,g=-7357*o>>16,o+=f+g+3791>>4,t.pressure=o;const e=44330*(1-o/(o/(1-225577e-10*r)**5.255)**(1/5.255));t.altitude=Math.round(e-n)}2==++e&&(e=0,this.emit("data",t)),a()})},E)};a()})}},identifier:{value:t=>"bmp180-"+E.addressResolver(E.BMP180,t)}},BMP280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:136,CONFIG:245,MEASURE:244,PRESSURE:247,TEMPERATURE:250,RESET:224}},initialize:{value(t,e){const i=t.io;let r=null,n=0;void 0!==e.elevation&&(r=e.elevation),(null!=r&&r<=0||null==r)&&(n=Math.abs(r)+1,r=1);const o=E.addressResolver(this,e),a={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null};i.i2cConfig(e),i.i2cWrite(o,this.REGISTER.RESET,182);new Promise(t=>{i.i2cReadOnce(o,this.REGISTER.COEFFICIENTS,24,e=>{a.T1=h(e[1],e[0]),a.T2=l(e[3],e[2]),a.T3=l(e[5],e[4]),a.P1=h(e[7],e[6]),a.P2=l(e[9],e[8]),a.P3=l(e[11],e[10]),a.P4=l(e[13],e[12]),a.P5=l(e[15],e[14]),a.P6=l(e[17],e[16]),a.P7=l(e[19],e[18]),a.P8=l(e[21],e[20]),a.P9=l(e[23],e[22]),t()})}).then(()=>{i.i2cWrite(o,this.REGISTER.MEASURE,63);const t={altitude:null,pressure:null,temperature:null};i.i2cRead(o,this.REGISTER.PRESSURE,6,e=>{let i,o,l,h=0,p=u(c(e[0],e[1],e[2])),f=u(c(e[3],e[4],e[5]));p>>=4,f>>=4;const g=(f>>4)-a.T1;if(o=((f>>3)-(a.T1<<1))*a.T2>>11,l=(g*g>>12)*a.T3>>14,i=o+l,t.temperature=(5*i+128>>8)/100,o=void 0,l=void 0,o=u(i>>1)-64e3,l=((o>>2)*(o>>2)>>11)*u(a.P6),l+=o*u(a.P5)<<1,l=(l>>2)+(u(a.P4)<<16),o=(a.P3*((o>>2)*(o>>2)>>13)>>3)+(u(a.P2)*o>>1)>>18,o=(s.POW_2_15+o)*u(a.P1)>>15,0===o)return 0;h=3125*d(u(s.POW_2_20)-p-(l>>12)),h=h<s.POW_2_31?(h<<1>>>0)/d(o):2*(h/d(o)>>>0),h=d(h)>>>0;const E=h>>3;o=u(a.P9)*u(E*E>>13)>>12,l=u(h>>2)*u(a.P8)>>13,h=d(u(h)+(o+l+a.P7>>4)),t.pressure=h;const m=44330*(1-h/(h/(1-225577e-10*r)**5.255)**(1/5.255));t.altitude=Math.round(m-n),this.emit("data",t)})})}},identifier:{value:t=>"bmp280-"+E.addressResolver(E.BMP280,t)}},BME280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS_TP:136,COEFFICIENTS_H:225,CONFIG:245,MEASURE_H:242,MEASURE_TP:244,PRESSURE:247,TEMPERATURE:250,HUMIDITY:253,RESET:224}},initialize:{value(t,i){const r=t.io;let n=null,o=0;void 0!==i.elevation&&(n=i.elevation),(null!=n&&n<=0||null==n)&&(o=Math.abs(n)+1,n=1);const a=E.addressResolver(this,i),p={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null};r.i2cConfig(i),r.i2cWrite(a,this.REGISTER.RESET,182);new Promise(t=>{Promise.all([new Promise(t=>{r.i2cReadOnce(a,136,24,e=>{p.T1=h(e[1],e[0]),p.T2=l(e[3],e[2]),p.T3=l(e[5],e[4]),p.P1=h(e[7],e[6]),p.P2=l(e[9],e[8]),p.P3=l(e[11],e[10]),p.P4=l(e[13],e[12]),p.P5=l(e[15],e[14]),p.P6=l(e[17],e[16]),p.P7=l(e[19],e[18]),p.P8=u(l(e[21],e[20])),p.P9=u(l(e[23],e[22])),t()})}),new Promise(t=>{r.i2cReadOnce(a,161,1,e=>{p.H1=s.u8(e[0]),t()})}),new Promise(t=>{r.i2cReadOnce(a,225,8,e=>{p.H2=u(l(e[1],e[0])),p.H3=u(e[2]),p.H4=u(e[3]<<4|15&e[4]),p.H5=u(e[5]<<4|e[4]>>4),p.H6=s.s8(e[6]),t()})})]).then(t)}).then(()=>{r.i2cWrite(a,this.REGISTER.MEASURE_H,5),r.i2cWrite(a,this.REGISTER.MEASURE_TP,183);const t={altitude:null,pressure:null,humidity:null,temperature:null},i=Date.now();r.i2cRead(a,this.REGISTER.PRESSURE,8,r=>{if(!e.env.IS_TEST_MODE&&i+1e3>Date.now())return;let a,l,f,g,E=0,m=u(c(r[0],r[1],r[2])),v=u(c(r[3],r[4],r[5]));const y=u(h(r[6],r[7]));m>>=4,v>>=4;const R=(v>>4)-p.T1;if(l=((v>>3)-(p.T1<<1))*p.T2>>11,f=(R*R>>12)*p.T3>>14,a=l+f,t.temperature=(5*a+128>>8)/100,l=void 0,f=void 0,l=u(a>>1)-64e3,f=((l>>2)*(l>>2)>>11)*u(p.P6),f+=l*u(p.P5)<<1,f=(f>>2)+(u(p.P4)<<16),l=(p.P3*((l>>2)*(l>>2)>>13)>>3)+(u(p.P2)*l>>1)>>18,l=(s.POW_2_15+l)*u(p.P1)>>15,0===l)return 0;E=3125*d(u(s.POW_2_20)-m-(f>>12)),E=E<s.POW_2_31?(E<<1>>>0)/d(l):2*(E/d(l)>>>0),E=d(E)>>>0;const b=E>>3;l=u(p.P9)*u(b*b>>13)>>12,f=u(E>>2)*p.P8>>13,E=d(u(E)+(l+f+p.P7>>4)),t.pressure=E;const S=44330*(1-E/(E/(1-225577e-10*n)**5.255)**(1/5.255));t.altitude=Math.round(S-o),g=u(a-76800),g=((y<<14)-u(p.H4<<20)-p.H5*g+s.POW_2_14>>15)*((((g*p.H6>>10)*((g*p.H3>>11)+s.POW_2_15)>>10)+s.POW_2_21)*p.H2+s.POW_2_13>>14),g-=((g>>15)*(g>>15)>>7)*u(p.H1)>>4,g=s.constrain(g,0,419430400),t.humidity=d(g>>12),this.emit("data",t)})})}},identifier:{value:t=>"bme280-"+E.addressResolver(E.BME280,t)}},SI7020:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:224}},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e);e.delay=5e4,i.i2cConfig(e);const n={temperature:null,humidity:null};i.i2cRead(r,this.REGISTER.TEMPERATURE,2,t=>{n.temperature=h(t[0],t[1]),this.emit("data",n)}),i.i2cRead(r,this.REGISTER.HUMIDITY,2,t=>{n.humidity=h(t[0],t[1]),this.emit("data",n)})}},identifier:{value:t=>"si7020-"+E.addressResolver(E.SI7020,t)}},MS5611:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:162,READ:0,PRESSURE:64,TEMPERATURE:80,RESET:30}},initialize:{value(t,e){const i=t.io;let r=null,n=0;void 0!==e.elevation&&(r=e.elevation),(null!=r&&r<=0||null==r)&&(n=Math.abs(r)+1,r=1);const o=E.addressResolver(this,e),a={altitude:null,pressure:null,temperature:null},l=e.mode||5,u=[1,2,3,4,5,10][l],d={C1:null,C2:null,C3:null,C4:null,C5:null,C6:null},p=Object.keys(d);e.delay=1e3*u,i.i2cConfig(e),i.i2cWrite(o,this.REGISTER.RESET);new Promise(t=>{setTimeout(()=>{const e=p.map((t,e)=>{const r=this.REGISTER.COEFFICIENTS+2*e;return new Promise(e=>{i.i2cReadOnce(o,r,2,i=>{d[t]=h(i[0],i[1]),e()})})});Promise.all(e).then(t)},50)}).then(()=>{let t,e,h,p,f,g,E,m,v,y,R=0;const b=()=>{const S=0===R,T=(S?80:64)+l;i.i2cWrite(o,T),S?(e=0,h=0,p=0,m=0,v=0,y=0):(t=0,f=0,g=0,E=0),setTimeout(()=>{i.i2cReadOnce(o,this.REGISTER.READ,3,i=>{if(S)e=c(i[0],i[1],i[2]),h=e-d.C5*s.POW_2_8,p=2e3+h*d.C6/s.POW_2_23,p<2e3&&(m=h**2/s.POW_2_31,v=5*(p-2e3)**2/2,y=5*(p-2e3)**2/s.POW_2_2,p<-1500&&(v+=7*(p+1500)**2,y+=11*(p+1500)**2/2)),p-=m,a.temperature=p/100;else{t=c(i[0],i[1],i[2]),f=d.C2*s.POW_2_16+d.C4*h/s.POW_2_7,g=d.C1*s.POW_2_15+d.C3*h/s.POW_2_8,f-=v,g-=y,E=(t*g/s.POW_2_21-f)/s.POW_2_15,a.pressure=E;const e=44330*(1-E/(E/(1-225577e-10*r)**5.255)**(1/5.255));a.altitude=e-n}2==++R&&(R=0,this.emit("data",a)),b()})},u)};b()})}},identifier:{value:t=>"ms5611-"+E.addressResolver(E.MS5611,t)}},TH02:{ADDRESSES:{value:[64]},COMMAND:{value:{MEASURE_HUMIDITY:1,MEASURE_TEMPERATURE:17}},REGISTER:{value:{STATUS:0,READ:1,CONFIG:3}},initialize:{value(t,e){const i=t.io,r=E.addressResolver(this,e),n={temperature:null,humidity:null};let s=0;i.i2cConfig(Object.assign(e,{settings:{stopTX:!0}}));const o=()=>{const t=0===s,e=t?this.COMMAND.MEASURE_TEMPERATURE:this.COMMAND.MEASURE_HUMIDITY;new Promise(t=>{i.i2cWrite(r,this.REGISTER.CONFIG,e);const n=()=>{i.i2cReadOnce(r,this.REGISTER.STATUS,1,e=>{1&e[0]?n():t()})};n()}).then(()=>{Promise.all([new Promise(t=>{i.i2cReadOnce(r,1,1,e=>{t(e[0])})}),new Promise(t=>{i.i2cReadOnce(r,2,1,e=>{t(e[0])})})]).then(e=>{t?n.temperature=(h(e[0],e[1])>>2)/32-50:n.humidity=(h(e[0],e[1])>>4)/16-24,2==++s&&(s=0,this.emit("data",n)),o()})})};o()}},identifier:{value:t=>"th02-"+E.addressResolver(E.TH02,t)}},LSM303C:{ADDRESSES:{value:[29,30]},COMMAND:{value:{ACC_SETUP:[4,63,63,63],MAG_SETUP:[216,96,64,216,8,0]}},REGISTER:{value:{ACC_CTRL_SEQ:[35,32,32,32],ACC_STATUS:39,ACC_OUTX_L:40,ACC_OUTX_H:41,ACC_OUTY_L:42,ACC_OUTY_H:43,ACC_OUTZ_L:44,ACC_OUTZ_H:45,MAG_CTRL_SEQ:[32,33,36,32,35,34],MAG_STATUS:39,MAG_OUTX_L:40,MAG_OUTX_H:41,MAG_OUTY_L:42,MAG_OUTY_H:43,MAG_OUTZ_L:44,MAG_OUTZ_H:45,MAG_TEMP_OUT_L:46,MAG_TEMP_OUT_H:47}},initialize:{value(t,e){const i=t.io,r=this.freq||40,[n,s]=this.ADDRESSES,o={},a={},h={temperature:0,magnetometer:a,accelerometer:o},c=t=>{i.i2cReadOnce(n,this.REGISTER.ACC_OUTX_L,6,e=>{o.x=.06103515625*l(e[1],e[0]),o.y=.06103515625*l(e[3],e[2]),o.z=.06103515625*l(e[5],e[4]),t()})},u=t=>{i.i2cReadOnce(s,this.REGISTER.MAG_OUTX_L,6,e=>{a.x=.00048828125*l(e[1],e[0]),a.y=.00048828125*l(e[3],e[2]),a.z=.00048828125*l(e[5],e[4]),t()})},d=t=>{i.i2cReadOnce(s,this.REGISTER.MAG_TEMP_OUT_L,2,e=>{h.temperature=l(e[1],e[0]),t()})},p=()=>{Promise.all([new Promise(c),new Promise(u),new Promise(d)]).then(()=>{this.emit("data",h),setTimeout(p,r)})};(()=>{i.i2cConfig(Object.assign({},e,{address:n})),this.REGISTER.ACC_CTRL_SEQ.forEach((t,e)=>{i.i2cWrite(n,t,this.COMMAND.ACC_SETUP[e])})})(),(()=>{i.i2cConfig(Object.assign({},e,{address:s})),this.REGISTER.MAG_CTRL_SEQ.forEach((t,e)=>{i.i2cWrite(s,t,this.COMMAND.MAG_SETUP[e])})})(),p()}},identifier:{value:t=>"lsm303c-"+E.addressResolver(E.LSM303C,t)}}};E.BMP085=E.BMP180,E.GY521=E.MPU6050,E.SI7021=E.SI7020,E.DHT11_I2C_NANO_BACKPACK=E.DHT_I2C_NANO_BACKPACK,E.DHT21_I2C_NANO_BACKPACK=E.DHT_I2C_NANO_BACKPACK,E.DHT22_I2C_NANO_BACKPACK=E.DHT_I2C_NANO_BACKPACK,E.get=(t,e,i={})=>{let r,s,o;return a.has(t)||a.set(t,{}),r=a.get(t),s=E[e].identifier.value(i),r[s]||(o=new n,Object.defineProperties(o,E[e]),o.initialize(t,i),r[s]=o),r[s]},E.addressResolver=(t,e)=>{const i=t.ADDRESSES,r=e.address||(Array.isArray(i)?i[0]:i.value[0]);return e.address=r,r},E.clear=()=>{a.clear()};const m={MPU6050:{initialize:{value(t){f.call(this,"MPU6050",t)}},components:{value:["accelerometer","gyro",p]}},BNO055:{initialize:{value(t){o.get(this).calibrationMask=t.calibrationMask||192,E.get(this.board,"BNO055",t).on("calibrated",()=>this.emit("calibrated")).on("calibration",t=>this.emit("calibration",t)),f.call(this,"BNO055",t)}},components:{value:["accelerometer","gyro","magnetometer","orientation",p]},calibration:{get(){return this.orientation.calibration}},isCalibrated:{get(){const{calibrationMask:t}=o.get(this);return(this.orientation.calibration&t)===t}}},MPL115A2:{initialize:{value(t){f.call(this,"MPL115A2",t)}},components:{value:["barometer",p]}},SHT31D:{initialize:{value(t){f.call(this,"SHT31D",t)}},components:{value:["hygrometer",p]}},HTU21D:{initialize:{value(t){f.call(this,"HTU21D",t)}},components:{value:["hygrometer",p]}},HIH6130:{initialize:{value(t){f.call(this,"HIH6130",t)}},components:{value:["hygrometer",p]}},DHT_I2C_NANO_BACKPACK:{initialize:{value(t){f.call(this,"DHT_I2C_NANO_BACKPACK",t)}},components:{value:["hygrometer",p]}},MPL3115A2:{initialize:{value(t){f.call(this,"MPL3115A2",t)}},components:{value:["altimeter","barometer",p]}},BMP180:{initialize:{value(t){f.call(this,"BMP180",t)}},components:{value:["altimeter","barometer",p]}},BMP280:{initialize:{value(t){f.call(this,"BMP280",t)}},components:{value:["altimeter","barometer",p]}},BME280:{initialize:{value(t){f.call(this,"BME280",t)}},components:{value:["altimeter","barometer","hygrometer",p]}},SI7020:{initialize:{value(t){f.call(this,"SI7020",t)}},components:{value:["hygrometer",p]}},MS5611:{initialize:{value(t){f.call(this,"MS5611",t)}},components:{value:["altimeter","barometer",p]}},TH02:{initialize:{value(t){f.call(this,"TH02",t)}},components:{value:["hygrometer",p]}},LSM303C:{initialize:{value(t){f.call(this,"LSM303C",t)}},components:{value:["magnetometer",p,"accelerometer"]}}};m.BMP085=m.BMP180,m.GY521=m.MPU6050,m.SI7021=m.SI7020,m.DHT11_I2C_NANO_BACKPACK=m.DHT_I2C_NANO_BACKPACK,m.DHT21_I2C_NANO_BACKPACK=m.DHT_I2C_NANO_BACKPACK,m.DHT22_I2C_NANO_BACKPACK=m.DHT_I2C_NANO_BACKPACK;class v extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,m,t);o.set(this,{}),this.freq=t.freq||20,"function"==typeof this.initialize&&this.initialize(t),this.isReady=!1,setInterval(()=>{this.isReady&&this.emit("data",this)},this.freq);const e=this.components.slice();this.components&&this.components.length>0&&this.components.forEach(t=>{this[t]instanceof n&&this[t].on("change",()=>{if(e.length){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}e.length||this.isReady||(this.isReady=!0),this.isReady&&this.emit("change",this,t)})})}}v.Drivers=E,e.env.IS_TEST_MODE&&(v.Controllers=m,v.purge=()=>{o.clear()}),t.exports=v}).call(this,i(1))},function(t,e){var i,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var l,h=[],c=!1,u=-1;function d(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&p())}function p(){if(!c){var t=a(d);c=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";var r,n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function u(t,e,i,r){var n,s,o,a;if(h(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),o=s[e]),void 0===o)o=s[e]=i,++t._eventsCount;else if("function"==typeof o?o=s[e]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(n=c(t))>0&&o.length>n&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,a=l,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=d.bind(r);return n.listener=i,r.wrapFn=n,n}function f(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):E(n,n.length)}function g(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function E(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=n[t];if(void 0===l)return!1;if("function"==typeof l)s(l,this,e);else{var h=l.length,c=E(l,h);for(i=0;i<h;++i)s(c[i],this,e)}return!0},a.prototype.addListener=function(t,e){return u(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return u(this,t,e,!0)},a.prototype.once=function(t,e){return h(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,r,n,s,o;if(h(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){o=i[s].listener,n=s;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,s=Object.keys(i);for(r=0;r<s.length;++r)"removeListener"!==(n=s[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,i){(function(e){const r=i(2),n=i(58),s=i(5),o=i(4),a=i(32),l=i(33),h=i(67);let c,u=!!e.env.IS_TEST_MODE;const d=[],p=/usb|acm|^com/i,f="undefined",g={used:[],attempts:[],detect(t){let r;r=parseFloat(e.versions.nw)>=.13?i(68):i(18),r.list().then(e=>{const i=e.reduce((t,e)=>{let i=!0;return p.test(e.path)||(i=!1),g.used.includes(e.path)&&(i=!1),i&&t.push(e.path),t},[]);if(!i.length){if(u&&this.abort)return;return g.attempts[g.used.length]||(g.attempts[g.used.length]=0,this.info("Board","Looking for connected device")),g.attempts[g.used.length]++,g.attempts[g.used.length]>10?void this.fail("Board","No connected device found"):void setTimeout(()=>{g.detect.call(this,t)},400)}this.info("Available",n.grey(i)),t.call(this,i[0])})},connect(t,e){const r=i(73).Board;let s,o,a,l,h=null;"object"==typeof t&&t.path?(a=t.path,this.info(t.transport||"SerialPort",n.grey(a))):a=t,g.used.push(a);try{s=new r(t,t=>{t&&(h=t),e.call(this,h,h?"error":"ready",s)}),s.name="Firmata",s.defaultLed=13,s.port=a,o=!0}catch(t){h=t}h&&(h=h.message||h),l=o?"connect":"error",e.call(this,h,l,s)}};class E extends r{constructor(t={}){super();const i={};let r=!1;Object.assign(this,t),this.timer=null,this.isConnected=!1,this.isReady=!1,this.io=this.io||null,this.register=[],this.occupied=[],this.Drivers={},this.id||(this.id=o.uid()),typeof this.debug===f&&(this.debug=!0),typeof this.repl===f&&(this.repl=!0),typeof this.sigint===f&&(this.sigint=!0),this.pins=null,this.repl&&(a.ref?(i[this.id]=this,a.ref.on("ready",(function(){a.ref.inject(i)})),this.repl=a.ref):(i[this.id]=i.board=this,this.repl=new a(i))),t.io?(this.io=t.io,this.isReady=t.io.isReady,this.transport=this.io.transport||null,this.port=this.io.name,this.pins=E.Pins(this),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},this.io.RESOLUTION||{})):this.port&&t.port?g.connect.call(this,this.port,m):g.detect.call(this,(function(t){g.connect.call(this,t,m)})),t.port||null===this.io||(this.info("Available",n.grey(this.io.name||"unknown")),["connect","ready"].forEach(t=>{this.io.once(t,()=>{"ready"!==t||this.isConnected?m.call(this,null,t,this.io):r=!0,"connect"===t&&r&&m.call(this,null,"ready",this.io)}),this.io.isReady&&e.nextTick(()=>this.io.emit(t))})),this.once("ready",()=>{const t=e.hrtime();this.millis=function(){return e.hrtime(t)[1]/1e6},["close","disconnect","error","string"].forEach(t=>{this.io.on(t,e=>this.emit(t,e))})}),d.push(this)}}function m(t,i,r){let s=!1;this.io||(this.io=r),"error"===i&&t&&t.message&&(s=!0,this.error("Error",t.message)),"connect"===i&&(this.isConnected=!0,this.port=r.port||r.name,this.info("Connected",n.grey(this.port)),u||(this.timer=setTimeout(()=>{this.error("Device or Firmware Error","A timeout occurred while connecting to the Board. \n\nPlease check that you've properly flashed the board with the correct firmware.\nSee: https://github.com/rwaldron/johnny-five/wiki/Getting-Started#trouble-shooting\n\nIf connecting to a Leonardo or Leonardo clone, press the 'Reset' button on the board, wait approximately 11 seconds for complete reset, then run your program again."),this.emit("error",new Error("A timeout occurred while connecting to the Board."))},this.timeout||1e4))),"ready"===i&&(this.timer&&clearTimeout(this.timer),this.isReady=!0,this.pins=E.Pins(this),this.MODES=this.io.MODES,typeof r.debug!==f&&!1===r.debug&&(this.debug=!1),typeof r.repl!==f&&!1===r.repl&&(this.repl=!1),this.repl&&this.repl.initialize(()=>this.emit("ready")),"Mock"!==r.name&&this.sigint&&e.on("SIGINT",()=>{this.emit("exit"),this.warn("Board","Closing.");const t=setTimeout(()=>{e.reallyExit()},1e3),i=setInterval(()=>{this.io.pending||(clearInterval(i),clearTimeout(t),e.nextTick(e.reallyExit))},1)}),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},r.RESOLUTION||{})),this.repl?"connect"===i&&this.emit(i,t):s||this.emit(i,t)}["digitalWrite","analogWrite","analogRead","digitalRead","pinMode","queryPinState","stepperConfig","stepperStep","sendI2CConfig","sendI2CWriteRequest","sendI2CReadRequest","i2cConfig","i2cWrite","i2cWriteReg","i2cRead","i2cReadOnce","pwmWrite","servoConfig","servoWrite","sysexCommand","sysexResponse","serialConfig","serialWrite","serialRead","serialStop","serialClose","serialFlush","serialListen"].forEach((function(t){E.prototype[t]=function(){return this.io[t].apply(this.io,arguments),this}})),E.prototype.snapshot=function(t){const e=this.snapshot.blacklist,i=this.snapshot.special,r="function"==typeof t;return this.register.reduce((n,s)=>(typeof s.components===f&&n.push(Object.getOwnPropertyNames(s).reduce((n,o)=>{const a=s[o];if(!e.includes(o)&&"function"!=typeof a)if(r){const e=t(o,a,s);void 0!==e&&(n[o]=e)}else n[o]=i[o]?i[o](a):a;return n},Object.create(null))),n),[])},E.prototype.serialize=function(t){return JSON.stringify(this.snapshot(t))},E.prototype.snapshot.blacklist=["board","io","_events","_eventsCount","state"],E.prototype.samplingInterval=function(t){if(!this.io.setSamplingInterval)throw new Error("This IO plugin does not implement an interval adjustment method");return this.io.setSamplingInterval(t),this},E.prototype.snapshot.special={mode:function(t){return["INPUT","OUTPUT","ANALOG","PWM","SERVO"][t]||"unknown"}},E.prototype.shiftOut=function(t,e,i,r){3===arguments.length&&(r=i,i=!0);for(let n=0;n<8;n++)this.io.digitalWrite(e,0),i?this.io.digitalWrite(t,0|!!(r&1<<7-n)):this.io.digitalWrite(t,0|!!(r&1<<n)),this.io.digitalWrite(e,1)};const v={specials:["error","fail","warn","info"],colors:{log:"white",error:"red",fail:"inverse",warn:"yellow",info:"cyan"}};E.prototype.log=function(){var t=Array.from(arguments);v.specials.includes(t[0])||t.unshift("log");var e=t.shift(),i=t.shift(),r=t.shift(),s=v.colors[e],o=Date.now(),a={type:e,timestamp:o,class:i,message:"",data:null};"object"==typeof t[t.length-1]&&(a.data=t.pop()),r+=" "+t.join(", "),a.message=r.trim(),this.debug&&console.log([n.grey(o),n.magenta(i),n[s](r),t.join(", ")].join(" ")),this.emit(e,a),this.emit("message",a)},v.specials.forEach((function(t){E.prototype[t]=function(){var e=[].slice.call(arguments);e.unshift(t),this.log.apply(this,e)}})),E.prototype.wait=function(t,e){return setTimeout(e,t),this},E.prototype.loop=function(t,e){var i=setInterval((function(){e((function(){clearInterval(i)}))}),t);return this},E.map=o.map,E.fmap=o.fmap,E.constrain=o.constrain,E.range=o.range,E.uid=o.uid,E.mount=function(t){var e="number"==typeof t&&t;return t&&t.board?t.board:"number"==typeof e?d[e]||null:d.length?d[0]:null},E.Component=function(t,e){var r;if(typeof t===f&&(t={}),typeof e===f&&(e={}),this.board=E.mount(t),this.io=this.board.io,this.id=t.id||E.uid(),this.custom=t.custom||{},"number"==typeof t.pin||"string"==typeof t.pin)r=[t.pin];else if(Array.isArray(t.pins))r=t.pins.slice();else if("object"==typeof t.pins&&null!==t.pins){var n=t.pins||t.pin;for(var s in r=[],n)r.push(n[s])}t.controller&&("string"==typeof t.controller&&(t.controller=t.controller.replace(/-/g,"")),c||(c=i(8)),c.hasController(t.controller)&&(e={normalizePin:!1,requestPin:!1})),(e=E.Component.initialization(e)).normalizePin&&(t=E.Pins.normalize(t,this.board)),typeof t.pins!==f&&(this.pins=t.pins||[]),typeof t.pin!==f&&(this.pin=t.pin),typeof t.emitter!==f&&(this.emitter=t.emitter),typeof t.address!==f&&(this.address=t.address),typeof t.controller!==f&&(this.controller=t.controller),typeof t.bus!==f&&(this.bus=t.bus),this.board.register.push(this)},E.Component.initialization=function(t){return Object.assign({},{requestPin:!0,normalizePin:!0},t)},E.Controller=function(t,e){let i;if(i="string"==typeof e.controller?t[e.controller]||t[e.controller.toUpperCase()]:e.controller||t.DEFAULT||null,null===i)throw new Error("No Valid Controller Found");let r=i.requirements&&i.requirements.value;r&&r.options&&Object.keys(r.options).forEach((function(t){if(typeof e[t]===f||typeof e[t]!==r.options[t].typeof){if(r.options[t].throws)throw new Error(r.options[t].message);this.board.warn(this.constructor.name,r.options[t].message)}}),this),Object.defineProperties(this,i)},E.Pins=h,E.Options=function(t){return new l(t)},Object.defineProperty(E,"cache",{get:()=>d}),E.Event=function(t){if(typeof t===f)throw new Error("Board.Event missing Event object");this.type=t.type||"data",this.target=t.target||null,Object.assign(this,t)};class y extends s{constructor(t){let e;if(Array.isArray(t)&&(e=t.slice(),t={ports:e}),Array.isArray(t)||"object"!=typeof t||void 0===t.ports||(e=t.ports),!Array.isArray(e))throw new Error("Expected ports to be an array");typeof t.debug===f&&(t.debug=!0),typeof t.repl===f&&(t.repl=!0);const i={},r=e.some(({repl:t})=>!1===t),s=e.some(({debug:t})=>!1===t);super(e.map(t=>{let e;return"string"==typeof t?(e={},p.test(t)?e.port=t:e.id=t):e=t,e.repl=!1,new E(e)})),this.debug=t.debug,this.repl=t.repl,s&&(this.debug=!1),r&&(this.repl=!1);const o=this.map((t,e)=>(i[t.id]=t,new Promise(t=>{this[e].on("error",t=>this.emit("error",t)),this[e].on("fail",t=>this.emit("fail",t)),this[e].on("ready",()=>t(this[e]))})));Promise.all(o).then(()=>{this.each(t=>{t.info("Board ID: ",n.green(t.id))}),this.repl?(this.repl=new a(Object.assign({},i,{board:this})),this.repl.initialize(()=>this.emit("ready",i))):this.emit("ready",i)}).catch(t=>{console.error(n.red(t))})}static get type(){return E}}s.installMethodForwarding(y.prototype,E.prototype),Object.assign(y.prototype,r.prototype),y.prototype.byId=function(t){for(var e=0;e<this.length;e++)if(this[e].id===t)return this[e];return null},y.prototype.log=E.prototype.log,v.specials.forEach((function(t){y.prototype[t]=function(){var e=[].slice.call(arguments);e.unshift(t),this.log.apply(this,e)}})),u&&(g.purge=function(){g.used.length=0},E.Serial=g,E.purge=function(){E.Pins.normalize.clear(),a.isActive=!1,a.isBlocked=!0,a.ref=null,d.length=0},E.testMode=function(t){if(!arguments.length)return u;u=t}),E.Array=y,E.Collection=y,t.exports=E}).call(this,i(1))},function(t,e,i){const r={debounce:i(65),cloneDeep:i(66)},{ceil:n,max:s,min:o,PI:a}=Math;r.toFixed=(t,e)=>+(t||0).toFixed(e),r.map=(t,e,i,r,n)=>(t-e)*(n-r)/(i-e)+r|0,r.scale=r.map;const l=new Float32Array(1);r.fmap=(t,e,i,r,n)=>(l[0]=(t-e)*(n-r)/(i-e)+r,l[0]),r.fscale=r.fmap,r.constrain=(t,e,i)=>o(i,s(e,t)),r.inRange=(t,e,i)=>t>=e&&t<=i,r.range=function(t,e,i){1===arguments.length&&(e=t-1,t=0);const r=s(n(((e=e||0)-(t=t||0))/(i=i||1)),0);let o=0;const a=[];for(;o<=r;)a[o++]=t,t+=i;return a},r.uid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}).toUpperCase(),r.square=t=>t*t,r.sum=function(t){let e;return e=Array.isArray(t)?t:[].slice.call(arguments),e.reduce((t,e)=>t+e,0)},r.fma=(t,e,i)=>{let r,n=134217729*t;n+=t-n,r=t-n;let s,o=134217729*e;o+=e-o,s=e-o;const a=t*e,l=a+i;return l+(a-(l-i)+(i-(l-a))+(n*o-a+n*s+r*o+r*s))},r._BV=r.bitValue=r.bv=t=>1<<t,r.int16=(t,e)=>{const i=t<<8|e;return i>>15?-1*(1+(65535^i)):i},r.uint16=(t,e)=>t<<8|e,r.int24=(t,e,i)=>{const r=t<<16|e<<8|i;return r>>23?-1*(1+(16777215^r)):r},r.uint24=(t,e,i)=>t<<16|e<<8|i,r.int32=(t,e,i,r)=>{const n=t<<24|e<<16|i<<8|r;return n>>31?-1*(1+(4294967295^n)):n},r.uint32=(t,e,i,r)=>(t<<24|e<<16|i<<8|r)>>>0,r.bitSize=t=>Math.round(Math.log2(t));const h=r.bitSize(Number.MAX_SAFE_INTEGER)+1;for(let t=0;t<h;t++)r["POW_2_"+t]=2**t;[4,8,10,12,16,20,24,32].forEach(t=>{const e=r["POW_2_"+t],i=e/2>>>0,n=i-1;r["u"+t]=t=>(t<0&&(t+=e),r.constrain(t,0,e-1)),r["s"+t]=t=>(t>n&&(t-=e),r.constrain(t,-i,n))}),r.RAD_TO_DEG=180/a,r.DEG_TO_RAD=a/180,r.TAU=2*a,t.exports=r},function(t,e,i){const r=i(2);class n{constructor(t){const e=this.type;let i=[];if(this.length=0,Array.isArray(t))i=t;else if(Array.isArray(t.pins)){const e=Object.keys(t).filter(t=>"pins"!==t);i=t.pins.map(i=>{const r={};return Array.isArray(i)?r.pins=i:r.pin=i,e.reduce((e,i)=>(e[i]=t[i],e),r)})}if(i.length)for(;i.length;){let t=i.shift();"function"==typeof e&&(t instanceof e||t instanceof this.constructor||(t=new e(t))),this.add(t)}}slice(){return new this.constructor([].slice.apply(this,arguments))}}n.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],n.prototype.add=function(...t){let e=this.length;1===t.length&&t[0]instanceof this.constructor&&(t=t[0]);for(let i=0;i<t.length;i++)this.type?(t[i]instanceof this.type||t[i]instanceof this.constructor)&&(this[e++]=t[i]):this[e++]=t[i];return this.length=e},n.prototype.each=function(t){let e=this.length;for(let i=0;i<e;i++)t.call(this[i],this[i],i);return this},n.prototype.forEach=function(){[].forEach.apply(this,arguments)},n.prototype.includes=function(){return[].includes.apply(this,arguments)},n.prototype.indexOf=function(){return[].indexOf.apply(this,arguments)},n.prototype.map=function(){return[].map.apply(this,arguments)},n.prototype.byId=function(t){return[].find.call(this,(function(e){return void 0!==e.id&&e.id===t}))},n.installMethodForwarding=(t,e,i={})=>{const{skip:r=[]}=i,n="apply|arguments|bind|call|caller|constructor|domain|length|name|prototype|toString".split("|");return Object.getOwnPropertyNames(e).reduce((t,e)=>(r.includes(e)||n.includes(e)||(t[e]=function(...t){const i=this.length;for(let r=0;r<i;r++)this[r][e](...t);return this}),t),t)};const s=()=>{};n.installCallbackReconciliation=(t,e)=>{e.forEach(e=>{t[e]=function(t,i){const r=this.length,n=[];"function"==typeof t&&(i=t,t=1e3),"function"!=typeof i&&(i=s);for(let i=0;i<r;i++)n.push(new Promise(r=>this[i][e](t,()=>r())));return Promise.all(n).then(i),this}})},n.Emitter=class extends n{constructor(t){super(t);let e=null,i=5;Array.isArray(t)||"object"!=typeof t||null===t||(i=t.freq||t.period||i,t.frequency&&(i=1/t.frequency*1e3)),Object.defineProperties(this,{period:{get:()=>i,set(t){i!==t&&(i=t),e&&clearInterval(e),e=setInterval(()=>{this.emit("data",this)},i)}}}),this.period=i,this.on("newListener",t=>{"change"!==t&&"data"!==t&&this.forEach(e=>{e.on(t,i=>this.emit(t,e,i))})})}add(...t){return t.length&&(super.add(...t),t.forEach(t=>{t&&t.on("change",()=>this.emit("change",t))})),this.length}},Object.assign(n.Emitter.prototype,r.prototype),n.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],t.exports=n},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=i(69),n=i(70),s=i(34);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return h(this,t,e,i)}function h(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,r){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,i,r):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,i),n=(t=a(t,r)).write(e,i);n!==r&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|p(e.length);return 0===(t=a(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):d(t,e);if("Buffer"===e.type&&s(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(c(e),t=a(t,e<0?0:0|p(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|p(e.length);t=a(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return w(this,e,i);case"latin1":case"binary":return I(this,e,i);case"base64":return _(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function E(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function m(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:v(t,e,i,r,n);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):v(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function v(t,e,i,r,n){var s,o=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,l/=2,i/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){var c=-1;for(s=i;s<a;s++)if(h(t,s)===h(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(i+l>a&&(i=a-l),s=i;s>=0;s--){for(var u=!0,d=0;d<l;d++)if(h(t,s+d)!==h(e,d)){u=!1;break}if(u)return s}return-1}function y(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function R(t,e,i,r){return z(B(e,t.length-i),t,i,r)}function b(t,e,i,r){return z(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function S(t,e,i,r){return b(t,e,i,r)}function T(t,e,i,r){return z(F(e),t,i,r)}function O(t,e,i,r){return z(function(t,e){for(var i,r,n,s=[],o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function _(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var s,o,a,l,h=t[n],c=null,u=h>239?4:h>223?3:h>191?2:1;if(n+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(s=t[n+1]))&&(l=(31&h)<<6|63&s)>127&&(c=l);break;case 3:s=t[n+1],o=t[n+2],128==(192&s)&&128==(192&o)&&(l=(15&h)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=t[n+1],o=t[n+2],a=t[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(l=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return i}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return h(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,r){return c(e),e<=0?a(t,e):void 0!==i?"string"==typeof r?a(t,e).fill(i,r):a(t,e).fill(i):a(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return u(null,t)},l.allocUnsafeSlow=function(t){return u(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=l.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)E(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,r,n){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;for(var s=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(e>>>=0),a=Math.min(s,o),h=this.slice(r,n),c=t.slice(e,i),u=0;u<a;++u)if(h[u]!==c[u]){s=h[u],o=c[u];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return m(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return m(this,t,e,i,!1)},l.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return y(this,t,e,i);case"utf8":case"utf-8":return R(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return S(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function I(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function M(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=e;s<i;++s)n+=k(t[s]);return n}function C(t,e,i){for(var r=t.slice(e,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}function P(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,i,r,n,s){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function L(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(t.length-i,2);n<s;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function x(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(t.length-i,4);n<s;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function N(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function G(t,e,i,r,s){return s||N(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function W(t,e,i,r,s){return s||N(t,0,i,8),n.write(t,e,i,r,52,8),i+8}l.prototype.slice=function(t,e){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var n=e-t;i=new l(n,void 0);for(var s=0;s<n;++s)i[s]=this[s+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},l.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var r=e,n=1,s=this[t+--r];r>0&&(n*=256);)s+=this[t+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},l.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),n.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),n.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),n.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),n.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||D(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||D(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);D(this,t,e,i,n-1,-n)}var s=0,o=1,a=0;for(this[e]=255&t;++s<i&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},l.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);D(this,t,e,i,n-1,-n)}var s=i-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return G(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return G(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return W(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return W(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,r){if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n,s=r-i;if(this===t&&i<e&&e<r)for(n=s-1;n>=0;--n)t[n+e]=this[n+i];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},l.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var o=l.isBuffer(t)?t:B(new l(t,r).toString()),a=o.length;for(s=0;s<i-e;++s)this[s+e]=o[s%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var i;e=e||1/0;for(var r=t.length,n=null,s=[],o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,i(6))},function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(76),o=i(4),a=new Map,l=new Map;class h extends n{constructor(){super(),this.HIGH=1,this.LOW=0,this.isReady=!1,this.MODES={},this.pins=[],this.analogPins=[]}}const c={DEFAULT:{initialize:{value(){throw new Error("Expander expects a valid controller")}}},MCP23017:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIRA:0,GPPUA:12,GPIOA:18,OLATA:20,IODIRB:1,GPPUB:13,GPIOB:19,OLATB:21}},initialize:{value(t){const e=a.get(this);e.iodir=[255,255],e.olat=[255,255],e.gpio=[255,255],e.gppu=[0,0],this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),this.io.i2cWrite(this.address,[this.REGISTER.IODIRA,e.iodir[this.REGISTER.IODIRA]]),this.io.i2cWrite(this.address,[this.REGISTER.IODIRB,e.iodir[this.REGISTER.IODIRB]]),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<16;t++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(t,this.MODES.OUTPUT),this.digitalWrite(t,this.LOW);this.name="MCP23017",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){const i=a.get(this),r=t;let n=0,s=null;t<8?n=this.REGISTER.IODIRA:(n=this.REGISTER.IODIRB,t-=8),s=i.iodir[n],e===this.io.MODES.INPUT?s|=1<<t:s&=~(1<<t),this.pins[r].mode=e,this.io.i2cWrite(this.address,[n,s]),i.iodir[n]=s}},digitalWrite:{value(t,e){const i=a.get(this),r=t;let n=0,s=0,o=0;t<8?(n=this.REGISTER.IODIRA,o=this.REGISTER.GPIOA):(n=this.REGISTER.IODIRB,o=this.REGISTER.GPIOB,t-=8),s=i.olat[n],e===this.io.HIGH?s|=1<<t:s&=~(1<<t),this.pins[r].report=0,this.pins[r].value=e,this.io.i2cWrite(this.address,[o,s]),i.olat[n]=s,i.gpio[n]=s}},pullUp:{value(t,e){const i=a.get(this);let r=0,n=0,s=0;t<8?(r=this.REGISTER.IODIRA,s=this.REGISTER.GPPUA):(r=this.REGISTER.IODIRB,s=this.REGISTER.GPPUB,t-=8),n=i.gppu[r],e===this.io.HIGH?n|=1<<t:n&=~(1<<t),this.io.i2cWrite(this.address,[s,n]),i.gppu[r]=n}},digitalRead:{value(t,e){const i=t;let r=0;t<8?r=this.REGISTER.GPIOA:(r=this.REGISTER.GPIOB,t-=8),this.pins[i].report=1,this.on("digital-read-"+i,e),this.io.i2cRead(this.address,r,1,e=>{const r=e[0]>>t&1;this.pins[i].value=r,this.emit("digital-read-"+i,r)})}}},MCP23008:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIR:0,GPPU:6,GPIO:9,OLAT:10}},initialize:{value(t){const e=a.get(this);e.iodir=[255],e.olat=[255],e.gpio=[255],e.gppu=[0],this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),this.io.i2cWrite(this.address,[this.REGISTER.IODIR,e.iodir[this.REGISTER.IODIR]]),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<8;t++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(t,this.MODES.OUTPUT),this.digitalWrite(t,this.LOW);this.name="MCP23008",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){const i=a.get(this),r=t,n=this.REGISTER.IODIR;let s=i.iodir[n];e===this.io.MODES.INPUT?s|=1<<t:s&=~(1<<t),this.pins[r].mode=e,this.io.i2cWrite(this.address,[n,s]),i.iodir[n]=s}},digitalWrite:{value(t,e){const i=a.get(this),r=t,n=this.REGISTER.IODIR,s=this.REGISTER.GPIO;let o=i.olat[n];e===this.io.HIGH?o|=1<<t:o&=~(1<<t),this.pins[r].report=0,this.pins[r].value=e,this.io.i2cWrite(this.address,[s,o]),i.olat[n]=o,i.gpio[n]=o}},pullUp:{value(t,e){const i=a.get(this),r=this.REGISTER.IODIR,n=this.REGISTER.GPPU;let s=i.gppu[r];e===this.io.HIGH?s|=1<<t:s&=~(1<<t),this.io.i2cWrite(this.address,[n,s]),i.gppu[r]=s}},digitalRead:{value(t,e){const i=t,r=this.REGISTER.GPIO;this.pins[i].report=1,this.on("digital-read-"+t,e),this.io.i2cRead(this.address,r,1,e=>{const r=e[0]>>t&1;this.pins[i].value=r,this.emit("digital-read-"+t,r)})}}},PCF8574:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(t){const e=a.get(this);e.port=0,e.ddr=0,e.pins=0,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<8;t++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(t,this.MODES.OUTPUT),this.digitalWrite(t,this.LOW);this.name="PCF8574",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){const i=a.get(this),r=t;let n=i.port,s=i.ddr;const o=i.pins;e===this.MODES.INPUT?(s&=~(1<<t),n&=~(1<<t)):(s|=1<<t,n&=~(1<<t)),this.pins[r].mode=e,i.port=n,i.ddr=s,this.io.i2cWrite(this.address,o&~s|n)}},digitalWrite:{value(t,e){const i=a.get(this),r=t;let n=i.port;const s=i.ddr,o=i.pins;e?n|=1<<t:n&=~(1<<t),this.pins[r].report=0,this.pins[r].value=e,i.port=n,this.io.i2cWrite(this.address,o&~s|n)}},digitalRead:{value(t,e){const i=a.get(this),r=t;this.pins[r].report=1,this.on("digital-read-"+t,e),this.io.i2cRead(this.address,1,e=>{const n=e[0],s=n>>t&1;i.pins=n,this.pins[r].value=s,this.emit("digital-read-"+t,s)})}}},PCF8575:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(t){const e=a.get(this);e.port=[0,1],e.gpio=[0,0],this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<16;t++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(t,this.MODES.OUTPUT),this.digitalWrite(t,this.LOW);this.io.i2cWrite(this.address,e.gpio),this.name="PCF8575",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){const i=t;this.pins[i].mode=e}},digitalWrite:{value(t,e){const i=a.get(this),r=t;let n;t<8?n=0:(n=1,t-=8),e===this.io.HIGH?i.gpio[n]|=1<<t:i.gpio[n]&=~(1<<t),this.pins[r].report=0,this.pins[r].value=e,this.io.i2cWrite(this.address,i.gpio)}},digitalRead:{value(t,e){const i=t;let r;t<8?r=0:(r=1,t-=8),this.pins[i].report=1,this.on("digital-read-"+t,e),this.io.i2cRead(this.address,2,e=>{const n=e[r]>>t&1;this.pins[i].value=n,this.emit("digital-read-"+t,n)})}}},PCA9685:{ADDRESSES:{value:[64]},REGISTER:{value:{MODE1:0,PRESCALE:254,BASE:6}},initialize:{value(t){const e=a.get(this);e.frequency=o.constrain(t.frequency||1526,24,1526),this.address=t.address||this.ADDRESSES[0],this.pwmRange=t.pwmRange||[0,4095],Object.defineProperties(this,{prescale:{get:()=>Math.round(25e6/(4096*e.frequency))-1},frequency:{get:()=>e.frequency}}),t.address=this.address,this.io.i2cConfig(t),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,16),this.io.i2cWriteReg(this.address,this.REGISTER.PRESCALE,this.prescale),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),s.micro(5),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,160),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<16;t++)this.pins.push({supportedModes:[this.MODES.OUTPUT,this.MODES.PWM,this.MODES.SERVO],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(t,this.MODES.OUTPUT),this.digitalWrite(t,this.LOW);this.name="PCA9685",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(t){return this.io.name.includes("Tessel 2")?t-1:t}},pinMode:{value(t,e){if(void 0===this.pins[t])throw new RangeError("Invalid PCA9685 pin: "+t);this.pins[t].mode=e}},digitalWrite:{value(t,e){this.pwmWrite(t,e?255:0)}},analogWrite:{value(t,e){this.pwmWrite(t,e)}},servoWrite:{value(t,e){let i;e<544?(e=o.constrain(e,0,180),i=o.map(e,0,180,this.pwmRange[0]/4,this.pwmRange[1]/4)):i=e/4,i|=0,this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*t,0,0,i,i>>8])}},pwmWrite:{value(t,e){if(void 0===this.pins[t])throw new RangeError("Invalid PCA9685 pin: "+t);e=o.constrain(e,0,255);let i=0,r=this.pwmRange[1]*e/255;0===e&&(i=0,r=4096),255===e&&(i=4096,r=0),this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*t,i,i>>8,r,r>>8]),this.pins[t].value=e}}},PCF8591:{ADDRESSES:{value:[72]},REGISTER:{},initialize:{value(t){const e=a.get(this);e.control=69,e.reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<4;t++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:t});this.analogPins.push(0,1,2,3),this.io.i2cWrite(this.address,e.control),this.name="PCF8591",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>"string"==typeof t&&"A"===t[0]?+t.slice(1):t},pinMode:{value(t,e){this.pins[t].mode=e}},analogRead:{value(t,e){const i=a.get(this),r=t;this.pins[r].report=1,this.on("analog-read-"+t,e),i.reading||(i.reading=!0,this.io.i2cRead(this.address,4,t=>{let e;for(let i=0;i<4;i++)e=t[i]<<2,this.pins[i].value=e,this.pins[i].report&&this.emit("analog-read-"+i,e)}))}}},MUXSHIELD2:{initialize:{value(){const t=a.get(this);t.select=[2,4,6,7],t.ios=[null,10,11,12],t.io=[null,14,15,16],t.aio=[null,0,1,2],t.outMode=8,t.pinMap={},t.rowReading=[!1,!1,!1],t.rowMode=[null,null,null],t.rowValues=[0,0,0],Object.assign(this.MODES,{INPUT:0,OUTPUT:1,ANALOG:2}),this.io.pinMode(t.select[0],this.MODES.OUTPUT),this.io.pinMode(t.select[1],this.MODES.OUTPUT),this.io.pinMode(t.select[2],this.MODES.OUTPUT),this.io.pinMode(t.select[3],this.MODES.OUTPUT),this.io.pinMode(t.outMode,this.MODES.OUTPUT),this.io.digitalWrite(t.outMode,this.LOW),this.io.pinMode(t.ios[1],this.MODES.OUTPUT),this.io.pinMode(t.ios[2],this.MODES.OUTPUT),this.io.pinMode(t.ios[3],this.MODES.OUTPUT);let e=1,i=16,r=0;for(let n=0;n<48;n++){(n&i)===i&&(e++,i*=2,r=0),t.pinMap[`IO${e}-${r}`]=n,this.pins.push({row:e,index:r,supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT,this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:n}),this.analogPins.push(n),r++}this.name="MUXSHIELD2",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){const i=a.get(this),r=i.pinMap[t];if(void 0===r)throw new Error("MUXSHIELD2: Invalid Pin number or name: "+t);const n=this.pins[r].row,s=n-1,o=i.rowMode[s];if(o===e)return this;if(null!==o&&o!==e)throw new Error("MUXSHIELD2: Cannot set mixed modes per IO row.");i.rowMode[s]=e;for(let t=0;t<16;t++)this.pins[s+t].mode=e;const l=i.io[n],h=i.ios[n];e===this.MODES.INPUT&&this.io.pinMode(l,this.MODES.INPUT),e===this.MODES.OUTPUT&&(this.io.pinMode(l,this.MODES.OUTPUT),this.io.digitalWrite(h,this.HIGH))}},digitalWrite:{value(t,e){const i=a.get(this),r=i.pinMap[t];if(void 0===r)throw new Error("MUXSHIELD2: Invalid Pin number or name: "+t);const n=this.pins[r].row,s=n-1;let o=i.rowValues[s];const l=r-16*(n-1);e?o|=1<<l:o&=~(1<<l),this.io.digitalWrite(i.select[3],this.LOW),this.io.digitalWrite(i.outMode,this.HIGH);const h=i.select[n-1],c=i.io[n];for(let t=15;t>=0;t--)this.io.digitalWrite(h,this.LOW),this.io.digitalWrite(c,o>>t&1),this.io.digitalWrite(h,this.HIGH);this.io.digitalWrite(i.select[3],this.HIGH),this.io.digitalWrite(i.outMode,this.LOW),this.pins[r].value=e,i.rowValues[s]=o}},digitalRead:{value(t,e){this.ioRead("digital",t,e)}},analogRead:{value(t,e){this.ioRead("analog",t,e)}},ioRead:{value(t,e,i){const r=a.get(this),n=r.pinMap[e];if(void 0===n)throw new Error("MUXSHIELD2: Invalid Pin number or name: "+e);this.on(`${t}-read-${n}`,i);const s="analog"===t,o=this.pins[n].row-1,l=n-16*o;this.pins[n].report=1,this.pins[n].channel=l,this.pins[n].ioPin=s?o:o+14;const h=()=>{for(let t=h.lastPinIndex+1;t<this.pins.length;t++)if(1===this.pins[t].report)return h.lastPinIndex=t,h.lastPinIndex;return h.lastPinIndex=-1,h()};h.lastPinIndex=-1;const c=e=>{const i=h.lastPinIndex,r=this.pins[i];this.emit(`${t}-read-${i}`,e),this.io.removeListener(`${t}-read-${r.ioPin}`,c),setTimeout(u,10)};var u=()=>{const t=h(),e=this.pins[t];this.select(e.channel),s?(this.io.pinMode(e.ioPin,this.io.MODES.ANALOG),this.io.analogRead(e.ioPin,c)):this.io.digitalRead(e.ioPin,c)};r.rowReading[o]||(r.rowReading[o]=!0,u())}},select:{value(t){const e=a.get(this);this.io.digitalWrite(e.outMode,this.LOW),this.io.digitalWrite(e.select[0],1&t),this.io.digitalWrite(e.select[1],(3&t)>>1),this.io.digitalWrite(e.select[2],(7&t)>>2),this.io.digitalWrite(e.select[3],(15&t)>>3)}}},GROVEPI:{ADDRESSES:{value:[4]},REGISTER:{},COMMANDS:{value:{DIGITAL_READ:1,DIGITAL_WRITE:2,ANALOG_READ:3,ANALOG_WRITE:4,PIN_MODE:5,PING_READ:7}},initialize:{value(t){const e=a.get(this);let i;e.isReading=!1,e.pinMap={D2:2,D3:3,D4:4,D5:5,D6:6,D7:7,D8:8,A0:14,A1:15,A2:16},this.isPwm=t=>{const e="number"==typeof t?t:parseInt(t[1]);return 3===e||5===e||6===e},this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<17;t++)i=127,t<=1||t>=9&&t<14?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.isPwm(t)&&this.pins[t].supportedModes.push(this.MODES.PWM),t>=14&&t<=17?(this.pins[t].analogChannel=t-14,this.pins[t].supportedModes.push(this.MODES.ANALOG),this.analogPins.push(t),this.pinMode("A"+this.pins[t].analogChannel,this.MODES.ANALOG)):(this.pinMode("D"+t,this.MODES.OUTPUT),this.digitalWrite("D"+t,this.LOW)));this.name="GROVEPI",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){const i=a.get(this).pinMap[t];e===this.io.MODES.INPUT||e===this.io.MODES.ANALOG?this.pins[i].mode=0:this.pins[i].mode=1,this.io.i2cWrite(this.address,[this.COMMANDS.PIN_MODE,i,this.pins[i].mode,0])}},digitalWrite:{value(t,e){const i=a.get(this).pinMap[t];e=e?1:0,this.io.i2cWrite(this.address,[this.COMMANDS.DIGITAL_WRITE,i,e,0]),this.pins[i].value=e}},ioRead:{value(t,e,i){const r=a.get(this),n=r.pinMap[t],s="analog"===e,o=s?3:1,l=s?this.COMMANDS.ANALOG_READ:this.COMMANDS.DIGITAL_READ;this.on(`${e}-read-${n}`,i),this.pins[n].report=1,this.pins[n].command=l,this.pins[n].type=e,this.pins[n].length=o;const h=()=>{for(let t=h.lastPinIndex+1;t<this.pins.length;t++)if(1===this.pins[t].report)return h.lastPinIndex=t,h.lastPinIndex;return h.lastPinIndex=-1,h()};h.lastPinIndex=-1;const c=(t,e)=>{const i=this.pins[t];let r=!0;"digital"===i.type&&this.pins[t].value===e&&(r=!1),this.pins[t].value=e,r&&this.emit(`${i.type}-read-${t}`,e),setTimeout(u,1)};var u=()=>{const t=h(),e=this.pins[t],i="analog"===e.type;this.io.i2cWrite(this.address,[e.command,t,0,0]),this.io.i2cReadOnce(this.address,e.length,e=>{let r;r=i?(e[1]<<8)+e[2]:e[0],c(t,r)})};r.isReading||(r.isReading=!0,u())}},digitalRead:{value(t,e){this.ioRead(t,"digital",e)}},analogRead:{value(t,e){this.ioRead(t,"analog",e)}},pingRead:{value({pin:t},e){const i=a.get(this).pinMap[t];this.io.i2cWrite(this.address,[this.COMMANDS.PING_READ,i,0,0]),setTimeout(()=>{this.once("ping-read-"+t,e),this.io.i2cReadOnce(this.address,3,e=>{const r=Math.round(29*((e[1]<<8)+e[2])*2);this.pins[i].value=r,this.emit("ping-read-"+t,r)})},200)}},analogWrite:{value(t,e){this.pwmWrite(t,e)}},pwmWrite:{writable:!0,value(t,e){const i=a.get(this).pinMap[t];e=o.constrain(e,0,255),this.io.i2cWrite(this.address,[this.COMMANDS.ANALOG_WRITE,i,e,0]),this.pins[i].value=e}}},"74HC595":{initialize:{value({pins:t}){const e=a.get(this);if(!t.data)throw new Error("Expected pins.data");if(!t.clock)throw new Error("Expected pins.clock");if(!t.latch)throw new Error("Expected pins.latch");e.data=t.data,e.clock=t.clock,e.latch=t.latch,e.value=0,Object.assign(this.MODES,this.io.MODES),this.pins=[];for(let t=0;t<8;t++)this.pins.push({supportedModes:[this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127});this.portWrite(0,e.value),this.name="74HC595",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>t},pinMode:{value(t,e){this.pins[t].mode=e}},digitalWrite:{value(t,e){const i=a.get(this);e?i.value|=1<<t:i.value&=~(1<<t),this.pins[t].value=e,this.portWrite(0,i.value)}},portWrite:{writable:!0,configurable:!0,value(t,e){const i=a.get(this);i.value=e,this.board.digitalWrite(i.latch,this.io.LOW),this.board.shiftOut(i.data,i.clock,!0,i.value),this.board.digitalWrite(i.latch,this.io.HIGH);for(let t=0;t<8;t++)this.pins[t].value=i.value>>t&1}}},CD74HC4067:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{},initialize:{value(t){a.get(this).reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<16;t++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:t}),this.analogPins.push(t);this.name="CD74HC4067",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>"string"==typeof t&&"A"===t[0]?+t.slice(1):t},pinMode:{value(t,e){this.pins[t].mode=e}},analogRead:{value(t,e){const i=a.get(this),r=t;this.pins[r].report=1,this.on("analog-read-"+t,e),this.io.i2cWrite(this.address,r,1),i.reading||(i.reading=!0,this.io.i2cRead(this.address,32,t=>{let e;for(let i=0;i<16;i++){const r=2*i;e=(t[r]<<8)+t[r+1],this.pins[i].value=e,this.pins[i].report&&this.emit("analog-read-"+i,e)}}))}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_ADC1_L:8,OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31}},initialize:{value(t){a.get(this).reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t);let e=7;e=-241&e|112,this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG1,e),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG4,136),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG3,16),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<4;t++)0===t?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:t}),this.analogPins.push(t));this.name="LIS3DH",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>"string"==typeof t&&"A"===t[0]?+t.slice(1):t},pinMode:{value(t,e){this.pins[t].mode=e}},analogRead:{value(t,e){const i=a.get(this),r=t;this.pins[r].report=1,this.on("analog-read-"+t,e),i.reading||(i.reading=!0,this.io.i2cWrite(this.address,this.REGISTER.TEMP_CFG_REG,128),this.io.i2cRead(this.address,128|this.REGISTER.OUT_ADC1_L,6,t=>{this.pins[1].value=o.scale(o.int16(t[1],t[0]),-32512,32512,1023,0),this.pins[2].value=o.scale(o.int16(t[3],t[2]),-32512,32512,1023,0),this.pins[3].value=o.scale(o.int16(t[5],t[4]),-32512,32512,1023,0);for(let t=1;t<4;t++)this.pins[t].report&&this.emit("analog-read-"+t,this.pins[t].value)}))}},i2cConfig:{value(...t){return this.io.i2cConfig.apply(this.io,t)}},i2cWrite:{value(...t){return this.io.i2cWrite.apply(this.io,t)}},i2cWriteReg:{value(...t){return this.io.i2cWriteReg.apply(this.io,t)}},i2cRead:{value(...t){return this.io.i2cRead.apply(this.io,t)}},i2cReadOnce:{value(...t){return this.io.i2cReadOnce.apply(this.io,t)}}},ADS1115:{ADDRESSES:{value:[72,73,74,75]},REGISTER:{value:{CONFIG:1,READ:0,PIN:[193,209,225,241],PIN_DATA:131}},initialize:{value(t){a.get(this).reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(let t=0;t<4;t++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:t}),this.analogPins.push(t);this.name="ADS1115",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:t=>"string"==typeof t&&"A"===t[0]?+t.slice(1):t},pinMode:{value(t,e){this.pins[t].mode=e}},analogRead:{value(t,e){const i=a.get(this);this.pins[t].report=1;let r=!1;if(this.on("analog-read-"+t,e),!i.reading){i.reading=!0;const e=()=>{setTimeout(()=>{r=!0},8)};this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[t],this.REGISTER.PIN_DATA]),e(),this.io.i2cRead(this.address,this.REGISTER.READ,2,i=>{if(r){r=!1;const n=t===this.pins.length-1?0:t+1;this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[n],this.REGISTER.PIN_DATA]);const s=(i[0]<<8)+i[1];this.pins[t].value=s,this.pins[t].report&&this.emit("analog-read-"+t,s),t=n,e()}})}}}}};c.CD74HCT4067=c.CD74HC4067,c["74HC4067"]=c.CD74HC4067,c.PCF8574A=Object.assign({},c.PCF8574,{ADDRESSES:{value:[56]}});const u=Object.keys(r.prototype);Object.keys(c).forEach(t=>{u.forEach(e=>{void 0===c[t][e]&&(c[t][e]={writable:!0,configurable:!0,value(){throw new Error(`Expander:${t} does not support ${e}`)}})})});const d=["74HC595"];class p extends h{constructor(t){super();let e,i="Expander cannot reuse an active address",n=null;if("string"==typeof t&&(e=t),r.Component.call(this,t=r.Options(t),{normalizePin:!1,requestPin:!1}),d.includes(t.controller)&&void 0===this.address&&(this.address=o.uid()),n=l.get(this.address),n)throw this.bus&&void 0!==n.bus&&n.bus===this.bus&&(i+=" on this bus"),new Error(i);void 0===t.controller&&e&&(t.controller=e),r.Controller.call(this,c,t),a.set(this,{}),"function"==typeof this.initialize&&this.initialize(t),l.set(this.address,this)}}p.get=t=>{if(!t.address||!t.controller)throw new Error("Expander.get(...) requires an address and controller");if(void 0!==t.address&&(t.address=Number(t.address)),Number.isNaN(t.address))throw new Error("Expander.get(...) expects address to be a number");if("string"!=typeof t.controller)throw new Error("Expander.get(...) expects controller name to be a string");const e=l.get(t.address);return e&&e.name===t.controller.toUpperCase()?e:new p(t)},p.byAddress=t=>l.get(t),p.byController=t=>{let e=null;return l.forEach(i=>{i.name===t.toUpperCase()&&(e=i)}),e},p.hasController=t=>void 0!==c[t],e.env.IS_TEST_MODE&&(p.Controllers=c,p.purge=()=>{a.clear(),l.clear()}),t.exports=p}).call(this,i(1))},function(t,e,i){"use strict";var r=i(16),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var s=Object.create(i(14));s.inherits=i(11);var o=i(48),a=i(25);s.inherits(u,o);for(var l=n(a.prototype),h=0;h<l.length;h++){var c=l[h];u.prototype[c]||(u.prototype[c]=a.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,i){(function(e){const r=i(2),n=i(77),{cloneDeep:s,constrain:o}=i(4);let a;class l extends r{constructor(t){super(),a||(a=i(78)),Object.assign(this,new l.Segment),this.defaultTarget=t||{}}enqueue(t={}){return void 0===t.target&&(t.target=this.defaultTarget),this.segments.push(t),this.paused||this.isRunning||this.next(),this}next(){return this.isRunning||(this.isRunning=!0,this.segments.length>0?(Object.assign(this,new l.Segment(this.segments.shift())),this.paused=0===this.currentSpeed,this.onstart&&this.onstart(),this.normalizeKeyframes(),this.reverse&&(this.currentSpeed*=-1),0!==this.currentSpeed?this.play():this.paused=!0):this.playLoop.stop()),this}pause(){this.emit("animation:pause"),this.playLoop&&this.playLoop.stop(),this.paused=!0,this.onpause&&this.onpause()}stop(){this.emit("animation:stop"),this.segments=[],this.isRunning=!1,this.playLoop&&this.playLoop.stop(),this.onstop&&this.onstop()}speed(t){return void 0===t?this.currentSpeed:(this.currentSpeed=t,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.paused||this.play(),this)}loopFunction({calledAt:t}){const i=this.calculateProgress(t),r=this.findIndices(i);this.target[l.render](this.tweenedValue(r,i)),t>this.fallBackTime&&(this.fallBackTime=1/0,this.playLoop&&this.playLoop.stop(),this.playLoop=new l.TemporalFallback(this)),(1===this.progress&&!this.reverse||i===this.loopback&&this.reverse)&&(this.loop||this.metronomic&&!this.reverse?(this.onloop&&this.onloop(),this.metronomic&&(this.reverse=!this.reverse),this.normalizeKeyframes(),this.progress=this.loopback,this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration):(this.isRunning=!1,this.oncomplete&&e.nextTick(()=>this.oncomplete()),this.segments.length>0?e.nextTick(()=>this.next()):this.stop()))}play(){const t=Date.now();this.playLoop&&this.playLoop.stop(),this.paused=!1,this.isRunning=!0,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=t-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.fallBackTime=t+5e3,this.frameCount=0,this.fps&&(this.rate=1e3/this.fps),this.rate=0|this.rate,this.playLoop=a.loop(this.rate,t=>this.loopFunction(t))}findIndices(t){const e={left:null,right:null};return e.right=this.cuePoints.findIndex(e=>e>=t),e.left=0===e.right?0:e.right-1,e}calculateProgress(t){let e=(t-this.startTime)/this.scaledDuration;return e>1&&(e=1),this.progress=e,this.reverse&&(e=1-e),o(n[this.easing](e),0,1)}tweenedValue(t,e){const i={duration:null,progress:null};return this.normalizedKeyFrames.map(r=>{const s={left:null,right:null};for(s.left=t.left;s.left>-1&&null===r[s.left];s.left--);s.right=r.findIndex((e,i)=>i>=t.right&&null!==e),i.duration=this.cuePoints[s.right]-this.cuePoints[s.left],i.progress=(e-this.cuePoints[s.left])/i.duration,Number.isFinite(i.progress)||(i.progress=this.reverse?0:1);const o=r[s.left],a=r[s.right];let h;return i.progress=n[a.easing](i.progress),h=a.position?a.position.map((t,e)=>(t-o.position[e])*i.progress+o.position[e]):"number"==typeof a.value&&"number"==typeof o.value?(a.value-o.value)*i.progress+o.value:this.target[l.keys].reduce((t,e)=>(t[e]=(a.value[e]-o.value[e])*i.progress+o.value[e],t),{}),h})}normalizeKeyframes(){let t,e=s(this.keyFrames);const i=this.cuePoints;return e=this.target[l.normalize](e),Array.isArray(e[0])||(e=[e]),e.forEach((function(e){for(let t=e.length;t<i.length;t++)e.push(null);e.forEach((e,i,r)=>{null!==e?("object"!=typeof e&&(e={step:e,easing:"linear"}),void 0!==e.step&&(e.value=!1===e.step?t:t+e.step),e.easing||(e.easing="linear"),void 0!==e.copyValue&&(e.value=r[e.copyValue].value),e.copyFrame&&(e=r[e.copyFrame]),t=e.value):e=i===r.length-1?{value:t,easing:"linear"}:null,r[i]=e},this)})),this.normalizedKeyFrames=e,this}}l.keys="@@keys",l.normalize="@@normalize",l.render="@@render",l.TemporalFallback=class{constructor(t){this.interval=setInterval(()=>{t.loopFunction({calledAt:Date.now()})},t.rate)}stop(){this.interval&&clearInterval(this.interval)}},l.Segment=class{constructor(t){this.cuePoints=[0,1],this.duration=1e3,this.easing="linear",this.loop=!1,this.loopback=0,this.metronomic=!1,this.currentSpeed=1,this.progress=0,this.fps=60,this.rate=1e3/60,this.paused=!1,this.isRunning=!1,this.segments=[],this.onstart=null,this.onpause=null,this.onstop=null,this.oncomplete=null,this.onloop=null,t&&(Object.assign(this,t),t.segments&&(this.segments=t.segments.slice()))}},t.exports=l}).call(this,i(1))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},function(t,e,i){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},r=0;r<e.length;r++)i[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return i},n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,s=r.length,o=String(t).replace(n,(function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}})),l=r[i];i<s;l=r[++i])g(l)||!R(l)?o+=" "+l:o+=" "+a(l);return o},e.deprecate=function(i,r){if(void 0!==t&&!0===t.noDeprecation)return i;if(void 0===t)return function(){return e.deprecate(i,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),n=!0}return i.apply(this,arguments)}};var s,o={};function a(t,i){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(i)?r.showHidden=i:i&&e._extend(r,i),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),c(r,t,r.depth)}function l(t,e){var i=a.styles[e];return i?"["+a.colors[i][0]+"m"+t+"["+a.colors[i][1]+"m":t}function h(t,e){return t}function c(t,i,r){if(t.customInspect&&i&&T(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var n=i.inspect(r,t);return m(n)||(n=c(t,n,r)),n}var s=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(m(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(E(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,i);if(s)return s;var o=Object.keys(i),a=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(i)),S(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(i);if(0===o.length){if(T(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(y(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(b(i))return t.stylize(Date.prototype.toString.call(i),"date");if(S(i))return u(i)}var h,R="",O=!1,_=["{","}"];(p(i)&&(O=!0,_=["[","]"]),T(i))&&(R=" [Function"+(i.name?": "+i.name:"")+"]");return y(i)&&(R=" "+RegExp.prototype.toString.call(i)),b(i)&&(R=" "+Date.prototype.toUTCString.call(i)),S(i)&&(R=" "+u(i)),0!==o.length||O&&0!=i.length?r<0?y(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),h=O?function(t,e,i,r,n){for(var s=[],o=0,a=e.length;o<a;++o)I(e,String(o))?s.push(d(t,e,i,r,String(o),!0)):s.push("");return n.forEach((function(n){n.match(/^\d+$/)||s.push(d(t,e,i,r,n,!0))})),s}(t,i,r,a,o):o.map((function(e){return d(t,i,r,a,e,O)})),t.seen.pop(),function(t,e,i){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(h,R,_)):_[0]+R+_[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,i,r,n,s){var o,a,l;if((l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),I(r,n)||(o="["+n+"]"),a||(t.seen.indexOf(l.value)<0?(a=g(i)?c(t,l.value,null):c(t,l.value,i-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(o)){if(s&&n.match(/^\d+$/))return a;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function p(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function g(t){return null===t}function E(t){return"number"==typeof t}function m(t){return"string"==typeof t}function v(t){return void 0===t}function y(t){return R(t)&&"[object RegExp]"===O(t)}function R(t){return"object"==typeof t&&null!==t}function b(t){return R(t)&&"[object Date]"===O(t)}function S(t){return R(t)&&("[object Error]"===O(t)||t instanceof Error)}function T(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function _(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(i){if(v(s)&&(s=t.env.NODE_DEBUG||""),i=i.toUpperCase(),!o[i])if(new RegExp("\\b"+i+"\\b","i").test(s)){var r=t.pid;o[i]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",i,r,t)}}else o[i]=function(){};return o[i]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=f,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=E,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=y,e.isObject=R,e.isDate=b,e.isError=S,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(71);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(){var t=new Date,e=[_(t.getHours()),_(t.getMinutes()),_(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",w(),e.format.apply(e,arguments))},e.inherits=i(72),e._extend=function(t,e){if(!e||!R(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(M&&t[M]){var e;if("function"!=typeof(e=t[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,r=new Promise((function(t,r){e=t,i=r})),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push((function(t,r){t?i(t):e(r)}));try{t.apply(this,n)}catch(t){i(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),M&&Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=M,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);var n=i.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return n.apply(s,arguments)};e.apply(this,i).then((function(e){t.nextTick(o,null,e)}),(function(e){t.nextTick(C,e,o)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.defineProperties(i,r(e)),i}}).call(this,i(1))},function(t,e,i){const r=i(2);let n;class s{constructor(t){this.address=t.address,this.io=t.io,this.io.i2cConfig(t)}read(t,e,i){t?this.io.i2cRead(this.address,t,e,i):this.io.i2cRead(this.address,e,i)}write(t,e){Array.isArray(e)||(e=[e]),this.io.i2cWrite(this.address,t,e)}}class o extends r{constructor({io:t}){if(super(),n)return n;this.bank={a:new s({address:o.BANK_A,io:t}),b:new s({address:o.BANK_B,io:t})},n=this}setup({bank:t,mode:e},i){this.bank[t].write(e,[i])}read(t,e,i,r){t.sensor&&t.offset&&!o.isRawSensor(t)&&(e+=t.offset),this.bank[t.bank].read(e,i,r)}write({bank:t},e,i){this.bank[t].write(e,i)}}o.shieldPort=t=>{const e=o[t];if(void 0===e)throw new Error("Invalid EVShield pin name");let i,r,n,s,a,l,h,c=!1;return t.startsWith("BA")?(i=o.BANK_A,n="a"):(i=o.BANK_B,n="b"),t.includes("M")&&(s=t.endsWith("M1")?o.S1:o.S2),t.includes("S")&&(c=t.endsWith("S1"),r=c?o.S1_ANALOG:o.S2_ANALOG,a=c?o.S1_MODE:o.S2_MODE,l=c?o.S1_OFFSET:o.S2_OFFSET,h=c?o.S1:o.S2),{address:i,analog:r,bank:n,mode:a,motor:s,offset:l,port:e,sensor:h}},o.isRawSensor=({analog:t})=>t===o.S1_ANALOG||t===o.S2_ANALOG,o.BAS1=1,o.BAS2=2,o.BBS1=3,o.BBS2=4,o.BAM1=5,o.BAM2=6,o.BBM1=7,o.BBM2=8,o.BANK_A=26,o.BANK_B=27,o.S1=1,o.S2=2,o.M1=1,o.M2=2,o.MM=3,o.Type_NONE=0,o.Type_SWITCH=1,o.Type_ANALOG=2,o.Type_I2C=9,o.Type_NXT_LIGHT_REFLECTED=3,o.Type_NXT_LIGHT=4,o.Type_NXT_COLOR=13,o.Type_NXT_COLOR_RGBRAW=4,o.Type_NXT_COLORRED=14,o.Type_NXT_COLORGREEN=15,o.Type_NXT_COLORBLUE=16,o.Type_NXT_COLORNONE=17,o.Type_DATABIT0_HIGH=64,o.S1_MODE=111,o.S1_ANALOG=112,o.S1_OFFSET=0,o.S2_MODE=163,o.S2_ANALOG=164,o.S2_OFFSET=52,o.Type_EV3_LIGHT_REFLECTED=0,o.Type_EV3_LIGHT=1,o.Type_EV3_COLOR=2,o.Type_EV3_COLOR_REFRAW=3,o.Type_EV3_COLOR_RGBRAW=4,o.Type_EV3_TOUCH=18,o.Type_EV3=19,o.Light=131,o.Bump=132,o.ColorMeasure=131,o.Proximity=131,o.Touch=131,o.Ultrasonic=129,o.Mode=129,o.Light_Bytes=2,o.Analog_Bytes=2,o.Bump_Bytes=1,o.ColorMeasure_Bytes=2,o.Proximity_Bytes=2,o.Touch_Bytes=1,o.Motor_1=1,o.Motor_2=2,o.Motor_Both=3,o.Motor_Next_Action_Float=0,o.Motor_Next_Action_Brake=1,o.Motor_Next_Action_BrakeHold=2,o.Motor_Stop=96,o.Motor_Reset=82,o.Motor_Reverse=0,o.Motor_Forward=1,o.Motor_Move_Absolute=0,o.Motor_Move_Relative=1,o.Motor_Completion_Dont_Wait=0,o.Motor_Completion_Wait_For=1,o.Speed_Full=90,o.Speed_Medium=60,o.Speed_Slow=25,o.CONTROL_SPEED=1,o.CONTROL_RAMP=2,o.CONTROL_RELATIVE=4,o.CONTROL_TACHO=8,o.CONTROL_BRK=16,o.CONTROL_ON=32,o.CONTROL_TIME=64,o.CONTROL_GO=128,o.STATUS_SPEED=1,o.STATUS_RAMP=2,o.STATUS_MOVING=4,o.STATUS_TACHO=8,o.STATUS_BREAK=16,o.STATUS_OVERLOAD=32,o.STATUS_TIME=64,o.STATUS_STALL=128,o.COMMAND=65,o.VOLTAGE=110,o.SETPT_M1=66,o.SPEED_M1=70,o.TIME_M1=71,o.CMD_B_M1=72,o.CMD_A_M1=73,o.SETPT_M2=74,o.SPEED_M2=78,o.TIME_M2=79,o.CMD_B_M2=80,o.CMD_A_M2=81,o.POSITION_M1=82,o.POSITION_M2=86,o.STATUS_M1=90,o.STATUS_M2=91,o.TASKS_M1=92,o.TASKS_M2=93,o.ENCODER_PID=94,o.SPEED_PID=100,o.PASS_COUNT=106,o.TOLERANCE=107,o.BTN_PRESS=218,o.RGB_LED=215,o.CENTER_RGB_LED=222,t.exports=o},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(7).Buffer)},function(t,e,i){const r=i(2);t.exports=class extends r{constructor(){super()}within(t,e,i){let r;if("number"==typeof t&&(r=t,t=[0,r]),!Array.isArray(t))throw new Error("within expected a range array");return"function"==typeof e&&(i=e,e="value"),void 0===this[e]||this.on("data",()=>{const r=this[e];r>=t[0]&&r<=t[1]&&i.call(this,null,r)}),this}}},function(t,e,i){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,r,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,i)}));case 3:return e.nextTick((function(){t.call(null,i,r)}));case 4:return e.nextTick((function(){t.call(null,i,r,n)}));default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return e.nextTick((function(){t.apply(null,s)}))}}}:t.exports=e}).call(this,i(1))},function(t,e,i){var r=i(7),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),s(n,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){t.exports=function(){}},function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(5),o=new Map,a={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4};class l extends n{constructor(t){if(super(),void 0===t||"object"==typeof t&&void 0===t.addr&&void 0===t.pin)throw new Error("Pins must have a pin number");const e="object"==typeof t?t.addr||t.pin||0:t;let i=l.isAnalog(t),n=!1;r.Component.call(this,t=r.Options(t)),t.addr=t.addr||t.pin,this.io.analogPins.includes(e)&&(i=!1,n=!0);const s=n?e:"object"!=typeof t?t:t.addr,a=t.type||(i?"analog":"digital"),c={mode:null,last:null,value:0};o.set(this,c),Object.defineProperties(this,{type:{get:()=>a},addr:{get:()=>s},value:{get:()=>c.value},mode:{set(t){o.get(this).mode=t,this.io.pinMode(this.addr,t)},get(){return o.get(this).mode}}}),this.mode=void 0!==t.as?t.as:void 0!==t.mode?t.mode:i?2:1,this.freq=void 0!==t.freq?t.freq:20,0!==this.mode&&2!==this.mode||h(this),"digital"===a&&Object.defineProperties(this,{isHigh:{get:()=>!!c.value},isLow:{get:()=>!c.value}})}query(t){let e=this.addr;return"analog"===this.type&&(e=this.io.analogPins[this.addr]),this.io.queryPinState(e,()=>t(this.io.pins[e])),this}high(){const t="analog"===this.type?this.board.RESOLUTION.PWM:1;return l.write(this,t),this.emit("high"),this}low(){return l.write(this,0),this.emit("low"),this}}function h(t){const e=o.get(t);t.io[t.type+"Read"](t.addr,t=>e.value=t),setInterval(()=>{let i,r;i=e.value?"low":"high",r=e.value?"high":"low",e.mode===a.INPUT&&(null===e.last&&(e.last=i),e.last===i&&(e.last=r,t.emit(r,e.value),t.emit("change",e.value))),t.emit("data",e.value)},t.freq)}Object.entries(a).forEach(([t,e])=>{Object.defineProperty(l,t,{value:e})}),l.isAnalog=t=>!("string"!=typeof t||!l.isPrefixed(t,["I","A"]))||("object"==typeof t?l.isAnalog(void 0!==t.addr?t.addr:t.pin):void 0),l.isPrefixed=(t,e)=>(t=t[0],e.reduce((e,i)=>e||i===t,!1)),l.write=(t,e)=>{o.get(t).value=e,t.mode=a.OUTPUT,t.io[t.type+"Write"](t.addr,e),t.emit("write",null,e)},l.read=(t,e)=>{let i=!1;"digital"===t.type&&0!==t.mode&&(i=!0,t.mode=a.INPUT),"analog"===t.type&&2!==t.mode&&(i=!0,t.mode=a.ANALOG),i&&h(t),t.on("data",()=>{e.call(t,null,t.value)})},["read","write"].forEach(t=>{l.prototype[t]=function(e){return l[t](this,e),this}});class c extends s.Emitter{constructor(t){super(t)}get type(){return l}}s.installMethodForwarding(c.prototype,l.prototype),l.Collection=c,e.env.IS_TEST_MODE&&(l.purge=()=>{o.clear()}),t.exports=l}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(10),s=i(8),o=i(87),{constrain:a,map:l}=i(4),h=new Map,c={DEFAULT:{initialize:{value({pins:t,debug:e}){u.colors.forEach((i,n)=>{const s=t[n];e&&!this.board.pins.isPwm(s)&&r.Pins.Error({pin:s,type:"PWM",via:"Led.RGB"}),this.io.pinMode(s,this.io.MODES.PWM),this.pins[n]=s})}},write:{writable:!0,value(t){const e=h.get(this);u.colors.forEach((i,r)=>{const n=this.pins[r];let s=t[i];e.isAnode&&(s=255-a(s,0,255)),s=l(s,0,255,0,this.board.RESOLUTION.PWM),this.io.analogWrite(n,s)})}}},PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i,pins:r}){const n=h.get(this);this.address=t||64,this.pwmRange=e||[0,4095],this.frequency=i||200,n.expander=s.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),u.colors.forEach((t,e)=>{this.pins[e]=n.expander.normalize(r[e]),n.expander.analogWrite(this.pins[e],0)})}},write:{writable:!0,value(t){const e=h.get(this);u.colors.forEach((i,r)=>{const n=this.pins[r];let s=t[i];e.isAnode&&(s=255-a(s,0,255)),e.expander.analogWrite(n,s)})}}},BLINKM:{REGISTER:{value:{GO_TO_RGB_COLOR_NOW:110,STOP_SCRIPT:111}},initialize:{value(t){this.address=t.address||9,t.address=this.address,this.board.Drivers[this.address]||(this.io.i2cConfig(t),this.board.Drivers[this.address]={initialized:!1},this.io.i2cWrite(this.address,[this.REGISTER.STOP_SCRIPT]),this.board.Drivers[this.address].initialized=!0)}},write:{writable:!0,value({red:t,green:e,blue:i}){this.io.i2cWrite(this.address,[this.REGISTER.GO_TO_RGB_COLOR_NOW,t,e,i])}}}};c.ESPLORA={initialize:{value(t){t.pins=[5,10,9],this.pins=[],c.DEFAULT.initialize.value.call(this,t)}},write:c.DEFAULT.write};class u{constructor(t){Array.isArray(t)?t={pins:t}:"object"!=typeof t.pins||Array.isArray(t.pins)||(t.pins=[t.pins.red,t.pins.green,t.pins.blue]),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,c,t);const e={red:255,green:255,blue:255,intensity:100,isAnode:t.isAnode||!1,interval:null,values:{red:255,green:255,blue:255}};h.set(this,e),Object.defineProperties(this,{isOn:{get:()=>u.colors.some(t=>e[t]>0)},isRunning:{get:()=>!!e.interval},isAnode:{get:()=>e.isAnode},values:{get:()=>Object.assign({},e.values)},update:{value(t){const e=h.get(this);t=t||this.color(),e.values=u.ToScaledRGB(e.intensity,t),this.write(e.values),Object.assign(e,t)}}}),this.initialize(t),this.off()}color(t,e,i){const r=h.get(this);let n;if(0===arguments.length)return n=this.isOn?r:r.prev,u.colors.reduce((t,e)=>(t[e]=Math.round(n[e]),t),{});const s=u.ToRGB(t,e,i);return u.colors.forEach(t=>{let e=s[t];if(null==e)throw new Error(`Led.RGB.color: invalid color ([${[s.red,s.green,s.blue].join(",")}])`);e=a(e,0,255),s[t]=e}),this.update(s),this}on(){const t=h.get(this);let e;return this.isOn||(e=t.prev||{red:255,green:255,blue:255},t.prev=null,this.update(e)),this}off(){const t=h.get(this);return this.isOn&&(t.prev=u.colors.reduce((e,i)=>(e[i]=t[i],e),{}),this.update({red:0,green:0,blue:0})),this}blink(t,e){const i=h.get(this);return this.stop(),"function"==typeof t&&(e=t,t=null),i.interval=setInterval(()=>{this.toggle(),"function"==typeof e&&e()},t||100),this}toggle(){return this[this.isOn?"off":"on"]()}stop(){const t=h.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,this}intensity(t){const e=h.get(this);return 0===arguments.length?e.intensity:(e.intensity=a(t,0,100),this.update(),this)}[n.normalize](t){const e=h.get(this);return null===t[0]&&(t[0]=e.values),t.reduce((t,i)=>{const r=i;let n={},s=null,o=e.intensity;if(null!==i){if("number"==typeof r)throw new Error("RGB LEDs expect a complete keyFrame object or hexadecimal string value");"string"==typeof r&&(s=r),Array.isArray(r)?s=r:"object"==typeof r&&(s=void 0!==r.color?r.color:r),"number"==typeof i.intensity&&(o=i.intensity,delete i.intensity),n.easing=i.easing||"linear",n.value=u.ToScaledRGB(o,u.ToRGB(s))}else n=i;return t.push(n),t},[])}[n.render](t){return this.color(t[0])}}function d(t){return"string"==typeof t&&t.endsWith("%")}u.prototype[n.keys]=u.colors,u.colors=["red","green","blue"],u.ToScaledRGB=(t,e)=>{const i=t/100;return u.colors.reduce((t,r)=>(t[r]=Math.round(e[r]*i),t),{})},u.ToRGB=(t,e,i)=>{let r,n={},s=0;if(void 0!==t&&(s|=4),void 0!==e&&(s|=2),void 0!==i&&(s|=1),4==(4|s)){if(r=t,null==r)throw new Error(`Invalid color (${r})`);if(Array.isArray(r))n={red:r[0],green:r[1],blue:r[2]};else if("object"==typeof r)n={red:r.red,green:r.green,blue:r.blue};else if("string"==typeof r)if(/^#?[0-9A-Fa-f]{6}$/.test(r))7===r.length&&"#"===r[0]&&(r=r.slice(1)),n={red:parseInt(r.slice(0,2),16),green:parseInt(r.slice(2,4),16),blue:parseInt(r.slice(4,6),16)};else{if(!/^rgb/.test(r))return u.ToRGB(o.keyword.rgb(r.toLowerCase()));{const t=r.match(/^rgba?\(([^)]+)\)$/)[1].split(/[\s,]+/);d(t[0])&&t.forEach((e,i)=>{i<=2&&(t[i]=Math.round(parseInt(e,10)/100*255))}),n={red:parseInt(t[0],10),green:parseInt(t[1],10),blue:parseInt(t[2],10)},t.length>3&&(d(t[3])&&(t[3]=parseInt(t[3],10)/100),n=u.ToScaledRGB(100*parseFloat(t[3]),n))}}}else n={red:t,green:e,blue:i};return n},u.prototype.strobe=u.prototype.blink,e.env.IS_TEST_MODE&&(u.Controllers=c,u.purge=()=>{h.clear()}),t.exports=u}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(93),s=new Map;class o{constructor(t){r.Component.call(this,t=r.Options(t)),r.Controller.call(this,l,t),this.digitOrder=1,this.isMatrix||(this.colon=t.colon||!1);const e=t.devices||(t.addresses?t.addresses.length:1);this.memory=Array(64).fill(0),t.dims=t.dims||o.MATRIX_DIMENSIONS["8x8"],"string"==typeof t.dims&&(t.dims=o.MATRIX_DIMENSIONS[t.dims]),Array.isArray(t.dims)&&(t.dims={rows:t.dims[0],columns:t.dims[1]});const i={devices:e,digits:t.digits||8,isMatrix:!!t.isMatrix,isBicolor:!!t.isBicolor,rows:t.dims.rows,columns:t.dims.columns};if(8!==i.columns&&16!==i.columns||8!==i.rows&&16!==i.rows||i.columns+i.rows===32)throw new Error("Invalid matrix dimensions specified: must be 8x8, 16x8 or 8x16");Object.defineProperties(this,{devices:{get:()=>i.devices},digits:{get:()=>i.digits},isMatrix:{get:()=>i.isMatrix},isBicolor:{get:()=>i.isBicolor},rows:{get:()=>i.rows},columns:{get:()=>i.columns}}),s.set(this,i),this.initialize(t)}each(t){for(let e=0;e<this.devices;e++)t.call(this,e)}on(t){return void 0===t?this.each((function(t){this.on(t)})):this.send(t,this.OP.SHUTDOWN||o.OP.SHUTDOWN,1),this}off(t){return void 0===t?this.each((function(t){this.off(t)})):this.send(t,this.OP.SHUTDOWN||o.OP.SHUTDOWN,0),this}digit(t,e,i){let r,n,s,a,l,h=!1;return arguments.length<3?(r=Array.from(arguments),this.each((function(t){this.digit.apply(this,(r.unshift(t),r))})),this):this.isMatrix?(this.draw.apply(this,arguments),this):(n=t*this.digits,a=String(i),s=e=Number(e),-1===this.digitOrder&&(s=this.digits-s-1),2===a.length&&"."===a[1]&&(h=!0,a=a[0]),l=o.DIGIT_CHARS[a],l||(l=Math.abs(Number(a))),h&&(l|=o.DIGIT_CHARS["."]),this.memory[n+s]=l,this.sendDigit(t,s,l),this)}print(t,e){let i;if(e=e||{device:0},this.isMatrix)throw new Error("Led.Matrix does not yet support the print method");return"string"!=typeof t&&(t=String(t)),i=t.match(/([0-9A-Za-z][.]|[0-9A-Za-z:]|[\s])/g),this.colon&&i.length>2&&":"!==i[2]&&" "!==i[2]&&i.splice(2,0," "),(i||[]).forEach((function(t,i){this.digit(e.device,i,t)}),this),this}brightness(t,e){return 1===arguments.length?(e=t,this.each((function(t){this.brightness(t,e)}))):this.send(t,this.OP.BRIGHTNESS||o.OP.BRIGHTNESS,r.map(e,0,100,0,15)),this}column(t,e,i){let r;if(!this.isMatrix)throw new Error("The `column` method is only supported for Matrix devices");if(2===arguments.length)i=e,e=t,this.each((function(t){this.column(t,e,i)}));else for(let n=0;n<this.rows;n++)r=i>>this.rows-1-n,r&=1,this.led(t,n,e,r);return this}draw(t,e){let i;if(1===arguments.length)e=t,this.each((function(t){this.draw(t,e)}));else if(this.isMatrix){if(i=Array.isArray(e)?e:n.MATRIX_CHARS[e],void 0!==i){if(i.length!==this.rows&&i.length!==this.columns)throw new Error("Invalid character: "+i);const e=i.length;for(let t=0;t<this.rows-e;t++)i.push(0);i.forEach((function(e,i){this.row(t,i,e)}),this)}}else this.digit.apply(this,arguments);return this}device(t){const e={};return Object.keys(o.prototype).forEach(i=>{e[i]=this[i].bind(this,t)}),Object.getOwnPropertyNames(this).forEach(i=>{this[i]&&"function"==typeof this[i]&&(e[i]=this[i].bind(this,t))}),e}}let a=new Set([112,113,114,115,116,117,118,119]);const l={HT16K33:{OP:{value:{SHUTDOWN:32,BRIGHTNESS:224,BLINK:128}},initialize:{writable:!0,value(t){const e=s.get(this),i=Array.from(a);if(0===i.length)throw new Error("There are no available HT16K33 controller addresses");this.addresses=t.addresses||(t.address?[t.address]:null),null===this.addresses&&(this.addresses=i.slice(0,e.devices)),this.addresses.forEach(t=>{if(!a.has(t))throw new Error("Invalid HT16K33 controller address: "+t);a.delete(t)}),this.rotation=t.rotation||1,16!==this.columns||t.rotation||(this.rotation=0),this.buffer=Array(this.rows).fill([]),this.isMatrix||(this.colon=!0),t.addresses=this.addresses,this.io.i2cConfig(t),this.each((function(t){this.on(t),this.blink(t,!1),this.brightness(t,100),this.clear(t)}))}},blink:{writable:!0,value(t,e){if(1===arguments.length)e=t,this.each((function(t){this.blink(t,e)}));else{let i=null;switch(e){case!1:i=0;break;case"slow":i=6;break;case"normal":i=4;break;case"fast":i=2}if(null==i)return;this.send(t,1|this.OP.BLINK,i)}return this}},clear:{writable:!0,value(t){let e;if(void 0===t)this.each((function(t){this.clear(t)}));else{e=t*this.columns;for(let i=0;i<this.rows;i++)this.memory[e+i]=0,this.buffer[t][i]=0;this.writeDisplay(t)}return this}},led:{writable:!0,value(t,e,i,r){if(3===arguments.length)return r=i,i=e,e=t,this.each((function(t){this.led(t,e,i,r)})),this;{let n,s=i,a=e,l=this.rows,h=this.columns;if(a<0||a>=l)return this;if(s<0||s>=h)return this;switch(this.rotation){case 1:h=this.rows,l=this.columns,n=s,s=a,a=n,s=h-s-1;break;case 2:s=h-s-1,a=l-a-1;break;case 3:h=this.rows,l=this.columns,n=s,s=a,a=n,a=l-a-1}this.isBicolor?r===o.COLORS.GREEN?(this.buffer[t][a]|=1<<s,this.buffer[t][a]&=~(1<<s+8)):r===o.COLORS.YELLOW?this.buffer[t][a]|=1<<s+8|1<<s:r===o.COLORS.RED?(this.buffer[t][a]|=1<<s+8,this.buffer[t][a]&=~(1<<s)):this.buffer[t][a]&=~(1<<s)&~(1<<s+8):(8===h&&8===l&&(s+=h-1,s%=h),r?this.buffer[t][a]|=1<<s:this.buffer[t][a]&=~(1<<s)),this.writeDisplay(t)}return this}},writeDisplay:{writable:!0,value(t){const e=[0];for(let i=0;i<8;i++)e.push(255&this.buffer[t][i]),e.push(this.buffer[t][i]>>8);this.io.i2cWrite(this.addresses[t],e)}},row:{writable:!0,value(t,e,i){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");if("number"==typeof i&&(i=("0000000000000000"+parseInt(i,10).toString(2)).substr(0-this.columns,this.columns)),2===arguments.length)i=e,e=t,this.each((function(t){this.row(t,e,i)}));else for(let r=0;r<this.columns;r++)this.led(t,e,r,parseInt(i[r],10));return this}},scanLimit:{writable:!0,value(){throw new Error("The `scanLimit` method is not implemented for HT16K33 devices")}},send:{writable:!0,value(t,e,i){if(3!==arguments.length)throw new Error("The `send` method expects three arguments: device, opcode, data");return this.io.i2cWrite(this.addresses[t],[e|i]),this}},sendDigit:{writable:!0,value(t,e,i){return i>0&&i<255&&(i=(i=("00000000"+i.toString(2)).slice(-8).split("")).shift()+i.reverse().join(""),i=parseInt(i,2)),this.buffer[t][e]=i,this.writeDisplay(t),this}}},DEFAULT:{OP:{value:{}},initialize:{writable:!0,value({pins:t}){this.pins={data:t.data,clock:t.clock,cs:t.cs||t.latch},["data","clock","cs"].forEach((function(t){this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)}),this),this.digitOrder=-1,this.digitOrder=-1;for(let t=0;t<this.devices;t++)this.isMatrix&&this.send(t,o.OP.DECODING,0),this.send(t,o.OP.BRIGHTNESS,3),this.send(t,o.OP.SCANLIMIT,7),this.send(t,o.OP.SHUTDOWN,1),this.send(t,o.OP.DISPLAYTEST,0),this.clear(t),this.on(t);return this}},clear:{writable:!0,value(t){let e;if(void 0===t)this.each((function(t){this.clear(t)}));else{e=8*t;for(let i=0;i<8;i++)this.memory[e+i]=0,this.send(t,i+1,0)}return this}},sendDigit:{writable:!0,value(t,e,i){return this.send(t,e+1,i),this}},led:{writable:!0,value(t,e,i,r){let n,s;return 3===arguments.length?(r=i,i=e,e=t,this.each((function(t){this.led(t,e,i,r)}))):(n=t*this.columns,s=128>>i,r?this.memory[n+e]=this.memory[n+e]|s:(s=~s,this.memory[n+e]=this.memory[n+e]&s),this.send(t,e+1,this.memory[n+e])),this}},row:{writable:!0,value(t,e,i){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");let r;return"string"==typeof i&&(i=parseInt(i,2)),2===arguments.length?(i=e,e=t,this.each((function(t){this.row(t,e,i)}))):(r=t*this.columns,this.memory[r+e]=i,this.send(t,e+1,this.memory[r+e])),this}},scanLimit:{writable:!0,value(t,e){return 1===arguments.length?(e=t,this.each((function(t){this.scanLimit(t,e)}))):this.send(t,o.OP.SCANLIMIT,e),this}},send:{writable:!0,value(t,e,i){if(3!==arguments.length)throw new Error("`send` expects three arguments: device, opcode, data");const r=2*t,n=2*this.devices,s=[];if(t<this.devices){for(let t=0;t<n;t++)s[t]=0;s[r+1]=e,s[r]=i,this.io.digitalWrite(this.pins.cs,this.io.LOW);for(let t=n;t>0;t--)this.board.shiftOut(this.pins.data,this.pins.clock,s[t-1]);this.io.digitalWrite(this.pins.cs,this.io.HIGH)}return this}}}};o.DEFAULTS={DECODING:0,BRIGHTNESS:3,SCANLIMIT:7,SHUTDOWN:1,DISPLAYTEST:0},Object.freeze(o.DEFAULTS),o.OP={},o.OP.NOOP=0,o.OP.DIGIT0=1,o.OP.DIGIT1=2,o.OP.DIGIT2=3,o.OP.DIGIT3=4,o.OP.DIGIT4=5,o.OP.DIGIT5=6,o.OP.DIGIT6=7,o.OP.DIGIT7=8,o.OP.DECODEMODE=9,o.OP.INTENSITY=10,o.OP.SCANLIMIT=11,o.OP.SHUTDOWN=12,o.OP.DISPLAYTEST=15,o.OP.BRIGHTNESS=o.OP.INTENSITY,o.OP.DECODING=o.OP.DECODEMODE,o.OP.DISPLAY=o.OP.DISPLAYTEST,o.OP.POWERDOWN=o.OP.SHUTDOWN,Object.freeze(o.OP),o.COLORS={RED:1,YELLOW:2,GREEN:3},o.DIRECTIONS={UP:1,RIGHT:2,DOWN:3,LEFT:4,1:"UP",2:"RIGHT",3:"DOWN",4:"LEFT"},Object.freeze(o.DIRECTIONS);const h=[[224,160,160,160,160,160,224,0],[64,192,64,64,64,64,224,0],[224,32,32,224,128,128,224,0],[224,32,32,96,32,32,224,0],[32,96,160,224,32,32,32,0],[224,128,128,224,32,32,224,0],[224,128,128,224,160,160,224,0],[224,32,32,32,32,32,32,0],[224,160,160,64,160,160,224,0],[224,160,160,224,32,32,224,0]];let c="";for(let t=0;t<10;t++)for(let e=0;e<10;e++){c=`${t}${e}`,n.MATRIX_CHARS[c]=[];for(let i=0;i<8;i++)n.MATRIX_CHARS[c][i]=h[t][i]|h[e][i]>>>4}o.MATRIX_DIMENSIONS={"16x8":{rows:16,columns:8},"8x16":{rows:8,columns:16},"8x8":{rows:8,columns:8}},o.MATRIX_CHARS=n.MATRIX_CHARS,o.DIGIT_CHARS=n.DIGIT_CHARS,e.env.IS_TEST_MODE&&(o.Controllers=l,o.purge=()=>{a=new Set([112,113,114,115,116,117,118,119]),s.clear()}),t.exports=o}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(5),s=i(4),o=i(15),a=new Map;class l extends o{constructor(t){super();let i=1023,n=null,o=-1;const l=[];r.Component.call(this,t=r.Options(t)),t.type||(t.type="analog"),this.io.RESOLUTION&&this.io.RESOLUTION.ADC&&this.io.RESOLUTION.ADC!==i&&(i=this.io.RESOLUTION.ADC),this.mode="digital"===t.type?this.io.MODES.INPUT:this.io.MODES.ANALOG,this.io.pinMode(this.pin,this.mode);const h={enabled:void 0===t.enabled||t.enabled,booleanBarrier:"digital"===t.type?0:null,intervalId:null,scale:null,value:0,median:0,freq:t.freq||25,previousFreq:t.freq||25};a.set(this,h),this.range=t.range||[0,i],this.limit=t.limit||null,this.threshold=void 0===t.threshold?1:t.threshold,this.isScaled=!1,this.io[t.type+"Read"](this.pin,e=>{n=e,"digital"!==t.type&&l.push(n)});const c=()=>{let e,i;if(e=null,"digital"===t.type)return this.emit("data",n),void(o!==n&&(this.emit("change",n),o=n));l.length>0&&(h.median=function(t){const e=t.sort((t,e)=>t-e),i=e.length,r=Math.floor(i/2);return i%2?e[r]:(e[r-1]+e[r])/2}(l));const r=Math.round(h.median);this.emit("data",r),(h.median<=o-this.threshold||h.median>=o+this.threshold)&&(this.emit("change",r),o=h.median),this.limit&&(h.median<=this.limit[0]&&(i="lower"),h.median>=this.limit[1]&&(i="upper"),i&&(this.emit("limit",{boundary:i,value:r}),this.emit("limit:"+i,r))),l.length=0};Object.defineProperties(this,{raw:{get:()=>n},analog:{get(){return"digital"===t.type?n:null===n?0:0|s.map(this.raw,0,i,0,255)}},constrained:{get(){return"digital"===t.type?n:null===n?0:s.constrain(this.raw,0,255)}},boolean:{get(){const t=a.get(this);let e=t.booleanBarrier;const r=t.scale||[0,i];return null===e&&(e=r[0]+(r[1]-r[0])/2),this.value>e}},scaled:{get(){let e,i;return h.scale&&null!==n?"digital"===t.type?h.scale[n]:(e=s.fmap(n,this.range[0],this.range[1],h.scale[0],h.scale[1]),i=s.constrain(e,h.scale[0],h.scale[1]),i):this.constrained}},freq:{get:()=>h.freq,set(t){h.freq=t,h.intervalId&&clearInterval(h.intervalId),null!==h.freq&&(h.intervalId=setInterval(c,t))}},value:{get(){return h.scale?(this.isScaled=!0,this.scaled):n}},resolution:{get:()=>i}}),e.env.IS_TEST_MODE&&Object.defineProperties(this,{state:{get(){return a.get(this)}}}),h.enabled&&(this.freq=h.freq)}enable(){const t=a.get(this);return t.enabled||(this.freq=t.freq||t.previousFreq),this}disable(){const t=a.get(this);return t.enabled&&(t.enabled=!1,t.previousFreq=t.freq,this.freq=null),this}scale(t,e){return this.isScaled=!0,a.get(this).scale=Array.isArray(t)?t:[t,e],this}scaleTo(t,e){const i=Array.isArray(t)?t:[t,e];return s.map(this.raw,0,this.resolution,i[0],i[1])}fscaleTo(t,e){const i=Array.isArray(t)?t:[t,e];return s.fmap(this.raw,0,this.resolution,i[0],i[1])}booleanAt(t){return a.get(this).booleanBarrier=t,this}}class h extends n.Emitter{constructor(t){super(t)}get type(){return l}}n.installMethodForwarding(h.prototype,l.prototype),l.Collection=h,e.env.IS_TEST_MODE&&(l.purge=()=>{a.clear()}),t.exports=l}).call(this,i(1))},function(t,e,i){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(n.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new s(n.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(101),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(6))},function(t,e,i){(e=t.exports=i(48)).Stream=e,e.Readable=e,e.Writable=i(25),e.Duplex=i(9),e.Transform=i(52),e.PassThrough=i(114)},function(t,e,i){"use strict";(function(e,r,n){var s=i(16);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;t.entry=null;for(;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var a,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:s.nextTick;v.WritableState=m;var h=Object.create(i(14));h.inherits=i(11);var c={deprecate:i(113)},u=i(49),d=i(17).Buffer,p=n.Uint8Array||function(){};var f,g=i(50);function E(){}function m(t,e){a=a||i(9),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,h=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(h||0===h)?h:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,n){--e.pendingcb,i?(s.nextTick(n,r),s.nextTick(O,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(n(r),t._writableState.errorEmitted=!0,t.emit("error",r),O(t,e))}(t,i,r,e,n);else{var o=S(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||b(t,i),r?l(R,t,i,o,n):R(t,i,o,n)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function v(t){if(a=a||i(9),!(f.call(v,this)||this instanceof a))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function y(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function R(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),O(t,e)}function b(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),s=e.corkedRequestsFree;s.entry=i;for(var a=0,l=!0;i;)n[a]=i,i.isBuf||(l=!1),i=i.next,a+=1;n.allBuffers=l,y(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(y(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),O(t,e)}))}function O(t,e){var i=S(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,s.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}h.inherits(v,u),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!f.call(this,t)||this===v&&(t&&t._writableState instanceof m)}})):f=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,i){var r,n=this._writableState,o=!1,a=!n.objectMode&&(r=t,d.isBuffer(r)||r instanceof p);return a&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof i&&(i=E),n.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),s.nextTick(e,i)}(this,i):(a||function(t,e,i,r){var n=!0,o=!1;return null===i?o=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),s.nextTick(r,o),n=!1),n}(this,n,t,i))&&(n.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,i));return e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,a,r,n,s);return l}(this,n,a,t,e,i)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,i){e.ending=!0,O(t,e),i&&(e.finished?s.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,r,i)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(1),i(23).setImmediate,i(6))},function(t,e){var i=function(t,e,i){void 0===e&&void 0===i?(this.x=void 0!==t.x?t.x:t[0],this.y=void 0!==t.y?t.y:t[1],this.z=void 0!==t.z?t.z:t[2]):(this.x=t,this.y=e,this.z=i),this.v=void 0!==this.z?[this.x,this.y,this.z]:[this.x,this.y]};i.prototype={isVector:!0,add:function(t){return new i(this.x+t.x,this.y+t.y,this.z+t.z)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,n=this.x*t.y-this.y*t.x;return new i(e,r,n)},moveTo:function(t){this.x=void 0!==t.x?t.x:t[0],this.y=void 0!==t.y?t.y:t[1],this.z=void 0!==t.z?t.z:t[2]},distanceFrom:function(t){for(var e=0,i=0;i<this.v.length;++i)e+=(this.v[i]-t.v[i])*(this.v[i]-t.v[i]);return Math.sqrt(e)},length:function(){for(var t=0,e=0;e<this.v.length;++e)t+=this.v[e]*this.v[e];return Math.sqrt(t)},scale:function(t){return new i(this.x*t,this.y*t,this.z*t)}},t.exports=i},function(t,e,i){var r=i(26),n=function(t,e,i){this.rows=t,this.cols=e||t,this.m=new Array(t);for(var r=0;r<t;++r){this.m[r]=new Array(e);for(var n=0;n<e;++n)this.m[r][n]=0}if(this.rows===this.cols&&i)for(var s=0;s<this.rows;s++)this.m[s][s]=1;this.isVector=!1,this.size={rows:this.rows,cols:this.cols}};n.prototype={set:function(t,e,i){this.m[t][e]=parseFloat(i.toFixed(12))},setRow:function(t,e){var i=this;e.forEach((function(e,r){i.set(t,r,e)}))},get:function(t,e){return this.m[t][e]},scale:function(t){for(var e=new n(this.rows,this.cols),i=0;i<this.rows;++i)for(var r=0;r<this.cols;++r){var s=this.get(i,r)*t;e.set(i,r,s)}return e},add:function(t){if(t.cols!==this.cols||t.rows!==this.rows)return new Error("A and B must be the same size");for(var e=new n(this.rows,this.cols),i=0;i<this.rows;++i)for(var r=0;r<this.cols;++r){var s=this.get(i,r)+t.get(i,r);e.set(i,r,s)}return e},dot:function(t){if(t.isVector?t.v.length!==this.cols:t.rows!==this.cols)return new Error("number of cols of A must equal number of rows of B");var e;if(t.isVector){for(var i=Array(t.v.length),s=0;s<t.v.length;++s){i[s]=0;for(var o=0;o<this.rows;++o)i[s]+=parseFloat((this.get(s,o)*t.v[o]).toFixed(12))}e=new r(i)}else{e=new n(this.rows,t.cols);for(var a=0;a<e.rows;++a)for(var l=0;l<e.cols;++l){for(var h=0,c=0;c<t.rows;++c)h+=parseFloat((this.get(a,c)*t.get(c,l)).toFixed(12));e.set(a,l,h)}}return e},transpose:function(){for(var t=new n(this.rows,this.cols),e=0;e<this.rows;++e)for(var i=0;i<this.cols;++i)t.m[e][i]=this.m[i][e];return t},cofactorDet:function(){if(this.rows!==this.cols)throw new Error("this is not a square matrix");for(var t=0,e=1,i=0;i<this.rows;i++)t+=this.m[0][i]*this.minor(i,0).det()*e,e=-e;return t},minor:function(t,e){var i=this.copy();return i.removeRow(e),i.removeCol(t),i},copy:function(){for(var t=new n(this.rows,this.cols),e=0;e<this.rows;e++)for(var i=0;i<this.cols;i++)t.set(e,i,this.get(e,i));return t},removeRow:function(t){this.m.splice(t,1),this.rows-=1},removeCol:function(t){for(var e=0;e<this.rows;e++)this.m[e].splice(t,1);this.cols-=1},det:function(){var t,e,i,r,s,o,a;if(this.rows!==this.cols)throw new Error("this is not a square matrix");if(2===this.rows&&2===this.cols)return this.m[0][0]*this.m[1][1]-this.m[0][1]*this.m[1][0];for(t=this,s=new n(this.rows,this.cols,!0),o=new n(this.rows,this.cols),r=1;r<this.rows;r++){for(o=new n(this.rows,this.cols,!0),a=r;a<this.rows;a++){if(0===t.m[r-1][r-1])return this.cofactorDet();o.m[a][r-1]=-1*t.m[a][r-1]/t.m[r-1][r-1],s.m[a][r-1]=-1*o.m[a][r-1]}t=o.dot(t)}for(e=1,i=1,r=0;r<this.rows;r++)e*=t.m[r][r],i*=s.m[r][r];return e*i},trace:function(){if(this.rows!==this.cols)return new Error("this is not a square matrix");for(var t=0,e=0;e<this.rows;++e)t+=this.m[e][e];return t},getPoint:function(){return 4===this.rows&&4===this.cols?new r(this.get(0,3),this.get(1,3),this.get(2,3)):new Error("this is not a homogeneous matrix")},getRot:function(){if(4===this.rows&&4===this.cols){for(var t=new n(3,3),e=0;e<3;++e)for(var i=0;i<3;++i){var r=this.get(e,i);t.set(e,i,r)}return t}},calcRotAng:function(){return Math.acos((this.getRot().trace()-1)/2)},calcRotVec:function(){var t=this.getRot(),e=this.calcRotAng(),i=t.scale(-1).transpose(),n=t.add(i).scale(1/(2*Math.sin(e)));return new r(-n.get(1,2),n.get(0,2),-n.get(0,1))}},t.exports=n},function(t,e,i){(function(e){const r=i(3),n=i(8),s=i(2),{constrain:o,fma:a,int16:l,sum:h,toFixed:c,RAD_TO_DEG:u}=i(4),d=new Map,p=["x","y","z"];function f({zeroV:t,sensitivity:e},i){const r=d.get(this),n={};r.zeroV=t||this.DEFAULTS.zeroV,r.sensitivity=e||this.DEFAULTS.sensitivity,this.pins.forEach((function(t,e){this.io.pinMode(t,this.io.MODES.ANALOG),this.io.analogRead(t,t=>{const r=p[e];n[r]=t,i(n)})}),this)}function g(t,e){const i=d.get(this);let r=i.zeroV;if(Array.isArray(r)&&r.length>0){r=r[p.indexOf(e)||0]}return(t-r)/i.sensitivity}const E={ANALOG:{DEFAULTS:{value:{zeroV:478,sensitivity:96}},initialize:{value:f},toGravity:{value:g}},MPU6050:{initialize:{value(t,e){d.get(this).sensitivity=t.sensitivity||16384;const{Drivers:r}=i(0);r.get(this.board,"MPU6050",t).on("data",({accelerometer:t})=>e(t))}},toGravity:{value(t){return c(t/d.get(this).sensitivity,3)}}},BNO055:{initialize:{value(t,e){d.get(this).sensitivity=100;const{Drivers:r}=i(0);r.get(this.board,"BNO055",t).on("data",({accelerometer:t})=>e(t))}},toGravity:{value(t){return c(t/d.get(this).sensitivity,2)}}},ADXL335:{DEFAULTS:{value:{zeroV:330,sensitivity:66.5}},initialize:{value:f},toGravity:{value(t,e){return c(g.call(this,t,e),3)}}},ADXL345:{ADDRESSES:{value:[83]},REGISTER:{value:{POWER:45,DATA_FORMAT:49,DATAX0:50}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cWrite(n,this.REGISTER.POWER,0),this.io.i2cWrite(n,this.REGISTER.POWER,8);const s={2:0,4:1,8:2,16:3}[t.range||2];this.io.i2cWrite(n,this.REGISTER.DATA_FORMAT,8|s),this.io.i2cRead(n,this.REGISTER.DATAX0,6,t=>{e({x:l(t[1],t[0]),y:l(t[3],t[2]),z:l(t[5],t[4])})})}},toGravity:{value:t=>c(.00390625*t,8)}},MMA7361:{DEFAULTS:{value:{zeroV:[372,372,287],sensitivity:170}},initialize:{value(t,e){const i=d.get(this);void 0!==t.sleepPin&&(i.sleepPin=t.sleepPin,this.io.pinMode(i.sleepPin,1),this.io.digitalWrite(i.sleepPin,1)),f.call(this,t,e)}},toGravity:{value(t,e){return c(g.call(this,t,e),3)}},enabledChanged:{value(t){const e=d.get(this);void 0!==e.sleepPin&&this.io.digitalWrite(e.sleepPin,t?1:0)}}},MMA8452:{ADDRESSES:{value:[29]},REGISTER:{value:{STATUS:0,OUT_X_MSB:1,XYZ_DATA_CFG:14,PULSE_CFG:33,PULSE_SRC:34,PULSE_THSX:35,PULSE_THSY:36,PULSE_THSZ:37,PULSE_TMLT:38,PULSE_LTCY:39,PULSE_WIND:40,CTRL_REG1:42,CTRL_REG4:46,CTRL_REG5:47}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=d.get(this),o=[800,400,200,100,50,12,6],a=o.indexOf(t.odr||800),h=t.range||2,c={2:0,4:1,8:2}[h];t.taps=t.taps||{x:!1,y:!1,z:!0};const u={x:t.taps.x?8:128,y:t.taps.y?8:128,z:t.taps.z?8:128};s.scale=h;const p={x:null,y:null,z:null};if(this.io.i2cConfig(Object.assign(t,{settings:{stopTX:!1}})),-1===a)throw new RangeError("Invalid odr. Expected one of: 800,  400,  200,  100,  50,  12,  6");let f=8;f|=a<<3,this.io.i2cWriteReg(n,this.REGISTER.CTRL_REG1,f),this.io.i2cWriteReg(n,this.REGISTER.XYZ_DATA_CFG,c);let g=0;128&u.x||(g|=3,this.io.i2cWriteReg(n,this.REGISTER.PULSE_THSX,u.x)),128&u.y||(g|=12,this.io.i2cWriteReg(n,this.REGISTER.PULSE_THSY,u.y)),128&u.z||(g|=48,this.io.i2cWriteReg(n,this.REGISTER.PULSE_THSZ,u.z)),this.io.i2cWriteReg(n,this.REGISTER.PULSE_CFG,64|g),this.io.i2cWriteReg(n,this.REGISTER.PULSE_TMLT,60/(1e3/o[a])),this.io.i2cWriteReg(n,this.REGISTER.PULSE_LTCY,200/(1e3/o[a])),this.io.i2cWriteReg(n,this.REGISTER.PULSE_WIND,255),f|=1,this.io.i2cWriteReg(n,this.REGISTER.CTRL_REG1,f),this.io.i2cRead(n,this.REGISTER.STATUS,7,t=>{(8&t.shift())>>>3&&(p.x=l(t[0],t[1])>>4,p.y=l(t[2],t[3])>>4,p.z=l(t[4],t[5])>>4,e(p))}),this.io.i2cRead(n,this.REGISTER.PULSE_SRC,1,t=>{const e=t[0],i=127&e;128&e&&(this.emit("tap"),i>>2&1&&(this.emit("tap:single"),i>>3&1&&this.emit("tap:double")))})}},toGravity:{value(t){return c(t/(2048*d.get(this).scale),4)}}},MMA7660:{ADDRESSES:{value:[76]},REGISTER:{value:{XOUT:0,MODE:7,SR:8}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);d.get(this).sensitivity=21.33,this.io.i2cConfig(t),this.io.i2cWrite(n,this.REGISTER.MODE,0),this.io.i2cWrite(n,this.REGISTER.SR,7),this.io.i2cWrite(n,this.REGISTER.MODE,1),this.io.i2cRead(n,this.REGISTER.XOUT,3,t=>{e({x:63&t[0],y:63&t[1],z:63&t[2]})})}},toGravity:{value(t){return c(t/d.get(this).sensitivity,3)}}},ESPLORA:{DEFAULTS:{value:{zeroV:[320,330,310],sensitivity:170}},initialize:{value(t,e){this.pins=[5,11,6],f.call(this,t,e)}},toGravity:{value(t,e){return c(g.call(this,t,e),2)}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31,CLICK_CFG:56,CLICK_SRC:57,CLICK_THS:58,TIME_LIMIT:59,TIME_LATENCY:60,TIME_WINDOW:61}},initialize:{value(t,e){const i=d.get(this),r=t.address||24;let s={2:0,4:1,8:2,16:3}[t.range||4];void 0===s&&(s=1);let o=[16380,8190,4096,1365][s];void 0===o&&(o=1);let a=[80,40,20,10][s];void 0===a&&(a=10),i.divider=o,i.expander=n.get({address:r,controller:this.controller,bus:this.bus});const h=136|s<<4;i.expander.i2cWrite(r,this.REGISTER.CTRL_REG4,h),i.expander.i2cReadOnce(r,this.REGISTER.CTRL_REG1,1,t=>{let n=t[0];n&=-241,n|=96,i.expander.i2cWrite(r,this.REGISTER.CTRL_REG1,n),i.expander.i2cRead(r,128|this.REGISTER.OUT_X_L,6,t=>{e({x:l(t[1],t[0]),y:l(t[3],t[2]),z:l(t[5],t[4])})}),i.expander.i2cWrite(r,this.REGISTER.CTRL_REG3,128),i.expander.i2cWrite(r,this.REGISTER.CTRL_REG5,8),i.expander.i2cWrite(r,this.REGISTER.CLICK_CFG,42);i.expander.i2cWrite(r,this.REGISTER.CLICK_THS,a),i.expander.i2cWrite(r,this.REGISTER.TIME_LIMIT,10),i.expander.i2cWrite(r,this.REGISTER.TIME_LATENCY,20),i.expander.i2cWrite(r,this.REGISTER.TIME_WINDOW,255);let s=null;i.expander.i2cRead(r,this.REGISTER.CLICK_SRC,1,t=>{const e=t[0],i=Date.now();null===s&&(s=i-101),i<s+100||0!==e&&48&e&&(s=i,this.emit("tap"),16&e&&this.emit("tap:single"),32&e&&(this.emit("tap:single"),this.emit("tap:double")))})})}},toGravity:{value(t){return c(t/d.get(this).divider,3)}}},LSM303C:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"LSM303C",t).on("data",({accelerometer:t})=>e(t))}},toGravity:{value:t=>c(t,2)}}};E.TINKERKIT=E.ANALOG,E.MMA8452Q=E.MMA8452,E.DEFAULT=E.ANALOG;class m extends s{constructor(t){super();const e={enabled:!0,x:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},y:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},z:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]}};r.Component.call(this,t=r.Options(t)),r.Controller.call(this,E,t),this.toGravity||(this.toGravity=t.toGravity||(t=>t)),this.enabledChanged||(this.enabledChanged=()=>{}),d.set(this,e),"function"==typeof this.initialize&&this.initialize(t,i=>{let r=!1;e.enabled&&(Object.keys(i).forEach(n=>{const s=i[n],o=e[n];if(t.autoCalibrate&&o.calibration.length<10){const t=p.indexOf(n);o.calibration.push(s),Array.isArray(e.zeroV)||(e.zeroV=[]),e.zeroV[t]=h(o.calibration)/o.calibration.length,"z"===n&&(e.zeroV[t]-=e.sensitivity)}if(0===o.stash.length)for(let t=0;t<5;t++)o.stash[t]=s;o.previous=o.value,o.stash.shift(),o.stash.push(s),o.value=h(o.stash)/5|0,this.acceleration!==o.acceleration&&(o.acceleration=this.acceleration,r=!0,this.emit("acceleration",o.acceleration)),this.orientation!==o.orientation&&(o.orientation=this.orientation,r=!0,this.emit("orientation",o.orientation)),this.inclination!==o.inclination&&(o.inclination=this.inclination,r=!0,this.emit("inclination",o.inclination))}),this.emit("data",{x:e.x.value,y:e.y.value,z:e.z.value}),r&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{hasAxis:{writable:!0,value:t=>!!e[t]&&e[t].stash.length>0},enable:{value(){return e.enabled=!0,this.enabledChanged(!0),this}},disable:{value(){return e.enabled=!1,this.enabledChanged(!1),this}},zeroV:{get:()=>e.zeroV},pitch:{get(){const t=this.x,e=this.y,i=this.z,r=this.hasAxis("z")?Math.atan2(t,Math.hypot(e,i)):Math.asin(o(t,-1,1));return c(r*u,2)}},roll:{get(){const t=this.x,e=this.y,i=this.z,r=this.hasAxis("z")?Math.atan2(e,Math.hypot(t,i)):Math.asin(o(e,-1,1));return c(r*u,2)}},x:{get(){return this.toGravity(e.x.value,"x")}},y:{get(){return this.toGravity(e.y.value,"y")}},z:{get(){return this.hasAxis("z")?this.toGravity(e.z.value,"z"):0}},acceleration:{get(){return function(t,e,i){let r;return r=t*t,r=a(e,e,r),r=a(i,i,r),Math.sqrt(r)}(this.x,this.y,this.z)}},inclination:{get(){return Math.atan2(this.y,this.x)*u}},orientation:{get(){const t=Math.abs,e=this.x,i=this.y,r=this.hasAxis("z")?this.z:1,n=t(e),s=t(i),o=t(r);return n<s&&n<o?e>0?1:-1:s<n&&s<o?i>0?2:-2:o<n&&o<s?r>0?3:-3:0}}})}}e.env.IS_TEST_MODE&&(m.Controllers=E,m.purge=function(){d.clear()}),t.exports=m}).call(this,i(1))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var r=i(31),n={};for(var s in r)r.hasOwnProperty(s)&&(n[r[s]]=s);var o=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in o)if(o.hasOwnProperty(a)){if(!("channels"in o[a]))throw new Error("missing channels property: "+a);if(!("labels"in o[a]))throw new Error("missing channel labels property: "+a);if(o[a].labels.length!==o[a].channels)throw new Error("channel and label counts mismatch: "+a);var l=o[a].channels,h=o[a].labels;delete o[a].channels,delete o[a].labels,Object.defineProperty(o[a],"channels",{value:l}),Object.defineProperty(o[a],"labels",{value:h})}o.rgb.hsl=function(t){var e,i,r=t[0]/255,n=t[1]/255,s=t[2]/255,o=Math.min(r,n,s),a=Math.max(r,n,s),l=a-o;return a===o?e=0:r===a?e=(n-s)/l:n===a?e=2+(s-r)/l:s===a&&(e=4+(r-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(o+a)/2,[e,100*(a===o?0:i<=.5?l/(a+o):l/(2-a-o)),100*i]},o.rgb.hsv=function(t){var e,i,r,n,s,o=t[0]/255,a=t[1]/255,l=t[2]/255,h=Math.max(o,a,l),c=h-Math.min(o,a,l),u=function(t){return(h-t)/6/c+.5};return 0===c?n=s=0:(s=c/h,e=u(o),i=u(a),r=u(l),o===h?n=r-i:a===h?n=1/3+e-r:l===h&&(n=2/3+i-e),n<0?n+=1:n>1&&(n-=1)),[360*n,100*s,100*h]},o.rgb.hwb=function(t){var e=t[0],i=t[1],r=t[2];return[o.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(i,r))),100*(r=1-1/255*Math.max(e,Math.max(i,r)))]},o.rgb.cmyk=function(t){var e,i=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-r,1-n)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-n-e)/(1-e)||0),100*e]},o.rgb.keyword=function(t){var e=n[t];if(e)return e;var i,s,o,a=1/0;for(var l in r)if(r.hasOwnProperty(l)){var h=r[l],c=(s=t,o=h,Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)+Math.pow(s[2]-o[2],2));c<a&&(a=c,i=l)}return i},o.keyword.rgb=function(t){return r[t]},o.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*i+.0722*r),100*(.0193*e+.1192*i+.9505*r)]},o.rgb.lab=function(t){var e=o.rgb.xyz(t),i=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(i-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.hsl.rgb=function(t){var e,i,r,n,s,o=t[0]/360,a=t[1]/100,l=t[2]/100;if(0===a)return[s=255*l,s,s];e=2*l-(i=l<.5?l*(1+a):l+a-l*a),n=[0,0,0];for(var h=0;h<3;h++)(r=o+1/3*-(h-1))<0&&r++,r>1&&r--,s=6*r<1?e+6*(i-e)*r:2*r<1?i:3*r<2?e+(i-e)*(2/3-r)*6:e,n[h]=255*s;return n},o.hsl.hsv=function(t){var e=t[0],i=t[1]/100,r=t[2]/100,n=i,s=Math.max(r,.01);return i*=(r*=2)<=1?r:2-r,n*=s<=1?s:2-s,[e,100*(0===r?2*n/(s+n):2*i/(r+i)),100*((r+i)/2)]},o.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,r=t[2]/100,n=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-i),a=255*r*(1-i*s),l=255*r*(1-i*(1-s));switch(r*=255,n){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}},o.hsv.hsl=function(t){var e,i,r,n=t[0],s=t[1]/100,o=t[2]/100,a=Math.max(o,.01);return r=(2-s)*o,i=s*a,[n,100*(i=(i/=(e=(2-s)*a)<=1?e:2-e)||0),100*(r/=2)]},o.hwb.rgb=function(t){var e,i,r,n,s,o,a,l=t[0]/360,h=t[1]/100,c=t[2]/100,u=h+c;switch(u>1&&(h/=u,c/=u),r=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(r=1-r),n=h+r*((i=1-c)-h),e){default:case 6:case 0:s=i,o=n,a=h;break;case 1:s=n,o=i,a=h;break;case 2:s=h,o=i,a=n;break;case 3:s=h,o=n,a=i;break;case 4:s=n,o=h,a=i;break;case 5:s=i,o=h,a=n}return[255*s,255*o,255*a]},o.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n=t[3]/100;return[255*(1-Math.min(1,e*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n))]},o.xyz.rgb=function(t){var e,i,r,n=t[0]/100,s=t[1]/100,o=t[2]/100;return i=-.9689*n+1.8758*s+.0415*o,r=.0557*n+-.204*s+1.057*o,e=(e=3.2406*n+-1.5372*s+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1))]},o.xyz.lab=function(t){var e=t[0],i=t[1],r=t[2];return i/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.lab.xyz=function(t){var e,i,r,n=t[0];e=t[1]/500+(i=(n+16)/116),r=i-t[2]/200;var s=Math.pow(i,3),o=Math.pow(e,3),a=Math.pow(r,3);return i=s>.008856?s:(i-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,[e*=95.047,i*=100,r*=108.883]},o.lab.lch=function(t){var e,i=t[0],r=t[1],n=t[2];return(e=360*Math.atan2(n,r)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(r*r+n*n),e]},o.lch.lab=function(t){var e,i=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[i,r*Math.cos(e),r*Math.sin(e)]},o.rgb.ansi16=function(t){var e=t[0],i=t[1],r=t[2],n=1 in arguments?arguments[1]:o.rgb.hsv(t)[2];if(0===(n=Math.round(n/50)))return 30;var s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===n&&(s+=60),s},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){var e=t[0],i=t[1],r=t[2];return e===i&&i===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},o.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},o.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];3===e[0].length&&(i=i.split("").map((function(t){return t+t})).join(""));var r=parseInt(i,16);return[r>>16&255,r>>8&255,255&r]},o.rgb.hcg=function(t){var e,i=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(Math.max(i,r),n),o=Math.min(Math.min(i,r),n),a=s-o;return e=a<=0?0:s===i?(r-n)/a%6:s===r?2+(n-i)/a:4+(i-r)/a+4,e/=6,[360*(e%=1),100*a,100*(a<1?o/(1-a):0)]},o.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=1,n=0;return(r=i<.5?2*e*i:2*e*(1-i))<1&&(n=(i-.5*r)/(1-r)),[t[0],100*r,100*n]},o.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=e*i,n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],100*r,100*n]},o.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100;if(0===i)return[255*r,255*r,255*r];var n,s=[0,0,0],o=e%1*6,a=o%1,l=1-a;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return n=(1-i)*r,[255*(i*s[0]+n),255*(i*s[1]+n),255*(i*s[2]+n)]},o.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),r=0;return i>0&&(r=e/i),[t[0],100*r,100*i]},o.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[t[0],100*r,100*i]},o.hcg.hwb=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},o.hwb.hcg=function(t){var e=t[1]/100,i=1-t[2]/100,r=i-e,n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],100*r,100*n]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=o.gray.hsv=function(t){return[0,0,t[0]]},o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e,i){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,i){(function(e){const r=i(2),n=i(18),s=new Map;class o extends r{constructor(t){if(o.isActive)return o.ref;{super(),o.isActive=!0,this.context={},this.ready=!1;const e={opts:t,board:t.board};s.set(this,e),o.ref=this}}initialize(t){const i=s.get(this);e.stdin.resume(),e.stdin.setEncoding("utf8");i.board.info("Repl","Initialized");const r=n.start({prompt:">> ",useGlobal:!1});this.ready=!0,this.cmd=r,this.context=r.context,r.on("exit",()=>{i.board.emit("exit"),i.board.warn("Board","Closing.");const t=setTimeout(()=>{e.reallyExit()},1e3),r=setInterval(()=>{let n=!1;if(i.board.length){for(let t=0;t<i.board.length;t++)if(i.board[t].io.pending){n=!0;break}}else n=i.board.io.pending;n||(clearInterval(r),clearTimeout(t),e.nextTick(e.reallyExit))},1)}),this.inject(i.opts),t&&e.nextTick(t)}close(){this.cmd.emit("exit")}inject(t){Object.keys(t).forEach((function(e){Object.defineProperty(this.context,e,Object.getOwnPropertyDescriptor(t,e))}),this)}}o.isActive=!1,o.isBlocked=!1,o.ref=null,t.exports=o}).call(this,i(1))},function(t,e){t.exports=class{constructor(t){var e={};"number"==typeof t||"string"==typeof t?e.pin=t:Array.isArray(t)?e.pins=t:e=t,Object.assign(this,e)}}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";(function(e,r){const n=i(2),s=i(36),o=i(74),a=new Map,l=Symbol("sendOneWireSearch"),h=Symbol("sendOneWireRequest"),c={249(t){t.version.major=t.buffer[1],t.version.minor=t.buffer[2],t.emit("reportversion")},224(t){const e=15&t.buffer[0],i=t.buffer[1]|t.buffer[2]<<7;t.pins[t.analogPins[e]]&&(t.pins[t.analogPins[e]].value=i),t.emit("analog-read-"+e,i),t.emit("analog-read",{pin:e,value:i})},144(t){const e=15&t.buffer[0],i=t.buffer[1]|t.buffer[2]<<7;for(let r=0;r<8;r++){const n=8*e+r,s=t.pins[n],o=1<<r;if(s&&(s.mode===t.MODES.INPUT||s.mode===t.MODES.PULLUP)){s.value=i>>(7&r)&1,s.value?t.ports[e]|=o:t.ports[e]&=~o;let{value:a}=s;t.emit("digital-read-"+n,a),t.emit("digital-read",{pin:n,value:a})}}}},u={121(t){const i=t.buffer.length-2,r=e.alloc(Math.round((i-4)/2));let n=0,s=0;for(let e=4;e<i;e+=2)n=255&(127&t.buffer[e]|(127&t.buffer[e+1])<<7),r.writeUInt8(n,s++);t.firmware={name:r.toString(),version:{major:t.buffer[2],minor:t.buffer[3]}},t.emit("queryfirmware")},108(t){const e=Object.keys(t.MODES).map(e=>t.MODES[e]);let i,r,n=0;function s(t){return e.reduce((e,i)=>(t&1<<i&&e.push(i),e),[])}if(!t.pins.length)for(let e=2,o=0;e<t.buffer.length-1;e++)127!==t.buffer[e]?(0===o&&(i=t.buffer[e],r=(1<<t.buffer[e+1])-1,n|=1<<i,i===t.MODES.ANALOG&&null===t.RESOLUTION.ADC&&(t.RESOLUTION.ADC=r),i===t.MODES.PWM&&null===t.RESOLUTION.PWM&&(t.RESOLUTION.PWM=r)),o^=1):(t.pins.push({supportedModes:s(n),mode:void 0,value:0,report:1}),n=0,o=0);t.emit("capability-query")},110(t){let e=t.buffer[2];t.pins[e].mode=t.buffer[3],t.pins[e].state=t.buffer[4],t.buffer.length>6&&(t.pins[e].state|=t.buffer[5]<<7),t.buffer.length>7&&(t.pins[e].state|=t.buffer[6]<<14),t.emit("pin-state-"+e)},106(t){let e,i=0;for(let r=2;r<t.buffer.length-1;r++)e=t.buffer[r],t.pins[i].analogChannel=e,127!==e&&t.analogPins.push(i),i++;t.emit("analog-mapping-query")},119(t){const e=[],i=127&t.buffer[2]|(127&t.buffer[3])<<7,r=127&t.buffer[4]|(127&t.buffer[5])<<7;for(let i=6,r=t.buffer.length-1;i<r;i+=2)e.push(t.buffer[i]|t.buffer[i+1]<<7);t.emit(`I2C-reply-${i}-${r}`,e)},115(t){const e=t.buffer[2];u[e]&&u[e](t)},66(t){const e=t.buffer[3],i=t.buffer.slice(4,t.buffer.length-1);t.emit("1-wire-search-reply-"+e,o.readDevices(i))},69(t){const e=t.buffer[3],i=t.buffer.slice(4,t.buffer.length-1);t.emit("1-wire-search-alarms-reply-"+e,o.readDevices(i))},67(t){const e=t.buffer.slice(4,t.buffer.length-1),i=s.from7BitArray(e),r=i[1]<<8|i[0];t.emit("1-wire-read-reply-"+r,i.slice(2))},113(t){t.emit("string",e.from(t.buffer.slice(2,-1)).toString().replace(/\0/g,""))},117(t){const e=127&t.buffer[2]|(127&t.buffer[3])<<7,i=[127&t.buffer[4]|(127&t.buffer[5])<<7,127&t.buffer[6]|(127&t.buffer[7])<<7,127&t.buffer[8]|(127&t.buffer[9])<<7,127&t.buffer[10]|(127&t.buffer[11])<<7],r=(i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3];t.emit("ping-read-"+e,r)},114(t){const e=t.buffer[2];t.emit("stepper-done-"+e,!0)},98(t){const e=t.buffer[2],i=t.buffer[3],r=6===e||10===e?m(t.buffer.slice(4,9)):null;6===e&&t.emit("stepper-position-"+i,r),10===e&&t.emit("stepper-done-"+i,r),36===e&&t.emit("multi-stepper-done-"+i)},96(t){const e=240&t.buffer[2],i=15&t.buffer[2],r=[];if(64===e){for(let e=3,i=t.buffer.length;e<i-1;e+=2)r.push(t.buffer[e+1]<<7|t.buffer[e]);t.emit("serial-data-"+i,r)}}};let d=null;class p extends n{constructor(t,e,i){super(),"function"!=typeof e&&void 0!==e||(i=e,e={});const r=this,n=Object.assign({},{reportVersionTimeout:5e3,samplingInterval:19,serialport:{baudRate:57600,highWaterMark:256}},e);if(this.isReady=!1,this.MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4,SHIFT:5,I2C:6,ONEWIRE:7,STEPPER:8,SERIAL:10,PULLUP:11,IGNORE:127,PING_READ:117,UNKOWN:16},this.I2C_MODES={WRITE:0,READ:1,CONTINUOUS_READ:2,STOP_READING:3},this.STEPPER={TYPE:{DRIVER:1,TWO_WIRE:2,THREE_WIRE:3,FOUR_WIRE:4},STEP_SIZE:{WHOLE:0,HALF:1},RUN_STATE:{STOP:0,ACCEL:1,DECEL:2,RUN:3},DIRECTION:{CCW:0,CW:1}},this.SERIAL_MODES={CONTINUOUS_READ:0,STOP_READING:1},this.SERIAL_PORT_IDs={HW_SERIAL0:0,HW_SERIAL1:1,HW_SERIAL2:2,HW_SERIAL3:3,SW_SERIAL0:8,SW_SERIAL1:9,SW_SERIAL2:16,SW_SERIAL3:17,DEFAULT:8},this.SERIAL_PIN_TYPES={RES_RX0:0,RES_TX0:1,RES_RX1:2,RES_TX1:3,RES_RX2:4,RES_TX2:5,RES_RX3:6,RES_TX3:7},this.RESOLUTION={ADC:null,DAC:null,PWM:null},this.HIGH=1,this.LOW=0,this.pins=[],this.ports=Array(16).fill(0),this.analogPins=[],this.version={},this.firmware={},this.buffer=[],this.versionReceived=!1,this.name="Firmata",this.settings=n,this.pending=0,this.digitalPortQueue=0,"object"==typeof t)this.transport=t;else{if(!d)throw new Error("Missing Default Transport");this.transport=new d(t,n.serialport)}function s(){r.isReady=!0,r.emit("ready"),"function"==typeof i&&i()}this.transport.on("close",t=>{t&&t.disconnect&&t.disconnected?this.emit("disconnect"):this.emit("close")}),this.transport.on("open",t=>{this.emit("open",t),this.emit("connect",t)}),this.transport.on("error",t=>{this.isReady||"function"!=typeof i?this.emit("error",t):i(t)}),this.transport.on("data",t=>{for(let e=0;e<t.length;e++){let i=t[e];if(0!==this.buffer.length||0!==i){this.buffer.push(i);let r=this.buffer[0],n=this.buffer[this.buffer.length-1];if(240===r&&247===n){let t=u[this.buffer[1]];t&&this.versionReceived&&t(this),this.buffer.length=0}else if(240===r&&this.buffer.length>0){let i=t[e];i>127&&(this.buffer.length=0,this.buffer.push(i))}else if(240!==r){let t=r<240?240&r:r;249!==t&&224!==t&&144!==t&&(this.buffer.length=0)}if(3===this.buffer.length&&240!==r){let t=r<240?240&r:r;c[t]?((this.versionReceived||249===r)&&(this.versionReceived=!0,c[t](this)),this.buffer.length=0):this.buffer.length=0}}}}),this.reportVersionTimeoutId=setTimeout(()=>{!1===this.versionReceived&&(this.reportVersion((function(){})),this.queryFirmware((function(){})))},n.reportVersionTimeout),this.once("reportversion",()=>{clearTimeout(this.reportVersionTimeoutId),this.versionReceived=!0,this.once("queryfirmware",()=>{if(void 0!==e.samplingInterval&&this.setSamplingInterval(e.samplingInterval),n.skipCapabilities){if(this.analogPins=n.analogPins||this.analogPins,this.pins=n.pins||this.pins,!this.pins.length)for(var t=0;t<(n.pinCount||128);t++){var i=this.analogPins.indexOf(t);i<0&&(i=127),this.pins.push({supportedModes:[],analogChannel:i})}this.RESOLUTION.ADC=1023,this.RESOLUTION.PWM=255,s()}else this.queryCapabilities(()=>{this.queryAnalogMapping(s)})})})}reportVersion(t){this.once("reportversion",t),f(this,[249])}queryFirmware(t){this.once("queryfirmware",t),f(this,[240,121,247])}analogRead(t,e){this.reportAnalogPin(t,1),this.addListener("analog-read-"+t,e)}pwmWrite(t,e){let i;this.pins[t].value=e,t>15?(i=[240,111,t,127&e,e>>7&127],e>16384&&(i[i.length]=e>>14&127),e>2097152&&(i[i.length]=e>>21&127),e>268435456&&(i[i.length]=e>>28&127),i[i.length]=247):i=[224|t,127&e,e>>7&127],f(this,i)}servoConfig(t,e,i){if("object"==typeof t&&null!==t){let r=t;t=r.pin,e=r.min,i=r.max}if(void 0===t)throw new Error("servoConfig: pin must be specified");if(void 0===e)throw new Error("servoConfig: min must be specified");if(void 0===i)throw new Error("servoConfig: max must be specified");this.pins[t].mode=this.MODES.SERVO,f(this,[240,112,t,127&e,e>>7&127,127&i,i>>7&127,247])}servoWrite(...t){this.analogWrite(...t)}pinMode(t,e){this.pins[t].mode=e,f(this,[244,t,e])}digitalWrite(t,e,i){let r=this.updateDigitalPort(t,e);i?this.digitalPortQueue|=1<<r:this.writeDigitalPort(r)}updateDigitalPort(t,e){const i=t>>3,r=1<<(7&t);return this.pins[t].value=e,e?this.ports[i]|=r:this.ports[i]&=~r,i}flushDigitalPorts(){for(let t=0;t<this.ports.length;t++)this.digitalPortQueue>>t&&this.writeDigitalPort(t);this.digitalPortQueue=0}writeDigitalPort(t){f(this,[144|t,127&this.ports[t],this.ports[t]>>7&127])}digitalRead(t,e){this.reportDigitalPin(t,1),this.addListener("digital-read-"+t,e)}queryCapabilities(t){this.once("capability-query",t),f(this,[240,107,247])}queryAnalogMapping(t){this.once("analog-mapping-query",t),f(this,[240,105,247])}queryPinState(t,e){this.once("pin-state-"+t,e),f(this,[240,109,t,247])}sendString(t){const i=e.from(t+"\0","utf8"),r=[];r.push(240,113);for(let t=0,e=i.length;t<e;t++)r.push(127&i[t],i[t]>>7&127);r.push(247),f(this,r)}sendI2CConfig(t){return this.i2cConfig(t)}i2cConfig(t){let e,i=a.get(this);return i||(i={},a.set(this,i)),"number"==typeof t?e=t:"object"==typeof t&&null!==t&&(e=Number(t.delay),void 0!==t.address&&(i[t.address]||(i[t.address]={stopTX:!0})),void 0!==t.settings&&Object.assign(i[t.address],t.settings)),i.delay=e=e||0,g(this,[240,120,255&e,e>>8&255,247]),this}sendI2CWriteRequest(t,e){const i=[];e=e||[],i.push(240,118,t,this.I2C_MODES.WRITE<<3);for(let t=0,r=e.length;t<r;t++)i.push(127&e[t],e[t]>>7&127);i.push(247),g(this,i)}i2cWrite(t,i,r){const n=[240,118,t,this.I2C_MODES.WRITE<<3];if(3===arguments.length&&!Array.isArray(i)&&!Array.isArray(r))return this.i2cWriteReg(t,i,r);2===arguments.length&&(Array.isArray(i)?(r=i.slice(),i=r.shift()):r=[]);const s=e.from([i].concat(r));for(var o=0,a=s.length;o<a;o++)n.push(127&s[o],s[o]>>7&127);return n.push(247),g(this,n),this}i2cWriteReg(t,e,i){return g(this,[240,118,t,this.I2C_MODES.WRITE<<3,127&e,e>>7&127,127&i,i>>7&127,247]),this}sendI2CReadRequest(t,e,i){g(this,[240,118,t,this.I2C_MODES.READ<<3,127&e,e>>7&127,247]),this.once(`I2C-reply-${t}-0`,i)}i2cRead(t,e,i,r){3===arguments.length&&"number"==typeof e&&"function"==typeof i&&(r=i,i=e,e=null);const n=[240,118,t,this.I2C_MODES.CONTINUOUS_READ<<3];let s=`I2C-reply-${t}-`;return null!==e?n.push(127&e,e>>7&127):e=0,s+=e,n.push(127&i,i>>7&127,247),this.on(s,r),g(this,n),this}i2cStop(t){null!=t&&("number"==typeof t&&(t={address:t}),f(this,[240,118,t.address,this.I2C_MODES.STOP_READING<<3,247]),Object.keys(this._events).forEach(e=>{e.startsWith("I2C-reply-"+t.address)&&this.removeAllListeners(e)}))}i2cReadOnce(t,e,i,r){3===arguments.length&&"number"==typeof e&&"function"==typeof i&&(r=i,i=e,e=null);const n=[240,118,t,this.I2C_MODES.READ<<3];let s=`I2C-reply-${t}-`;return null!==e?n.push(127&e,e>>7&127):e=0,s+=e,n.push(127&i,i>>7&127,247),this.once(s,r),g(this,n),this}sendOneWireConfig(t,e){f(this,[240,115,65,t,e?1:0,247])}sendOneWireSearch(t,e){this[l](64,"1-wire-search-reply-"+t,t,e)}sendOneWireAlarmsSearch(t,e){this[l](68,"1-wire-search-alarms-reply-"+t,t,e)}[l](t,e,i,r){f(this,[240,115,t,i,247]);const n=setTimeout(()=>{r(new Error("1-Wire device search timeout - are you running ConfigurableFirmata?"))},5e3);this.once(e,t=>{clearTimeout(n),r(null,t)})}sendOneWireRead(t,e,i,r){const n=Math.floor(255*Math.random()),s=setTimeout(()=>{r(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[h](t,8,e,i,n,null,null,"1-wire-read-reply-"+n,t=>{clearTimeout(s),r(null,t)})}sendOneWireReset(t){this[h](t,1)}sendOneWireWrite(t,e,i){this[h](t,32,e,null,null,null,Array.isArray(i)?i:[i])}sendOneWireDelay(t,e){this[h](t,16,null,null,null,e)}sendOneWireWriteAndRead(t,e,i,r,n){const s=Math.floor(255*Math.random()),o=setTimeout(()=>{n(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[h](t,40,e,r,s,null,Array.isArray(i)?i:[i],"1-wire-read-reply-"+s,t=>{clearTimeout(o),n(null,t)})}[h](t,e,i,r,n,o,a,l,h){const c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];(i||r||n||o||a)&&(e|=60),i&&c.splice(...[0,8].concat(i)),r&&(c[8]=255&r,c[9]=r>>8&255),n&&(c[10]=255&n,c[11]=n>>8&255),o&&(c[12]=255&o,c[13]=o>>8&255,c[14]=o>>16&255,c[15]=o>>24&255),a&&c.push(...a);f(this,[240,115,e,t,...s.to7BitArray(c),247]),l&&h&&this.once(l,h)}setSamplingInterval(t){const e=t<10?10:t>65535?65535:t;this.settings.samplingInterval=e,f(this,[240,122,127&e,e>>7&127,247])}getSamplingInterval(){return this.settings.samplingInterval}reportAnalogPin(t,e){0!==e&&1!==e||(this.pins[this.analogPins[t]].report=e,f(this,[192|t,e]))}reportDigitalPin(t,e){const i=t>>3;0!==e&&1!==e||(this.pins[t].report=e,f(this,[208|i,e]))}pingRead(t,e){if(!this.pins[t.pin].supportedModes.includes(117))throw new Error("Please upload PingFirmata to the board");const{pin:i,value:r,pulseOut:n=0,timeout:s=1e6}=t;f(this,[240,117,i,r,...p.encode([n>>24&255,n>>16&255,n>>8&255,255&n]),...p.encode([s>>24&255,s>>16&255,s>>8&255,255&s]),247]),this.once("ping-read-"+i,e)}accelStepperConfig(t){let{deviceNum:e,invertPins:i,motorPin1:r,motorPin2:n,motorPin3:s,motorPin4:o,enablePin:a,stepSize:l=this.STEPPER.STEP_SIZE.WHOLE,type:h=this.STEPPER.TYPE.FOUR_WIRE}=t;const c=[240,98,0,e];let u=(7&h)<<4|(7&l)<<1,d=0;void 0!==a&&(u|=1),c.push(u),["stepPin","motorPin1","directionPin","motorPin2","motorPin3","motorPin4","enablePin"].forEach(e=>{void 0!==t[e]&&c.push(t[e])}),Array.isArray(i)&&(i.includes(r)&&(d|=1),i.includes(n)&&(d|=2),i.includes(s)&&(d|=4),i.includes(o)&&(d|=8),i.includes(a)&&(d|=16)),c.push(d,247),f(this,c)}accelStepperZero(t){f(this,[240,98,1,t,247])}accelStepperStep(t,e,i){f(this,[240,98,2,t,...E(e),247]),i&&this.once("stepper-done-"+t,i)}accelStepperTo(t,e,i){f(this,[240,98,3,t,...E(e),247]),i&&this.once("stepper-done-"+t,i)}accelStepperEnable(t,e=!0){f(this,[240,98,4,t,1&e,247])}accelStepperStop(t){f(this,[240,98,5,t,247])}accelStepperReportPosition(t,e){f(this,[240,98,6,t,247]),e&&this.once("stepper-position-"+t,e)}accelStepperAcceleration(t,e){f(this,[240,98,8,t,...y(e),247])}accelStepperSpeed(t,e){f(this,[240,98,9,t,...y(e),247])}multiStepperConfig(t){f(this,[240,98,32,t.groupNum,...t.devices,247])}multiStepperTo(t,e,i){if(t<0||t>5)throw new RangeError(`Invalid "groupNum": ${t}. Expected "groupNum" between 0-5`);f(this,[240,98,33,t,...e.reduce((t,e)=>t.concat(...E(e)),[]),247]),i&&this.once("multi-stepper-done-"+t,i)}multiStepperStop(t){if(t<0||t>5)throw new RangeError(`Invalid "groupNum": ${t}. Expected "groupNum" between 0-5`);f(this,[240,98,35,t,247])}stepperConfig(t,e,i,r,n,s,o){f(this,[240,114,0,t,e,127&i,i>>7&127,r,n,...e===this.STEPPER.TYPE.FOUR_WIRE?[s,o]:[],247])}stepperStep(t,e,i,r,n,s,o){"function"==typeof n&&(o=n,n=0,s=0),f(this,[240,114,1,t,e,127&i,i>>7&127,i>>14&127,127&r,r>>7&127,...n>0||s>0?[127&n,n>>7&127,127&s,s>>7&127]:[],247]),o&&this.once("stepper-done-"+t,o)}serialConfig(t){let e,i,r,n;if("object"==typeof t&&null!==t&&(e=t.portId,i=t.baud,r=t.rxPin,n=t.txPin),void 0===e)throw new Error("portId must be specified, see SERIAL_PORT_IDs for options.");i=i||57600;const s=[240,96,16|e,127&i,i>>7&127,i>>14&127];if(e>7&&void 0!==r&&void 0!==n)s.push(r,n);else if(e>7)throw new Error("Both RX and TX pins must be defined when using Software Serial.");s.push(247),f(this,s)}serialWrite(t,e){const i=[240,96,32|t];for(let t=0,r=e.length;t<r;t++)i.push(127&e[t],e[t]>>7&127);i.push(247),e.length>0&&f(this,i)}serialRead(t,e,i){const r=[240,96,48|t,this.SERIAL_MODES.CONTINUOUS_READ];2===arguments.length&&"function"==typeof e?i=e:r.push(127&e,e>>7&127),r.push(247),f(this,r),this.on("serial-data-"+t,i)}serialStop(t){f(this,[240,96,48|t,this.SERIAL_MODES.STOP_READING,247]),this.removeAllListeners("serial-data-"+t)}serialClose(t){f(this,[240,96,80|t,247])}serialFlush(t){f(this,[240,96,96|t,247])}serialListen(t){t<8||f(this,[240,96,112|t,247])}sysexResponse(t,e){if(p.SYSEX_RESPONSE[t])throw new Error(t+" is not an available SYSEX_RESPONSE byte");return p.SYSEX_RESPONSE[t]=t=>e.call(t,t.buffer.slice(2,-1)),this}clearSysexResponse(t){p.SYSEX_RESPONSE[t]&&delete p.SYSEX_RESPONSE[t]}sysexCommand(t){if(!t||!t.length)throw new Error("Sysex Command cannot be empty");return f(this,[240,...t.slice(),247]),this}reset(){f(this,[255])}static isAcceptablePort(t){return!!/usb|acm|^com/i.test(t.path)}static requestPort(t){!d||d&&"function"!=typeof d.list?r.nextTick(()=>{t(new Error("No Transport provided"),null)}):d.list().then(e=>{const i=e.find(t=>p.isAcceptablePort(t)&&t);i?t(null,i):t(new Error("No Acceptable Port Found"),null)}).catch(e=>{t(e,null)})}static encode(t){const e=[],i=t.length;for(let r=0;r<i;r++)e.push(127&t[r],t[r]>>7&127);return e}static decode(t){const e=[];if(t.length%2!=0)throw new Error("Firmata.decode(data) called with odd number of data bytes");for(;t.length;){const i=t.shift(),r=t.shift();e.push(i|r<<7)}return e}}function f(t,i){t.pending++,t.transport.write(e.from(i),()=>t.pending--)}function g(t,e){const i=a.get(t);if(!i)throw new Error("I2C is not enabled for this board. To enable, call the i2cConfig() method.");if(118===e[1]){const t=e[2];i[t]||(i[t]={stopTX:!0}),24&e[3]&&(e[3]|=Number(!i[t].stopTX)<<6)}f(t,e)}function E(t){const e=t<0,i=[127&(t=Math.abs(t)),t>>7&127,t>>14&127,t>>21&127,t>>28&7];return e&&(i[i.length-1]|=8),i}function m(t){let e=127&t[0]|(127&t[1])<<7|(127&t[2])<<14|(127&t[3])<<21|(7&t[4])<<28;return t[4]>>3&&(e*=-1),e}p.prototype.analogWrite=p.prototype.pwmWrite,p.Board=p,p.SYSEX_RESPONSE=u,p.MIDI_RESPONSE=c;const v=Math.pow(2,23);function y(t){const e=t<0?1:0;t=Math.abs(t);const i=Math.floor(Math.log10(t));let r=0+i;for(t/=Math.pow(10,i);!Number.isInteger(t)&&t<v;)r-=1,t*=10;for(;t>v;)r+=1,t/=10;r+=11;return[127&(t=Math.trunc(t)),t>>7&127,t>>14&127,t>>21&3|(15&r)<<2|(1&e)<<6]}if(r.env.IS_TEST_MODE){let t=null;p.test={i2cPeripheralSettings:t=>a.get(t),get i2cActive(){return a},set transport(e){t=d,d=e},restoreTransport(){d=t},encode32BitSignedInteger:E,decode32BitSignedInteger:m,encodeCustomFloat:y,decodeCustomFloat:function(t){const e=(t[3]>>2&15)-11,i=t[3]>>6&1;let r=t[0]|t[1]<<7|t[2]<<14|(3&t[3])<<21;return i&&(r*=-1),r*Math.pow(10,e)},writeToTransport:f,symbols:{SYM_sendOneWireRequest:h,SYM_sendOneWireSearch:l}}}const R=function(t){return d=t,p};R.Firmata=p,t.exports=R}).call(this,i(7).Buffer,i(1))},function(t,e,i){"use strict";t.exports={to7BitArray(t){let e=0,i=0;const r=[];for(let n of t)0===e?(r.push(127&n),e++,i=n>>7):(r.push(n<<e&127|i),6===e?(r.push(n>>1),e=0):(e++,i=n>>8-e));return e>0&&r.push(i),r},from7BitArray(t){const e=7*t.length>>3,i=[];for(let r=0;r<e;r++){const e=r<<3,n=e/7>>>0,s=e%7;i[r]=t[n]>>s|t[n+1]<<7-s&255}return i}}},function(t,e,i){(function(e){const r=i(3),n=i(2),{toFixed:s}=i(4),o=new Map,a={MPL3115A2:{requirements:{value:{options:{elevation:{throws:!1,message:"Missing `elevation` option. Without a specified base `elevation`, the altitude measurement will be inaccurate. Use the meters value shown on whatismyelevation.com",typeof:"number"}}}},initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MPL3115A2",t).on("data",({altitude:t})=>e(t))}},toMeters:{writable:!0,value:t=>s(t,1)}},MS5611:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MS5611",t).on("data",({altitude:t})=>e(t))}},toMeters:{writable:!0,value:t=>s(t,2)}},BMP180:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BMP180",t).on("data",({altitude:t})=>e(t))}},toMeters:{writable:!0,value:t=>s(t,2)}},BMP280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BMP280",t).on("data",({altitude:t})=>e(t))}},toMeters:{writable:!0,value:t=>s(t,3)}},BME280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BME280",t).on("data",({altitude:t})=>e(t))}},toMeters:{writable:!0,value:t=>s(t,3)}}};a.BMP085=a["BMP-085"]=a.BMP180;class l extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,a,t);const e=t.freq||25;let i=null,n=null;this.toMeters||(this.toMeters=t.toMeters||(t=>t)),o.set(this,{});const l={meters:{get(){return this.toMeters(n)}},feet:{get(){return s(3.28084*this.meters,2)}}};l.m=l.meters,l.ft=l.feet,Object.defineProperties(this,l),"function"==typeof this.initialize&&this.initialize(t,t=>n=t),setInterval(()=>{if(null==n)return;const t={};t.m=t.meters=this.meters,t.ft=t.feet=this.feet,this.emit("data",t),this.meters!==i&&(i=this.meters,this.emit("change",t))},e)}}e.env.IS_TEST_MODE&&(l.Controllers=a,l.purge=function(){o.clear()}),t.exports=l}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),{toFixed:s}=i(4),o={MPL115A2:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MPL115A2",t).on("data",({pressure:t})=>e(t))}},toPressure:{value:t=>s(65/1023*t+50,2)}},MPL3115A2:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MPL3115A2",t).on("data",({pressure:t})=>e(t))}},toPressure:{value:t=>s(3.39*(t/4/3377),4)}},BMP180:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BMP180",t).on("data",({pressure:t})=>e(t))}},toPressure:{value:t=>s(t/1e3,3)}},BMP280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BMP280",t).on("data",({pressure:t})=>e(t))}},toPressure:{value:t=>s(t/1e3,5)}},BME280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BME280",t).on("data",({pressure:t})=>e(t))}},toPressure:{value:t=>s(t/1e3,5)}},MS5611:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MS5611",t).on("data",({pressure:t})=>e(t))}},toPressure:{value:t=>s(t/1e3,4)}}};o.BMP085=o.BMP180;class a extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,o,t);const e=t.freq||25;let i=null,n=null;this.toPressure||(this.toPressure=t.toPressure||(t=>t)),"function"==typeof this.initialize&&this.initialize(t,t=>{n=t}),Object.defineProperties(this,{pressure:{get(){return this.toPressure(n)}}}),setInterval(()=>{if(null===n)return;const t={pressure:this.pressure};this.emit("data",t),this.pressure!==i&&(i=this.pressure,this.emit("change",t))},e)}}e.env.IS_TEST_MODE&&(a.Controllers=o,a.purge=function(){}),t.exports=a}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(4),o=s.sum,a=s.toFixed,l=new Map,h=["x","y","z"],c={ANALOG:{initialize:{value(t,e){const i=t.pins||[];let r,n;const s=l.get(this),o={};if(void 0===t.sensitivity)throw new Error("Expected a Sensitivity");r=t.sensitivity,n=t.resolution||4.88,s.K=n/r,i.forEach((function(t,i){this.io.pinMode(t,this.io.MODES.ANALOG),this.io.analogRead(t,t=>{o[h[i]]=t,e(o)})}),this)}},toNormal:{value:t=>t>>2},toDegreesPerSecond:{value(t,e){return(this.toNormal(t)-this.toNormal(e))*l.get(this).K|0}}},MPU6050:{initialize:{value(t,e){const r=i(0),n=l.get(this),s=r.Drivers.get(this.board,"MPU6050",t);n.sensitivity=t.sensitivity||131,s.on("data",({gyro:t})=>{e(t)})}},toNormal:{value:t=>127+(t>>11)},toDegreesPerSecond:{value(t,e){const i=l.get(this);return a((t-e)/i.sensitivity,4)}}},BNO055:{initialize:{value(t,e){const r=i(0),n=l.get(this),s=r.Drivers.get(this.board,"BNO055",t);n.sensitivity=16,s.on("data",({gyro:t})=>{e(t)})}},toNormal:{value:t=>t},toDegreesPerSecond:{value(t){const e=l.get(this);return a(t/e.sensitivity,4)}}}};c.DEFAULT=c.ANALOG;class u extends n{constructor(t){super();let e=!1;const i={x:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},y:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},z:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1}};r.Component.call(this,t=r.Options(t)),r.Controller.call(this,c,t),this.toNormal||(this.toNormal=t.toNormal||(t=>t)),this.toDegreesPerSecond||(this.toDegreesPerSecond=t.toDegreesPerSecond||(t=>t)),l.set(this,i),"function"==typeof this.initialize&&this.initialize(t,t=>{let r=!1;Object.keys(t).forEach(n=>{const s=t[n],a=i[n];a.previous=a.value,a.stash.shift(),a.stash.push(s),a.hasValue=!0,a.value=o(a.stash)/5|0,e||100!==i.x.calibration.length||100!==i.y.calibration.length||void 0!==this.z&&100!==i.z.calibration.length?a.calibration.length<100&&a.calibration.push(s):(e=!0,i.x.center=o(i.x.calibration)/100|0,i.y.center=o(i.y.calibration)/100|0,i.z.center=o(i.z.calibration)/100|0,i.x.calibration.length=0,i.y.calibration.length=0,i.z.calibration.length=0),a.previous!==a.value&&(r=!0)}),e&&(i.x.angle+=this.rate.x/100,i.y.angle+=this.rate.y/100,i.z.angle+=this.rate.z/100,this.emit("data",{x:this.x,y:this.y,z:this.z}),r&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{isCalibrated:{get:()=>e,set(t){"boolean"==typeof t&&(e=t)}},pitch:{get(){return{rate:a(this.rate.y,2),angle:a(i.y.angle,2)}}},roll:{get(){return{rate:a(this.rate.x,2),angle:a(i.x.angle,2)}}},yaw:{get(){return{rate:void 0!==this.z?a(this.rate.z,2):0,angle:void 0!==this.z?a(i.z.angle,2):0}}},x:{get(){return a(this.toNormal(i.x.value),4)}},y:{get(){return a(this.toNormal(i.y.value),4)}},z:{get(){return i.z.hasValue?a(this.toNormal(i.z.value),4):void 0}},rate:{get(){return{x:this.toDegreesPerSecond(i.x.value,i.x.center),y:this.toDegreesPerSecond(i.y.value,i.y.center),z:i.z.hasValue?this.toDegreesPerSecond(i.z.value,i.z.center):0}}}})}recalibrate(){this.isCalibrated=!1}}Object.defineProperties(u,{TK_4X:{value:.67},TK_1X:{value:.167}}),e.env.IS_TEST_MODE&&(u.Controllers=c,u.purge=()=>{l.clear()}),t.exports=u}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(4),o=new Map,{toFixed:a,POW_2_14:l,POW_2_16:h}=s,c={SHT31D:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"SHT31D",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>a(t/(h-1)*100,2)}},HTU21D:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"HTU21D",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>a(t/h*125-6,2)}},HIH6130:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"HIH6130",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>a(t/(l-1)*100,2)}},DHT_I2C_NANO_BACKPACK:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"DHT_I2C_NANO_BACKPACK",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>a(t/100,1)}},TH02:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"TH02",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>(t>100&&(t=0),a(t||0,2))}},SI7020:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"SI7020",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>a(125*t/h-6,2)}},BME280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BME280",t).on("data",({humidity:t})=>e(t))}},toRelativeHumidity:{writable:!0,value:t=>a(t/1024,3)}}};c.DHT11_I2C_NANO_BACKPACK=c.DHT_I2C_NANO_BACKPACK,c.DHT21_I2C_NANO_BACKPACK=c.DHT_I2C_NANO_BACKPACK,c.DHT22_I2C_NANO_BACKPACK=c.DHT_I2C_NANO_BACKPACK,c.SI7021=c.SI7020;class u extends n{constructor(t){super();const e=t.freq||25;let i=null,n=null;r.Component.call(this,t=r.Options(t)),r.Controller.call(this,c,t),o.set(this,{}),this.toRelativeHumidity||(this.toRelativeHumidity=t.toRelativeHumidity||(t=>t));const s={relativeHumidity:{get(){return this.toRelativeHumidity(n)}}};s.RH=s.relativeHumidity,Object.defineProperties(this,s),"function"==typeof this.initialize&&this.initialize(t,t=>{n=t}),setInterval(()=>{if(null==n)return;if(Number.isNaN(this.relativeHumidity))return;const t={};t.RH=t.relativeHumidity=this.relativeHumidity,this.emit("data",t),this.relativeHumidity!==i&&(i=this.relativeHumidity,this.emit("change",t))},e)}}e.env.IS_TEST_MODE&&(u.Controllers=c,u.purge=()=>{o.clear()}),t.exports=u}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),{int16:s,RAD_TO_DEG:o,TAU:a}=i(4),l=new Map,h={HMC5883L:{REGISTER:{value:{CRA:0,CRB:1,MODE:2,READ:3}},initialize:{value(t,e){const i=l.get(this),r=t.address||30;i.scale=1,Object.assign(i,new c.Scale(t.gauss||.88)),t.address=r,this.io.i2cConfig(t),this.io.i2cWrite(r,this.REGISTER.CRA,112),this.io.i2cWrite(r,this.REGISTER.CRB,64),this.io.i2cWrite(r,this.REGISTER.MODE,0),this.io.i2cRead(r,this.REGISTER.READ,6,t=>{e({x:s(t[0],t[1]),y:s(t[4],t[5]),z:s(t[2],t[3])})})}},toScaledHeading:{value({x:t,y:e}){const i=l.get(this);return u(t*i.scale,e*i.scale)}}},HMC6352:{REGISTER:{value:{READ:65}},initialize:{value(t,e){const i=l.get(this),r=t.address||33;i.scale=1,t.delay=10,t.address=r,this.io.i2cConfig(t),this.io.i2cWrite(r,this.REGISTER.READ),this.io.i2cRead(r,this.REGISTER.READ,2,t=>{e({x:((t[0]<<8)+t[1])/10|0,y:null,z:null})})}},toScaledHeading:{value({x:t}){return t*l.get(this).scale}}},BNO055:{initialize:{value(t,e){const r=i(0).Drivers.get(this.board,"BNO055",t);l.get(this).sensitivity=16,r.on("data",({magnetometer:t})=>{e(t)})}},toScaledHeading:{value(t){const e=l.get(this);return u(t.x/e.sensitivity,t.y/e.sensitivity)}}},MAG3110:{REGISTER:{value:{STATUS:0,READ:1,OFFSETS:9,CTRL_REG1:16,CTRL_REG2:17}},initialize:{value(t,e){const i=l.get(this);let r,n=!1;i.isCalibrated=!1,i.isPreCalibrated=!1,i.hasEmittedCalibration=!1,i.measurements=20,i.offsets={x:0,y:0,z:0},i.accum={x:{offset:null,high:0,low:0},y:{offset:null,high:0,low:0},z:{offset:null,high:0,low:0}},t.delay=2,t.address=14,t.offsets&&(i.isCalibrated=!0,i.isPreCalibrated=!0,Array.isArray(t.offsets)&&(r=t.offsets.slice(),t.offsets={x:r[0],y:r[1],z:r[2]}),i.accum.x.low=t.offsets.x[0],i.accum.x.high=t.offsets.x[1],i.accum.x.offset=(i.accum.x.low+i.accum.x.high)/2,i.accum.y.low=t.offsets.y[0],i.accum.y.high=t.offsets.y[1],i.accum.y.offset=(i.accum.y.low+i.accum.y.high)/2,i.accum.z.low=t.offsets.z[0],i.accum.z.high=t.offsets.z[1],i.accum.z.offset=(i.accum.z.low+i.accum.z.high)/2),this.io.i2cConfig(t),this.io.i2cWrite(14,this.REGISTER.CTRL_REG2,128),this.io.i2cWrite(14,this.REGISTER.CTRL_REG1,1);const o={x:0,y:0,z:0},a=()=>{this.io.i2cReadOnce(14,this.REGISTER.STATUS,1,t=>{n||15!==t[0]&&255!==t[0]?a():(n=!0,this.io.i2cReadOnce(14,this.REGISTER.READ,6,t=>{let r=0;n=!1,o.x=s(t[0],t[1]),o.y=s(t[2],t[3]),o.z=s(t[4],t[5]),i.isCalibrated||(null===i.accum.x.offset&&(i.accum.x.offset=o.x,i.accum.x.low=o.x,i.accum.x.high=o.x),null===i.accum.y.offset&&(i.accum.y.offset=o.y,i.accum.y.low=o.y,i.accum.y.high=o.y),i.accum.x.low=Math.min(i.accum.x.low,o.x),i.accum.x.high=Math.max(i.accum.x.high,o.x),i.accum.x.offset=Math.trunc((i.accum.x.low+i.accum.x.high)/2),i.accum.y.low=Math.min(i.accum.y.low,o.y),i.accum.y.high=Math.max(i.accum.y.high,o.y),i.accum.y.offset=Math.trunc((i.accum.y.low+i.accum.y.high)/2),i.accum.z.low=Math.min(i.accum.z.low,o.z),i.accum.z.high=Math.max(i.accum.z.high,o.z),i.accum.z.offset=Math.trunc((i.accum.z.low+i.accum.z.high)/2),--i.measurements,i.measurements||(i.isCalibrated=!0)),i.isCalibrated&&(i.hasEmittedCalibration||(i.hasEmittedCalibration=!0,i.offsets.x=i.accum.x.offset,i.offsets.y=i.accum.y.offset,i.offsets.z=i.accum.z.offset,this.io.i2cWrite(14,this.REGISTER.OFFSETS,[i.offsets.x>>7,i.offsets.x<<1&255,i.offsets.y>>7,i.offsets.y<<1&255,i.offsets.z>>7,i.offsets.z<<1&255]),this.emit("calibrated",{x:[i.accum.x.low,i.accum.x.high],y:[i.accum.y.low,i.accum.y.high],z:[i.accum.z.low,i.accum.z.high]})),r=Math.floor(12.5),e(o)),setTimeout(a,r)}))})};a()}},calibrate:{value(t){const e=l.get(this);e.isCalibrated=!1,e.measurements=t}},toScaledHeading:{value({y:t,x:e}){const i=l.get(this),r=1/(i.accum.x.high-i.accum.x.low),n=1/(i.accum.y.high-i.accum.y.low);let s=Math.atan2(-t*n,e*r);return s<0&&(s+=a),Math.trunc(s*o)}}},LSM303C:{initialize:{value(t,e){i(0).Drivers.get(this.board,"LSM303C",t).on("data",({magnetometer:t})=>{e(t)})}},toScaledHeading:{value:({x:t,y:e})=>u(t,e)}}};class c extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t));const e=t.freq||25;let i={x:null,y:null,z:null};const n={x:0,y:0,z:0,scale:0,register:0,heading:0};r.Controller.call(this,h,t),this.toScaledHeading||(this.toScaledHeading=t.toScaledHeading||(t=>t)),l.set(this,n),"function"==typeof this.initialize&&this.initialize(t,t=>i=t),setInterval(()=>{if(null===i.x)return;let t=!1;n.x=i.x,n.y=i.y,n.z=i.z;const e=this.heading;e!==n.heading&&(n.heading=e,t=!0),this.emit("data",{heading:e}),t&&this.emit("change",{heading:e})},e),Object.defineProperties(this,{bearing:{get(){const t=c.Points.length,e=this.heading;let i;for(let r=0;r<t;r++)if(i=c.Points[r],e>=i.low&&e<=i.high)return{name:i.name,abbr:i.abbr,low:i.low,high:i.high,heading:e}}},raw:{get:()=>({x:i.x,y:i.y,z:i.z})},heading:{get(){return this.toScaledHeading(i)}}})}}function u(t,e){let i=Math.atan2(e,t);return i<0&&(i+=a),i>a&&(i-=a),i*o}c.Scale=class{constructor(t){.88===t?(this.register=0,this.scale=.73):1.3===t?(this.register=1,this.scale=.92):1.9===t?(this.register=2,this.scale=1.22):2.5===t?(this.register=3,this.scale=1.52):4===t?(this.register=4,this.scale=2.27):4.7===t?(this.register=5,this.scale=2.56):5.6===t?(this.register=6,this.scale=3.03):8.1===t?(this.register=7,this.scale=4.35):(this.register=0,this.scale=1),this.register=this.register<<5}},c.Points=[{name:"North",abbr:"N",low:354.38,high:360},{name:"North",abbr:"N",low:0,high:5.62},{name:"North by East",abbr:"NbE",low:5.63,high:16.87},{name:"North-NorthEast",abbr:"NNE",low:16.88,high:28.12},{name:"NorthEast by North",abbr:"NEbN",low:28.13,high:39.37},{name:"NorthEast",abbr:"NE",low:39.38,high:50.62},{name:"NorthEast by East",abbr:"NEbE",low:50.63,high:61.87},{name:"East-NorthEast",abbr:"ENE",low:61.88,high:73.12},{name:"East by North",abbr:"EbN",low:73.13,high:84.37},{name:"East",abbr:"E",low:84.38,high:95.62},{name:"East by South",abbr:"EbS",low:95.63,high:106.87},{name:"East-SouthEast",abbr:"ESE",low:106.88,high:118.12},{name:"SouthEast by East",abbr:"SEbE",low:118.13,high:129.37},{name:"SouthEast",abbr:"SE",low:129.38,high:140.62},{name:"SouthEast by South",abbr:"SEbS",low:140.63,high:151.87},{name:"South-SouthEast",abbr:"SSE",low:151.88,high:163.12},{name:"South by East",abbr:"SbE",low:163.13,high:174.37},{name:"South",abbr:"S",low:174.38,high:185.62},{name:"South by West",abbr:"SbW",low:185.63,high:196.87},{name:"South-SouthWest",abbr:"SSW",low:196.88,high:208.12},{name:"SouthWest by South",abbr:"SWbS",low:208.13,high:219.37},{name:"SouthWest",abbr:"SW",low:219.38,high:230.62},{name:"SouthWest by West",abbr:"SWbW",low:230.63,high:241.87},{name:"West-SouthWest",abbr:"WSW",low:241.88,high:253.12},{name:"West by South",abbr:"WbS",low:253.13,high:264.37},{name:"West",abbr:"W",low:264.38,high:275.62},{name:"West by North",abbr:"WbN",low:275.63,high:286.87},{name:"West-NorthWest",abbr:"WNW",low:286.88,high:298.12},{name:"NorthWest by West",abbr:"NWbW",low:298.13,high:309.37},{name:"NorthWest",abbr:"NW",low:309.38,high:320.62},{name:"NorthWest by North",abbr:"NWbN",low:320.63,high:331.87},{name:"North-NorthWest",abbr:"NNW",low:331.88,high:343.12},{name:"North by West",abbr:"NbW",low:343.13,high:354.37}],Object.freeze(c.Points),e.env.IS_TEST_MODE&&(c.Controllers=h,c.purge=()=>{l.clear()}),t.exports=c}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),s=new Map,o={BNO055:{initialize:{value(t,e){i(0).Drivers.get(this.board,"BNO055",t).on("data",t=>{e(t)})}},toScaledEuler:{value:({euler:t})=>({heading:t.heading/16,roll:t.roll/16,pitch:t.pitch/16})},toScaledQuarternion:{value:({quarternion:t})=>({w:t.w*(1/16384),x:t.x*(1/16384),y:t.y*(1/16384),z:t.z*(1/16384)})},calibration:{get(){return s.get(this).calibration}},isCalibrated:{get(){return 3==(this.calibration>>6&3)}}}};class a extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,o,t);const e=t.freq||25,i={euler:{heading:0,roll:0,pitch:0},quarternion:{w:0,x:0,y:0,z:0},calibration:0};let n=null;s.set(this,i),this.toScaledQuarternion||(this.toScaledQuarternion=t.toScaledQuarternion||(t=>t)),this.toScaledEuler||(this.toScaledEuler=t.toScaledEuler||(t=>t)),"function"==typeof this.initialize&&this.initialize(t,t=>n=t),setInterval(()=>{if(null===n)return;let t=!1,e=!1;["heading","roll","pitch"].forEach(e=>{i.euler[e]!==n.orientation.euler[e]&&(t=!0),i.euler[e]=n.orientation.euler[e]}),["w","x","y","z"].forEach(e=>{i.quarternion[e]!==n.orientation.quarternion[e]&&(t=!0),i.quarternion[e]=n.orientation.quarternion[e]}),n.calibration&&(i.calibration!==n.calibration&&(e=!0),i.calibration=n.calibration);const r={euler:this.euler,quarternion:this.quarternion,calibration:this.calibration};this.emit("data",r),t&&this.emit("change",r),e&&this.emit("calibration",this.calibration)},e)}get euler(){return this.toScaledEuler(s.get(this))}get quarternion(){return this.toScaledQuarternion(s.get(this))}}e.env.IS_TEST_MODE&&(a.Controllers=o,a.purge=()=>{s.clear()}),t.exports=a}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(15),{toFixed:o,POW_2_16:a}=i(4),{log:l,round:h,trunc:c}=Math;function u(t,e){const i=t.pin;this.io.pinMode(i,this.io.MODES.ANALOG),this.io.analogRead(i,t=>{e.call(this,t)})}const d=new Map,p={MAX31850K:{initialize:{value(t,e){const i=59,r=68,n=190,s=9,o=e.pin,a=e.freq||100,l=t=>{let e=0;for(let i=6;i>0;i--)e=256*e+t[i];return e};t.io.sendOneWireConfig(o,!0),t.io.sendOneWireSearch(o,(e,h)=>{if(e)return void this.emit("error",e);if(this.devices=h.filter(t=>t[0]===i,this),0===h.length)return void this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));this.devices.forEach(t=>{this.emit("initialized",l(t))});let c=()=>this.addresses?this.devices.filter((function(t){const e=l(t);return this.addresses.includes(e)}),this):[this.devices[0]],u=()=>{let e,i=c(),h=c();h.forEach(e=>{t.io.sendOneWireReset(o),t.io.sendOneWireWrite(o,e,r)});let d=e=>{let r;if(0===i.length)return e();r=i.pop(),t.io.sendOneWireReset(o),t.io.sendOneWireWriteAndRead(o,r,n,s,(t,n)=>{if(!n[0]&&(i.push(r),0!==n[1]))return e();d(e)})},p=()=>{let i;0!==h.length?(i=h.pop(),t.io.sendOneWireReset(o),t.io.sendOneWireWriteAndRead(o,i,n,s,(t,r)=>{t?this.emit("error",t):(e=r[1]<<8|r[0],this.emit("data",l(i),e),p())})):setTimeout(u,a)};d(p)};u()})}},register:{value(t){this.addresses||(this.addresses=[]),this.addresses.push(t)}}},DS18B20:{initialize:{value(t,e){const i=40,r=68,n=190,s=2,o=e.pin,a=e.freq||100;let l,h,c;l=t=>{let e,i=0;for(e=6;e>0;e--)i=256*i+t[e];return i},t.io.sendOneWireConfig(o,!0),t.io.sendOneWireSearch(o,(e,u)=>{e?this.emit("error",e):(this.devices=u.filter(t=>t[0]===i,this),0!==u.length?(this.devices.forEach(t=>{this.emit("initialized",l(t))}),h=()=>{let e,i;e=this.addresses?this.devices.filter((function(t){const e=l(t);return this.addresses.includes(e)}),this):[this.devices[0]],e.forEach(e=>{t.io.sendOneWireReset(o),t.io.sendOneWireWrite(o,e,r)}),t.io.sendOneWireDelay(o,1),c=()=>{let r;0!==e.length?(r=e.pop(),t.io.sendOneWireReset(o),t.io.sendOneWireWriteAndRead(o,r,n,s,(t,e)=>{t?this.emit("error",t):(i=e[1]<<8|e[0],this.emit("data",l(r),i),c())})):setTimeout(h,a)},c()},h()):this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE")))})}},register:{value(t){this.addresses||(this.addresses=[]),this.addresses.push(t)}}},get:(t,e,i)=>{let r,s;d.has(t)||d.set(t,{}),r=d.get(t);const o=`${e}_${i.pin}`;return r[o]||(s=new n,Object.defineProperties(s,p[e]),s.initialize(t,i),r[o]=s),r[o]},clear:()=>{d.clear()}},f={ANALOG:{initialize:{value:u}},LM35:{initialize:{value:u},toCelsius:{value(t){const e=1e3*this.aref*t/1023;return h(e/10)}}},LM335:{initialize:{value:u},toCelsius:{value(t){const e=1e3*this.aref*t/1023;return h(e/10-273.15)}}},TMP36:{initialize:{value:u},toCelsius:{value(t){const e=1e3*this.aref*t/1023;return h(e/10-50)}}},TMP102:{ADDRESSES:{value:[72]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cRead(n,0,2,t=>{let i=(t[0]<<8|t[1])>>4;2048&i&&(i|=63488),i=i>>15?-1*(1+(65535^i)):i,e(i)})}},toCelsius:{value:t=>o(t/16,1)}},MAX31850K:{initialize:{value(t,e){const i=g.get(this),r=t.address,n=p.get(this.board,"MAX31850K",t);r?(i.address=r,n.register(r)):(n.addressless&&this.emit("error","You cannot have more than one MAX31850K without an address"),n.addressless=!0),n.once("initialized",t=>{i.address||(i.address=t)}),n.on("data",(t,i)=>{r&&t!==r||e(i)})}},toCelsius:{value:t=>o(t/16,2)},address:{get(){return g.get(this).address||0}}},DS18B20:{initialize:{value(t,e){const i=g.get(this),r=t.address,n=p.get(this.board,"DS18B20",t);r?(i.address=r,n.register(r)):(n.addressless&&this.emit("error","You cannot have more than one DS18B20 without an address"),n.addressless=!0),n.once("initialized",t=>{i.address||(i.address=t)}),n.on("data",(t,i)=>{r&&t!==r||e(i)})}},toCelsius:{value:t=>o(t/16,4)},address:{get(){return g.get(this).address||0}}},SHT31D:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"SHT31D",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t/(a-1)*175-45,3)}},HTU21D:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"HTU21D",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t/a*175.72-46.85,2)}},HIH6130:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"HIH6130",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>h(t/1e3)}},DHT_I2C_NANO_BACKPACK:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"DHT_I2C_NANO_BACKPACK",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>h(t/100)}},TH02:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"TH02",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t,1)}},MPU6050:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MPU6050",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>h(t/340+36.53)}},BNO055:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BNO055",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>c(t)}},MPL115A2:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MPL115A2",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>c((t-498)/-5.35+25)}},MPL3115A2:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MPL3115A2",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>h(t/16)}},MS5611:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"MS5611",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t,2)}},GROVE:{initialize:{value:u},toCelsius:{value(t){const e=1/(l(1e4*(1023-t)/t/1e4)/3975+1/298.15)-273.15;return h(e)}}},TINKERKIT:{initialize:{value:u},toCelsius:{value(t){const e=3950/l(120.6685*(1e4*(1023/t-1)));return h(e-273.15)}}},BMP180:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BMP180",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t,1)}},BMP280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BMP280",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t,2)}},BME280:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"BME280",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t,2)}},SI7020:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"SI7020",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(175.72*t/65536-46.85,1)}},MCP9808:{ADDRESSES:{value:[24]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cRead(n,5,2,t=>{let i=(4095&(t[0]<<8|t[1]))/16;4096&i&&(i-=256),e(i)})}},toCelsius:{value:t=>o(t,2)}},LSM303C:{initialize:{value(t,e){const{Drivers:r}=i(0);r.get(this.board,"LSM303C",t).on("data",({temperature:t})=>e(t))}},toCelsius:{value:t=>o(t/8+25,1)}}};f.BMP085=f.BMP180,f.GY521=f.MPU6050,f.SI7021=f.SI7020,f.DHT11_I2C_NANO_BACKPACK=f.DHT_I2C_NANO_BACKPACK,f.DHT21_I2C_NANO_BACKPACK=f.DHT_I2C_NANO_BACKPACK,f.DHT22_I2C_NANO_BACKPACK=f.DHT_I2C_NANO_BACKPACK,f.DEFAULT=f.ANALOG;var g=new Map;class E extends s{constructor(t){super();let e=null,i=null;r.Component.call(this,t=r.Options(t)),r.Controller.call(this,f,t);const n={enabled:void 0===t.enabled||t.enabled,intervalId:null,freq:t.freq||25,previousFreq:t.freq||25};g.set(this,n),this.aref=t.aref||this.io.aref||5,this.toCelsius||(this.toCelsius=t.toCelsius||(t=>t));const s=()=>{if(null==i)return;const t={};t.C=t.celsius=this.celsius,t.F=t.fahrenheit=this.fahrenheit,t.K=t.kelvin=this.kelvin,this.emit("data",t),this.celsius!==e&&(e=this.celsius,this.emit("change",t))},a={celsius:{get(){return this.toCelsius(i)}},fahrenheit:{get(){return o(9*this.celsius/5+32,2)}},kelvin:{get(){return o(this.celsius+273.15,2)}},freq:{get:()=>n.freq,set(t){n.freq=t,n.intervalId&&clearInterval(n.intervalId),null!==n.freq&&(n.intervalId=setInterval(s,t))}}};a.C=a.celsius,a.F=a.fahrenheit,a.K=a.kelvin,Object.defineProperties(this,a),"function"==typeof this.initialize&&this.initialize(t,t=>i=t),n.enabled&&(this.freq=n.freq)}enable(){const t=g.get(this);return t.enabled||(this.freq=t.freq||t.previousFreq),this}disable(){const t=g.get(this);return t.enabled&&(t.enabled=!1,t.previousFreq=t.freq,this.freq=null),this}}E.Drivers=p,e.env.IS_TEST_MODE&&(E.Controllers=f,E.purge=()=>{g.clear()}),t.exports=E}).call(this,i(1))},function(t,e,i){var r=i(88),n={};for(var s in r)r.hasOwnProperty(s)&&(n[r[s].join()]=s);var o=t.exports={rgb:{channels:3},hsl:{channels:3},hsv:{channels:3},hwb:{channels:3},cmyk:{channels:4},xyz:{channels:3},lab:{channels:3},lch:{channels:3},hex:{channels:1},keyword:{channels:1},ansi16:{channels:1},ansi256:{channels:1},hcg:{channels:3}};for(var a in o)if(o.hasOwnProperty(a)){if(!("channels"in o[a]))throw new Error("missing channels property: "+a);var l=o[a].channels;delete o[a].channels,Object.defineProperty(o[a],"channels",{value:l})}o.rgb.hsl=function(t){var e,i,r=t[0]/255,n=t[1]/255,s=t[2]/255,o=Math.min(r,n,s),a=Math.max(r,n,s),l=a-o;return a===o?e=0:r===a?e=(n-s)/l:n===a?e=2+(s-r)/l:s===a&&(e=4+(r-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(o+a)/2,[e,100*(a===o?0:i<=.5?l/(a+o):l/(2-a-o)),100*i]},o.rgb.hsv=function(t){var e,i,r=t[0],n=t[1],s=t[2],o=Math.min(r,n,s),a=Math.max(r,n,s),l=a-o;return i=0===a?0:l/a*1e3/10,a===o?e=0:r===a?e=(n-s)/l:n===a?e=2+(s-r)/l:s===a&&(e=4+(r-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,a/255*1e3/10]},o.rgb.hwb=function(t){var e=t[0],i=t[1],r=t[2];return[o.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(i,r))),100*(r=1-1/255*Math.max(e,Math.max(i,r)))]},o.rgb.cmyk=function(t){var e,i=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-r,1-n)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-n-e)/(1-e)||0),100*e]},o.rgb.keyword=function(t){return n[t.join()]},o.keyword.rgb=function(t){return r[t]},o.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*i+.0722*r),100*(.0193*e+.1192*i+.9505*r)]},o.rgb.lab=function(t){var e=o.rgb.xyz(t),i=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(i-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.hsl.rgb=function(t){var e,i,r,n,s,o=t[0]/360,a=t[1]/100,l=t[2]/100;if(0===a)return[s=255*l,s,s];e=2*l-(i=l<.5?l*(1+a):l+a-l*a),n=[0,0,0];for(var h=0;h<3;h++)(r=o+1/3*-(h-1))<0&&r++,r>1&&r--,s=6*r<1?e+6*(i-e)*r:2*r<1?i:3*r<2?e+(i-e)*(2/3-r)*6:e,n[h]=255*s;return n},o.hsl.hsv=function(t){var e=t[0],i=t[1]/100,r=t[2]/100;return 0===r?[0,0,0]:[e,100*(2*(i*=(r*=2)<=1?r:2-r)/(r+i)),100*((r+i)/2)]},o.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,r=t[2]/100,n=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-i),a=255*r*(1-i*s),l=255*r*(1-i*(1-s));switch(r*=255,n){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}},o.hsv.hsl=function(t){var e,i,r=t[0],n=t[1]/100,s=t[2]/100;return e=n*s,[r,100*(e=(e/=(i=(2-n)*s)<=1?i:2-i)||0),100*(i/=2)]},o.hwb.rgb=function(t){var e,i,r,n,s,o,a,l=t[0]/360,h=t[1]/100,c=t[2]/100,u=h+c;switch(u>1&&(h/=u,c/=u),r=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(r=1-r),n=h+r*((i=1-c)-h),e){default:case 6:case 0:s=i,o=n,a=h;break;case 1:s=n,o=i,a=h;break;case 2:s=h,o=i,a=n;break;case 3:s=h,o=n,a=i;break;case 4:s=n,o=h,a=i;break;case 5:s=i,o=h,a=n}return[255*s,255*o,255*a]},o.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n=t[3]/100;return[255*(1-Math.min(1,e*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n))]},o.xyz.rgb=function(t){var e,i,r,n=t[0]/100,s=t[1]/100,o=t[2]/100;return i=-.9689*n+1.8758*s+.0415*o,r=.0557*n+-.204*s+1.057*o,e=(e=3.2406*n+-1.5372*s+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1))]},o.xyz.lab=function(t){var e=t[0],i=t[1],r=t[2];return i/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.lab.xyz=function(t){var e,i,r,n,s=t[0],o=t[1],a=t[2];return s<=8?n=(i=100*s/903.3)/100*7.787+16/116:(i=100*Math.pow((s+16)/116,3),n=Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(o/500+n-16/116)/7.787:95.047*Math.pow(o/500+n,3),i,r=r/108.883<=.008859?r=108.883*(n-a/200-16/116)/7.787:108.883*Math.pow(n-a/200,3)]},o.lab.lch=function(t){var e,i=t[0],r=t[1],n=t[2];return(e=360*Math.atan2(n,r)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(r*r+n*n),e]},o.lch.lab=function(t){var e,i=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[i,r*Math.cos(e),r*Math.sin(e)]},o.rgb.ansi16=function(t){var e=t[0],i=t[1],r=t[2],n=1 in arguments?arguments[1]:o.rgb.hsv(t)[2];if(0===(n=Math.round(n/50)))return 30;var s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===n&&(s+=60),s},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){var e=t[0],i=t[1],r=t[2];return e===i&&i===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},o.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},o.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}/i);if(!e)return[0,0,0];var i=parseInt(e[0],16);return[i>>16&255,i>>8&255,255&i]},o.rgb.hcg=function(t){var e,i=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(Math.max(i,r),n),o=Math.min(Math.min(i,r),n),a=s-o;return e=a<=0?0:s===i?(r-n)/a%6:s===r?2+(n-i)/a:4+(i-r)/a+4,e/=6,[360*(e%=1),100*a,100*(a<1?o/(1-a):0)]},o.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=1,n=0;return(r=i<.5?2*e*i:2*e*(1-i))<1&&(n=(i-.5*r)/(1-r)),[t[0],100*r,100*n]},o.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=e*i,n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],100*r,100*n]},o.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100;if(0===i)return[255*r,255*r,255*r];var n,s=[0,0,0],o=e%1*6,a=o%1,l=1-a;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return n=(1-i)*r,[255*(i*s[0]+n),255*(i*s[1]+n),255*(i*s[2]+n)]},o.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),r=0;return i>0&&(r=e/i),[t[0],100*r,100*i]},o.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[t[0],100*r,100*i]}},function(t,e,i){const r=i(46);r.Collection=i(90),r.RGB=i(20),r.RGB.Collection=i(91),r.Matrix=i(92),r.Digits=i(94),t.exports=r},function(t,e,i){(function(e){const r=i(3),n=i(10),s=i(8),{constrain:o,map:a,scale:l}=i(4),h=r.Pins,c=new Map,u={PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i,pin:r}){const n=c.get(this);this.address=t||64,this.pwmRange=e||[0,4095],this.frequency=i||200,n.expander=s.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=n.expander.normalize(r),n.mode=this.io.MODES.PWM}},update:{writable:!0,value(t){const e=c.get(this),i=void 0!==t?t:e.value,n=e.isAnode?255-r.constrain(i,0,255):i;this.write(n)}},write:{writable:!0,value(t){c.get(this).expander.analogWrite(this.pin,t)}}},DEFAULT:{initialize:{value({pin:t},e){const i=c.get(this),r=h.isFirmata(this);let n;r&&"string"==typeof e&&e.length>1&&"A"===e[0]&&(e=this.io.analogPins[+e.slice(1)]),n=this.io.defaultLed||13,e=+e,r&&this.io.analogPins.includes(e)?(this.pin=e,i.mode=this.io.MODES.OUTPUT):(this.pin=void 0===t?n:t,i.mode=this.io.MODES[this.board.pins.isPwm(this.pin)?"PWM":"OUTPUT"]),this.io.pinMode(this.pin,i.mode)}},update:{writable:!0,value(t){const e=c.get(this),i=void 0!==t?t:e.value;let n=e.isAnode?255-r.constrain(i,0,255):i;n=a(n,0,255,0,this.board.RESOLUTION.PWM),n!==this.io.LOW&&n!==this.io.HIGH&&this.mode!==this.io.MODES.PWM&&r.Pins.Error({pin:this.pin,type:"PWM",via:"Led"}),e.mode===this.io.MODES.OUTPUT&&(n=i),this.write(n)}},write:{writable:!0,value(t){const e=c.get(this);e.mode===this.io.MODES.OUTPUT&&this.io.digitalWrite(this.pin,t),e.mode===this.io.MODES.PWM&&this.io.analogWrite(this.pin,t)}}}};class d{constructor(t){const e="object"==typeof t?t.pin:t;r.Component.call(this,t=r.Options(t)),r.Controller.call(this,u,t);const i={isAnode:t.isAnode,isOn:!1,isRunning:!1,value:null,direction:1,mode:null,intensity:0,interval:null};c.set(this,i),Object.defineProperties(this,{value:{get:()=>i.value},mode:{get:()=>i.mode},isOn:{get:()=>!!i.value},isRunning:{get:()=>i.isRunning},animation:{get:()=>i.animation}}),"function"==typeof this.initialize&&this.initialize(t,e)}on(){const t=c.get(this);return t.mode===this.io.MODES.OUTPUT&&(t.value=this.io.HIGH),t.mode===this.io.MODES.PWM&&(null===t.value&&(t.value=255),t.interval||(t.value=255),0===t.value&&(t.value=255)),this.update(),this}off(){return c.get(this).value=0,this.update(),this}toggle(){return this[this.isOn?"off":"on"]()}brightness(t){return c.get(this).value=t,this.update(),this}intensity(t){const e=c.get(this);return 0===arguments.length?e.intensity:(e.intensity=o(t,0,100),this.brightness(l(e.intensity,0,100,0,255)))}[n.normalize](t){const e=c.get(this);return null===t[0]&&(t[0]={value:e.value||0}),t.map(t=>(null!==t&&("number"==typeof t?t={value:t}:("number"==typeof t.brightness&&(t.value=t.brightness,delete t.brightness),"number"==typeof t.intensity&&(t.value=l(t.intensity,0,100,0,255),delete t.intensity)),t.easing||(t.easing="linear")),t))}[n.render](t){return c.get(this).value=t[0],this.update()}pulse(t,e){const i=c.get(this);this.stop();const r={duration:"number"==typeof t?t:1e3,keyFrames:[0,255],metronomic:!0,loop:!0,easing:"inOutSine",onloop(){"function"==typeof e&&e()}};return"object"==typeof t&&Object.assign(r,t),"function"==typeof t&&(e=t),i.isRunning=!0,i.animation=i.animation||new n(this),i.animation.enqueue(r),this}fade(t,e,i){const r=c.get(this);this.stop();const s={duration:"number"==typeof e?e:1e3,keyFrames:[null,"number"==typeof t?t:255],easing:"outSine",oncomplete(){r.isRunning=!1,"function"==typeof i&&i()}};return"object"==typeof t&&Object.assign(s,t),"function"==typeof t&&(i=t),"object"==typeof e&&Object.assign(s,e),"function"==typeof e&&(i=e),r.isRunning=!0,r.animation=r.animation||new n(this),r.animation.enqueue(s),this}fadeIn(t,e){return this.fade(255,t||1e3,e)}fadeOut(t,e){return this.fade(0,t||1e3,e)}blink(t,e){const i=c.get(this);return this.stop(),"function"==typeof t&&(e=t,t=null),i.isRunning=!0,i.interval=setInterval(()=>{this.toggle(),"function"==typeof e&&e()},t||100),this}stop(){const t=c.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,t.isRunning=!1,this}}d.prototype.strobe=d.prototype.blink,e.env.IS_TEST_MODE&&(d.Controllers=u,d.purge=function(){c.clear()}),t.exports=d}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(5),s=new Map,o={cathode:[63,6,91,79,102,109,125,7,127,103],anode:[64,121,36,48,25,18,2,120,0,24]};class a{constructor(t){if(!(this instanceof a))return new a(t);Array.isArray(t)?t={pins:{data:t[0],clock:t[1],latch:t[2],reset:4===t.length?t[3]:null}}:"object"==typeof t.pins&&Array.isArray(t.pins)&&(t.pins={data:t.pins[0],clock:t.pins[1],latch:t.pins[2],reset:4===t.pins.length?t.pins[3]:null}),r.Component.call(this,t=r.Options(t)),this.size=t.size||1,this.pins.reset=void 0!==t.pins.reset?t.pins.reset:null;const e=void 0!==t.isAnode&&t.isAnode,i=e?255:0,n={isAnode:e,value:new Array(this.size).fill(i),encoded:o[e?"anode":"cathode"],clear:i};s.set(this,n),Object.defineProperties(this,{isAnode:{get:()=>e},value:{get:()=>n.value}})}display(t){const e=s.get(this);let i;if("number"==typeof t)return this.display(String(t));if("string"==typeof t){const r=t.match(/([0-9]{1}\.*)/g);r&&r.length&&(i=r.map(t=>1===t.length?128|e.encoded[t]:e.encoded[t[0]]))}return this.send(i),e.value=i,this}send(t){const e=s.get(this);let i=Array.from(arguments);return 1===i.length&&(i=[t]),Array.isArray(t)&&(i=t),this.io.digitalWrite(this.pins.latch,this.io.LOW),i.forEach((function(t){if("string"==typeof t&&(t=t.charCodeAt(0)),this.isAnode&&255!==t&&!e.encoded.includes(t)&&!e.encoded.includes(-129&t)){const e=o.anode.findIndex(e=>e===t);-1!==e&&(t=o.cathode[e])}this.board.shiftOut(this.pins.data,this.pins.clock,!0,t)}),this),this.io.digitalWrite(this.pins.latch,this.io.HIGH),e.value=i,this}clear(){const t=s.get(this);return this.send(Array(this.size).fill(t.clear))}reset(){if(null===this.pins.reset)throw new Error("ShiftRegister was not initialized with a reset pin");return this.io.digitalWrite(this.pins.clock,this.io.LOW),this.io.digitalWrite(this.pins.reset,this.io.LOW),this.io.digitalWrite(this.pins.clock,this.io.HIGH),this.io.digitalWrite(this.pins.reset,this.io.HIGH),this}}class l extends n{constructor(t){super(t)}get type(){return a}}n.installMethodForwarding(l.prototype,a.prototype),n.installMethodForwarding(l.prototype,a.prototype),a.Collection=l,e.env.IS_TEST_MODE&&(a.purge=()=>{s.clear()}),t.exports=a}).call(this,i(1))},function(t,e,i){"use strict";(function(e,r){var n=i(16);t.exports=y;var s,o=i(34);y.ReadableState=v;i(2).EventEmitter;var a=function(t,e){return t.listeners(e).length},l=i(49),h=i(17).Buffer,c=e.Uint8Array||function(){};var u=Object.create(i(14));u.inherits=i(11);var d=i(110),p=void 0;p=d&&d.debuglog?d.debuglog("stream"):function(){};var f,g=i(111),E=i(50);u.inherits(y,l);var m=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var r=e instanceof(s=s||i(9));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=i(51).StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function y(t){if(s=s||i(9),!(this instanceof y))return new y(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function R(t,e,i,r,n){var s,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,T(t)}(t,o)):(n||(s=function(t,e){var i;r=e,h.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var r;return i}(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):b(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!i?(e=o.decoder.write(e),o.objectMode||0!==e.length?b(t,o,e,!1):_(t,o)):b(t,o,e,!1))):r||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function b(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&T(t)),_(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=E.destroy,y.prototype._undestroy=E.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),i=!0),R(this,t,e,!1,i)},y.prototype.unshift=function(t){return R(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return f||(f=i(51).StringDecoder),this._readableState.decoder=new f(t),this._readableState.encoding=t,this};function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function T(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(O,t):O(t))}function O(t){p("emit readable"),t.emit("readable"),M(t)}function _(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(A,t,e))}function A(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function w(t){p("readable nexttick read 0"),t.read(0)}function I(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,r=1,n=i.data;t-=n.length;for(;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(o===s.length?n+=s:n+=s.slice(0,t),0===(t-=o)){o===s.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(o));break}++r}return e.length-=r,n}(t,e):function(t,e){var i=h.allocUnsafe(t),r=e.head,n=1;r.data.copy(i),t-=r.data.length;for(;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(i,i.length-t,0,o),0===(t-=o)){o===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++n}return e.length-=n,i}(t,e);return r}(t,e.buffer,e.decoder),i);var i}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n.nextTick(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}y.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):T(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&P(this),null;var r,n=e.needReadable;return p("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",n=!0),e.ended||e.reading?p("reading or ended",n=!1):n&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(i,e))),null===(r=t>0?C(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&P(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,p("pipe count=%d opts=%j",s.pipesCount,e);var l=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?c:y;function h(e,r){p("onunpipe"),e===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",u),t.removeListener("error",E),t.removeListener("unpipe",h),i.removeListener("end",c),i.removeListener("end",y),i.removeListener("data",g),d=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}function c(){p("onend"),t.end()}s.endEmitted?n.nextTick(l):i.once("end",l),t.on("unpipe",h);var u=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,M(t))}}(i);t.on("drain",u);var d=!1;var f=!1;function g(e){p("ondata"),f=!1,!1!==t.write(e)||f||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==L(s.pipes,t))&&!d&&(p("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,f=!0),i.pause())}function E(e){p("onerror",e),y(),t.removeListener("error",E),0===a(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),y()}function v(){p("onfinish"),t.removeListener("close",m),y()}function y(){p("unpipe"),i.unpipe(t)}return i.on("data",g),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",E),t.once("close",m),t.once("finish",v),t.emit("pipe",i),s.flowing||(p("pipe resume"),i.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,i);return this}var o=L(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},y.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&T(this):n.nextTick(w,this))}return i},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(I,t,e))}(this,t)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",(function(){if(p("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){(p("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n)||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var s=0;s<m.length;s++)t.on(m[s],this.emit.bind(this,m[s]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=C}).call(this,i(6),i(1))},function(t,e,i){t.exports=i(2).EventEmitter},function(t,e,i){"use strict";var r=i(16);function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(n,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(n,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";var r=i(17).Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=o(e[r]);if(n>=0)return n>0&&(t.lastNeed=n-1),n;if(--r<i||-2===n)return 0;if((n=o(e[r]))>=0)return n>0&&(t.lastNeed=n-2),n;if(--r<i||-2===n)return 0;if((n=o(e[r]))>=0)return n>0&&(2===n?n=0:t.lastNeed=n-3),n;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";t.exports=o;var r=i(9),n=Object.create(i(14));function s(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,i){l(t,e,i)})):l(this,null,null)}function l(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=i(11),n.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;r.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},function(t,e,i){t.exports=i(130)},function(t,e,i){var r=i(27);e.RotX=function(t,e){e&&(t*=2*Math.PI/360);var i=new r(3);return i.set(0,0,1),i.set(0,1,0),i.set(0,2,0),i.set(1,0,0),i.set(1,1,Math.cos(t)),i.set(1,2,-Math.sin(t)),i.set(2,0,0),i.set(2,1,Math.sin(t)),i.set(2,2,Math.cos(t)),i},e.RotY=function(t,e){e&&(t*=2*Math.PI/360);var i=new r(3);return i.set(0,0,Math.cos(t)),i.set(0,1,0),i.set(0,2,Math.sin(t)),i.set(1,0,0),i.set(1,1,1),i.set(1,2,0),i.set(2,0,-Math.sin(t)),i.set(2,1,0),i.set(2,2,Math.cos(t)),i},e.RotZ=function(t,e){e&&(t*=2*Math.PI/360);var i=new r(3);return i.set(0,0,Math.cos(t)),i.set(0,1,-Math.sin(t)),i.set(0,2,0),i.set(1,0,Math.sin(t)),i.set(1,1,Math.cos(t)),i.set(1,2,0),i.set(2,0,0),i.set(2,1,0),i.set(2,2,1),i},t.exports=e},function(t,e,i){(function(e,r){e.hrtime=i(56);const n=i(57);n.usbSerial=i(108),n.firmata=i(35).Firmata,n.nodeLed=i(119),n.nodePixel=i(123),n.oledJS=i(127),n.oledJS.oledFont5x7=i(128),n.tharp=i(129),n.serial=i(134);const{EventEmitter:s}=i(2);if(n.events=new s,n.handleElementInit=function(t,e={}){navigator.usb.getDevices().then((function(i){if(i.length){const r=i[0];t.style.display="none";const s=new p5.j5.usbSerial({device:r,options:e});n.events.emit("serial",s)}})).catch(t=>{console.log("err",t)}),t.addEventListener("click",(function(t){console.log("usb btn click",t);const e=new p5.j5.usbSerial;console.log("usb device",e),n.events.emit("serial",e)}),!1)},n.handleSerialElementInit=function(t,e={}){t.addEventListener("click",(function(t){console.log(t);const i=new p5.j5.serial(e);i.isSerial=!0,n.events.emit("serial",i)}),!1)},r.p5){const t=r.p5;t.j5=n,r.five=n,t.prototype.registerPreloadMethod("loadBoard",t.prototype),t.prototype.loadBoard=function(t={},e,i){let r,s;t.serialElement?r=t.serialElement:(r=document.createElement("button"),r.innerText="Authorize Serial Device",r.style.margin="25px",document.body.appendChild(r)),n.handleSerialElementInit(r),t.element?s=t.element:(s=document.createElement("button"),s.innerText="Authorize USB Device",s.style.margin="25px",document.body.appendChild(s)),n.handleElementInit(s);const o={},a=this;function l(t,i,r){t.on("ready",()=>{i.board=t,"function"==typeof e&&e({}),"function"==typeof a._decrementPreload&&a._decrementPreload(),n.io=r,n.board=t,console.log("johnny-five board ready. p5.j5.board is the global for devtools:",t),n.events.emit("boardReady")})}return n.events.once("serial",t=>{let e,i;r.style.display="none",s.style.display="none",t.isSerial?t.open(r=>{r?n.events.emit("error",r):(e=new n.firmata(t,{reportVersionTimeout:1}),i=new n.Board({io:e,repl:!1,timeout:15e3}),t.emit("open",t),l(i,o,e))}):(e=new n.firmata(t,{reportVersionTimeout:1}),i=new n.Board({io:e,repl:!1,timeout:15e3}),l(i,o,e))}),o}}t.exports=n}).call(this,i(1),i(6))},function(t,e,i){(function(e,i){t.exports=e.hrtime||function(t){var e=.001*n.call(r),i=Math.floor(e),s=Math.floor(e%1*1e9);t&&(i-=t[0],(s-=t[1])<0&&(i--,s+=1e9));return[i,s]};var r=i.performance||{},n=r.now||r.mozNow||r.msNow||r.oNow||r.webkitNow||function(){return(new Date).getTime()}}).call(this,i(1),i(6))},function(t,e,i){t.exports={Accelerometer:i(28),Animation:i(10),Altimeter:i(37),Barometer:i(38),Board:i(3),Button:i(79),Color:i(80),Collection:i(5),Compass:i(41),ESC:i(81),Expander:i(8),Fn:i(4),GPS:i(82),Gyro:i(39),Hygrometer:i(40),SIP:i(0),Keypad:i(83),LCD:i(85),Led:i(45),LedControl:i(21),Light:i(95),Joystick:i(96),Motion:i(97),Motor:i(98),Orientation:i(42),Piezo:i(99),Pin:i(19),Proximity:i(102),ReflectanceArray:i(103),Relay:i(104),Repl:i(32),Sensor:i(22),Servo:i(105),ShiftRegister:i(47),Stepper:i(106),Switch:i(107),Thermometer:i(43)},t.exports.Board.Virtual=function(e){let i;return i=e instanceof t.exports.Expander?{io:e}:e,new t.exports.Board(Object.assign({},{repl:!1,debug:!1,sigint:!1},i))},t.exports.Sensor.Analog=t.exports.Sensor,t.exports.Sensor.Digital=function(e){let i;return"number"==typeof e||"string"==typeof e?(i=e,e={type:"digital",pin:i}):e.type="digital",new t.exports.Sensor(e)},t.exports.IMU=t.exports.SIP,t.exports.Multi=t.exports.SIP,t.exports.Luxmeter=t.exports.Light,t.exports.Magnetometer=t.exports.Compass,t.exports.Ping=t.exports.Proximity,t.exports.Sonar=t.exports.Proximity,t.exports.Boards=t.exports.Board.Collection,t.exports.Buttons=t.exports.Button.Collection,t.exports.ESCs=t.exports.ESC.Collection,t.exports.Leds=t.exports.Led.Collection,t.exports.Led.RGBs=t.exports.Led.RGB.Collection,t.exports.Motors=t.exports.Motor.Collection,t.exports.Pins=t.exports.Pin.Collection,t.exports.Relays=t.exports.Relay.Collection,t.exports.Sensors=t.exports.Sensor.Collection,t.exports.Servos=t.exports.Servo.Collection,t.exports.Switches=t.exports.Switch.Collection,t.exports.Touchpad=t.exports.Keypad},function(t,e,i){"use strict";(function(e){const r=i(59),n=i(60),s=i(63),o=i(64),a="win32"===e.platform&&!(e.env.TERM||"").toLowerCase().startsWith("xterm"),l=["ansi","ansi","ansi256","ansi16m"],h=new Set(["gray"]),c=Object.create(null);function u(t,e){e=e||{};const i=s?s.level:0;t.level=void 0===e.level?i:e.level,t.enabled="enabled"in e?e.enabled:t.level>0}function d(t){if(!this||!(this instanceof d)||this.template){const e={};return u(e,t),e.template=function(){const t=[].slice.call(arguments);return E.apply(null,[e.template].concat(t))},Object.setPrototypeOf(e,d.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=d,e.template}u(this,t)}a&&(n.blue.open="[94m");for(const t of Object.keys(n))n[t].closeRe=new RegExp(r(n[t].close),"g"),c[t]={get(){const e=n[t];return f.call(this,this._styles?this._styles.concat(e):[e],t)}};n.color.closeRe=new RegExp(r(n.color.close),"g");for(const t of Object.keys(n.color.ansi))h.has(t)||(c[t]={get(){const e=this.level;return function(){const i=n.color[l[e]][t].apply(null,arguments),r={open:i,close:n.color.close,closeRe:n.color.closeRe};return f.call(this,this._styles?this._styles.concat(r):[r],t)}}});n.bgColor.closeRe=new RegExp(r(n.bgColor.close),"g");for(const t of Object.keys(n.bgColor.ansi)){if(h.has(t))continue;c["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const e=this.level;return function(){const i=n.bgColor[l[e]][t].apply(null,arguments),r={open:i,close:n.bgColor.close,closeRe:n.bgColor.closeRe};return f.call(this,this._styles?this._styles.concat(r):[r],t)}}}}const p=Object.defineProperties(()=>{},c);function f(t,e){const i=function(){return g.apply(i,arguments)};i._styles=t;const r=this;return Object.defineProperty(i,"level",{enumerable:!0,get:()=>r.level,set(t){r.level=t}}),Object.defineProperty(i,"enabled",{enumerable:!0,get:()=>r.enabled,set(t){r.enabled=t}}),i.hasGrey=this.hasGrey||"gray"===e||"grey"===e,i.__proto__=p,i}function g(){const t=arguments,e=t.length;let i=String(arguments[0]);if(0===e)return"";if(e>1)for(let r=1;r<e;r++)i+=" "+t[r];if(!this.enabled||this.level<=0||!i)return i;const r=n.dim.open;a&&this.hasGrey&&(n.dim.open="");for(const t of this._styles.slice().reverse())i=t.open+i.replace(t.closeRe,t.open)+t.close,i=i.replace(/\r?\n/g,`${t.close}$&${t.open}`);return n.dim.open=r,i}function E(t,e){if(!Array.isArray(e))return[].slice.call(arguments,1).join(" ");const i=[].slice.call(arguments,2),r=[e.raw[0]];for(let t=1;t<e.length;t++)r.push(String(i[t-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(e.raw[t]));return o(t,r.join(""))}Object.defineProperties(d.prototype,c),t.exports=d(),t.exports.supportsColor=s}).call(this,i(1))},function(t,e,i){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(r,"\\$&")}},function(t,e,i){"use strict";(function(t){const e=i(61),r=(t,i)=>function(){const r=t.apply(e,arguments);return`[${r+i}m`},n=(t,i)=>function(){const r=t.apply(e,arguments);return`[${38+i};5;${r}m`},s=(t,i)=>function(){const r=t.apply(e,arguments);return`[${38+i};2;${r[0]};${r[1]};${r[2]}m`};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const t=new Map,i={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};i.color.grey=i.color.gray;for(const e of Object.keys(i)){const r=i[e];for(const e of Object.keys(r)){const n=r[e];i[e]={open:`[${n[0]}m`,close:`[${n[1]}m`},r[e]=i[e],t.set(n[0],n[1])}Object.defineProperty(i,e,{value:r,enumerable:!1}),Object.defineProperty(i,"codes",{value:t,enumerable:!1})}const o=t=>t,a=(t,e,i)=>[t,e,i];i.color.close="[39m",i.bgColor.close="[49m",i.color.ansi={ansi:r(o,0)},i.color.ansi256={ansi256:n(o,0)},i.color.ansi16m={rgb:s(a,0)},i.bgColor.ansi={ansi:r(o,10)},i.bgColor.ansi256={ansi256:n(o,10)},i.bgColor.ansi16m={rgb:s(a,10)};for(let t of Object.keys(e)){if("object"!=typeof e[t])continue;const o=e[t];"ansi16"===t&&(t="ansi"),"ansi16"in o&&(i.color.ansi[t]=r(o.ansi16,0),i.bgColor.ansi[t]=r(o.ansi16,10)),"ansi256"in o&&(i.color.ansi256[t]=n(o.ansi256,0),i.bgColor.ansi256[t]=n(o.ansi256,10)),"rgb"in o&&(i.color.ansi16m[t]=s(o.rgb,0),i.bgColor.ansi16m[t]=s(o.rgb,10))}return i}})}).call(this,i(29)(t))},function(t,e,i){var r=i(30),n=i(62),s={};Object.keys(r).forEach((function(t){s[t]={},Object.defineProperty(s[t],"channels",{value:r[t].channels}),Object.defineProperty(s[t],"labels",{value:r[t].labels});var e=n(t);Object.keys(e).forEach((function(i){var r=e[i];s[t][i]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var r=i.length,n=0;n<r;n++)i[n]=Math.round(i[n]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(r),s[t][i].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=s},function(t,e,i){var r=i(30);function n(t){var e=function(){for(var t={},e=Object.keys(r),i=e.length,n=0;n<i;n++)t[e[n]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var n=i.pop(),s=Object.keys(r[n]),o=s.length,a=0;a<o;a++){var l=s[a],h=e[l];-1===h.distance&&(h.distance=e[n].distance+1,h.parent=n,i.unshift(l))}return e}function s(t,e){return function(i){return e(t(i))}}function o(t,e){for(var i=[e[t].parent,t],n=r[e[t].parent][t],o=e[t].parent;e[o].parent;)i.unshift(e[o].parent),n=s(r[e[o].parent][o],n),o=e[o].parent;return n.conversion=i,n}t.exports=function(t){for(var e=n(t),i={},r=Object.keys(e),s=r.length,a=0;a<s;a++){var l=r[a];null!==e[l].parent&&(i[l]=o(l,e))}return i}},function(t,e,i){"use strict";t.exports=!1},function(t,e,i){"use strict";const r=/(?:\\(u[a-f0-9]{4}|x[a-f0-9]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,n=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,s=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u[0-9a-f]{4}|x[0-9a-f]{2}|.)|([^\\])/gi,a={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v",0:"\0","\\":"\\",e:"",a:""};function l(t){return"u"===t[0]&&5===t.length||"x"===t[0]&&3===t.length?String.fromCharCode(parseInt(t.slice(1),16)):a[t]||t}function h(t,e){const i=[],r=e.trim().split(/\s*,\s*/g);let n;for(const e of r)if(isNaN(e)){if(!(n=e.match(s)))throw new Error(`Invalid Chalk template style argument: ${e} (in style '${t}')`);i.push(n[2].replace(o,(t,e,i)=>e?l(e):i))}else i.push(Number(e));return i}function c(t){n.lastIndex=0;const e=[];let i;for(;null!==(i=n.exec(t));){const t=i[1];if(i[2]){const r=h(t,i[2]);e.push([t].concat(r))}else e.push([t])}return e}function u(t,e){const i={};for(const t of e)for(const e of t.styles)i[e[0]]=t.inverse?null:e.slice(1);let r=t;for(const t of Object.keys(i))if(Array.isArray(i[t])){if(!(t in r))throw new Error("Unknown Chalk style: "+t);r=i[t].length>0?r[t].apply(r,i[t]):r[t]}return r}t.exports=(t,e)=>{const i=[],n=[];let s=[];if(e.replace(r,(e,r,o,a,h,d)=>{if(r)s.push(l(r));else if(a){const e=s.join("");s=[],n.push(0===i.length?e:u(t,i)(e)),i.push({inverse:o,styles:c(a)})}else if(h){if(0===i.length)throw new Error("Found extraneous } in Chalk template literal");n.push(u(t,i)(s.join(""))),s=[],i.pop()}else s.push(d)}),n.push(s.join("")),i.length>0){const t=`Chalk template literal is missing ${i.length} closing bracket${1===i.length?"":"s"} (\`}\`)`;throw new Error(t)}return n.join("")}},function(t,e,i){(function(e){var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,h=a||l||Function("return this")(),c=Object.prototype.toString,u=Math.max,d=Math.min,p=function(){return h.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var a=n.test(t);return a||s.test(t)?o(t.slice(2),a?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,i){var r,n,s,o,a,l,h=0,c=!1,E=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var i=r,s=n;return r=n=void 0,h=e,o=t.apply(s,i)}function y(t){return h=t,a=setTimeout(b,e),c?v(t):o}function R(t){var i=t-l;return void 0===l||i>=e||i<0||E&&t-h>=s}function b(){var t=p();if(R(t))return S(t);a=setTimeout(b,function(t){var i=e-(t-l);return E?d(i,s-(t-h)):i}(t))}function S(t){return a=void 0,m&&r?v(t):(r=n=void 0,o)}function T(){var t=p(),i=R(t);if(r=arguments,n=this,l=t,i){if(void 0===a)return y(l);if(E)return a=setTimeout(b,e),v(l)}return void 0===a&&(a=setTimeout(b,e)),o}return e=g(e)||0,f(i)&&(c=!!i.leading,s=(E="maxWait"in i)?u(g(i.maxWait)||0,e):s,m="trailing"in i?!!i.trailing:m),T.cancel=function(){void 0!==a&&clearTimeout(a),h=0,r=l=n=a=void 0},T.flush=function(){return void 0===a?o:S(p())},T}}).call(this,i(6))},function(t,e,i){(function(t,i){var r="[object Arguments]",n="[object Function]",s="[object GeneratorFunction]",o="[object Map]",a="[object Set]",l=/\w*$/,h=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object DataView]"]=u["[object Boolean]"]=u["[object Date]"]=u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u[o]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object Symbol]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Error]"]=u[n]=u["[object WeakMap]"]=!1;var d="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,f=d||p||Function("return this")(),g=e&&!e.nodeType&&e,E=g&&"object"==typeof i&&i&&!i.nodeType&&i,m=E&&E.exports===g;function v(t,e){return t.set(e[0],e[1]),t}function y(t,e){return t.add(e),t}function R(t,e,i,r){var n=-1,s=t?t.length:0;for(r&&s&&(i=t[++n]);++n<s;)i=e(i,t[n],n,t);return i}function b(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function S(t){var e=-1,i=Array(t.size);return t.forEach((function(t,r){i[++e]=[r,t]})),i}function T(t,e){return function(i){return t(e(i))}}function O(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var _,A=Array.prototype,w=Function.prototype,I=Object.prototype,M=f["__core-js_shared__"],C=(_=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",P=w.toString,D=I.hasOwnProperty,L=I.toString,x=RegExp("^"+P.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=m?f.Buffer:void 0,G=f.Symbol,W=f.Uint8Array,U=T(Object.getPrototypeOf,Object),k=Object.create,B=I.propertyIsEnumerable,F=A.splice,z=Object.getOwnPropertySymbols,H=N?N.isBuffer:void 0,j=T(Object.keys,Object),q=Et(f,"DataView"),Y=Et(f,"Map"),V=Et(f,"Promise"),K=Et(f,"Set"),X=Et(f,"WeakMap"),$=Et(Object,"create"),Z=bt(q),Q=bt(Y),J=bt(V),tt=bt(K),et=bt(X),it=G?G.prototype:void 0,rt=it?it.valueOf:void 0;function nt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function st(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function at(t){this.__data__=new st(t)}function lt(t,e){var i=Tt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ot(t)}(t)&&D.call(t,"callee")&&(!B.call(t,"callee")||L.call(t)==r)}(t)?function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(t.length,String):[],n=i.length,s=!!n;for(var o in t)!e&&!D.call(t,o)||s&&("length"==o||yt(o,n))||i.push(o);return i}function ht(t,e,i){var r=t[e];D.call(t,e)&&St(r,i)&&(void 0!==i||e in t)||(t[e]=i)}function ct(t,e){for(var i=t.length;i--;)if(St(t[i][0],e))return i;return-1}function ut(t,e,i,h,c,d,p){var f;if(h&&(f=d?h(t,c,d,p):h(t)),void 0!==f)return f;if(!wt(t))return t;var g=Tt(t);if(g){if(f=function(t){var e=t.length,i=t.constructor(e);e&&"string"==typeof t[0]&&D.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(t),!e)return function(t,e){var i=-1,r=t.length;e||(e=Array(r));for(;++i<r;)e[i]=t[i];return e}(t,f)}else{var E=vt(t),m=E==n||E==s;if(_t(t))return function(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}(t,e);if("[object Object]"==E||E==r||m&&!d){if(b(t))return d?t:{};if(f=function(t){return"function"!=typeof t.constructor||Rt(t)?{}:(e=U(t),wt(e)?k(e):{});var e}(m?{}:t),!e)return function(t,e){return ft(t,mt(t),e)}(t,function(t,e){return t&&ft(e,It(e),t)}(f,t))}else{if(!u[E])return d?t:{};f=function(t,e,i,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return pt(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,e){var i=e?pt(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var i=e?pt(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,r);case o:return function(t,e,i){return R(e?i(S(t),!0):S(t),v,new t.constructor)}(t,r,i);case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,l.exec(t));return e.lastIndex=t.lastIndex,e}(t);case a:return function(t,e,i){return R(e?i(O(t),!0):O(t),y,new t.constructor)}(t,r,i);case"[object Symbol]":return s=t,rt?Object(rt.call(s)):{}}var s}(t,E,ut,e)}}p||(p=new at);var T=p.get(t);if(T)return T;if(p.set(t,f),!g)var _=i?function(t){return function(t,e,i){var r=e(t);return Tt(t)?r:function(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}(r,i(t))}(t,It,mt)}(t):It(t);return function(t,e){for(var i=-1,r=t?t.length:0;++i<r&&!1!==e(t[i],i,t););}(_||t,(function(r,n){_&&(r=t[n=r]),ht(f,n,ut(r,e,i,h,n,t,p))})),f}function dt(t){return!(!wt(t)||(e=t,C&&C in e))&&(At(t)||b(t)?x:h).test(bt(t));var e}function pt(t){var e=new t.constructor(t.byteLength);return new W(e).set(new W(t)),e}function ft(t,e,i,r){i||(i={});for(var n=-1,s=e.length;++n<s;){var o=e[n],a=r?r(i[o],t[o],o,i,t):void 0;ht(i,o,void 0===a?t[o]:a)}return i}function gt(t,e){var i,r,n=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function Et(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return dt(i)?i:void 0}nt.prototype.clear=function(){this.__data__=$?$(null):{}},nt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},nt.prototype.get=function(t){var e=this.__data__;if($){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return D.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return $?void 0!==e[t]:D.call(e,t)},nt.prototype.set=function(t,e){return this.__data__[t]=$&&void 0===e?"__lodash_hash_undefined__":e,this},st.prototype.clear=function(){this.__data__=[]},st.prototype.delete=function(t){var e=this.__data__,i=ct(e,t);return!(i<0)&&(i==e.length-1?e.pop():F.call(e,i,1),!0)},st.prototype.get=function(t){var e=this.__data__,i=ct(e,t);return i<0?void 0:e[i][1]},st.prototype.has=function(t){return ct(this.__data__,t)>-1},st.prototype.set=function(t,e){var i=this.__data__,r=ct(i,t);return r<0?i.push([t,e]):i[r][1]=e,this},ot.prototype.clear=function(){this.__data__={hash:new nt,map:new(Y||st),string:new nt}},ot.prototype.delete=function(t){return gt(this,t).delete(t)},ot.prototype.get=function(t){return gt(this,t).get(t)},ot.prototype.has=function(t){return gt(this,t).has(t)},ot.prototype.set=function(t,e){return gt(this,t).set(t,e),this},at.prototype.clear=function(){this.__data__=new st},at.prototype.delete=function(t){return this.__data__.delete(t)},at.prototype.get=function(t){return this.__data__.get(t)},at.prototype.has=function(t){return this.__data__.has(t)},at.prototype.set=function(t,e){var i=this.__data__;if(i instanceof st){var r=i.__data__;if(!Y||r.length<199)return r.push([t,e]),this;i=this.__data__=new ot(r)}return i.set(t,e),this};var mt=z?T(z,Object):function(){return[]},vt=function(t){return L.call(t)};function yt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||c.test(t))&&t>-1&&t%1==0&&t<e}function Rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||I)}function bt(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function St(t,e){return t===e||t!=t&&e!=e}(q&&"[object DataView]"!=vt(new q(new ArrayBuffer(1)))||Y&&vt(new Y)!=o||V&&"[object Promise]"!=vt(V.resolve())||K&&vt(new K)!=a||X&&"[object WeakMap]"!=vt(new X))&&(vt=function(t){var e=L.call(t),i="[object Object]"==e?t.constructor:void 0,r=i?bt(i):void 0;if(r)switch(r){case Z:return"[object DataView]";case Q:return o;case J:return"[object Promise]";case tt:return a;case et:return"[object WeakMap]"}return e});var Tt=Array.isArray;function Ot(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!At(t)}var _t=H||function(){return!1};function At(t){var e=wt(t)?L.call(t):"";return e==n||e==s}function wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function It(t){return Ot(t)?lt(t):function(t){if(!Rt(t))return j(t);var e=[];for(var i in Object(t))D.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}i.exports=function(t){return ut(t,!0,!0)}}).call(this,i(6),i(29)(t))},function(t,e,i){const r=i(33),n={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},s={20:"UNO",25:"LEONARDO",70:"MEGA"};function o(t){if(!(this instanceof o))return new o(t);const e=t.io,i=e.pins.slice(),r=i.length,n=s[r]||"OTHER";t.type=n;for(let t=0;t<r;t++)this[t]=i[t];Object.defineProperties(this,{type:{value:n},length:{value:r}}),["isInput","isOutput","isAnalog","isPwm","isServo"].forEach(t=>{e[t]&&(this[t]=e[t])})}function a({io:t}){return"Firmata"===t.name||"Mock"===t.name}Object.entries(n).forEach(([t,e])=>{Object.defineProperty(o,t,{value:e})}),o.isFirmata=a,o.Error=({pin:t,type:e,via:i})=>{throw new Error(`Pin Error: ${t} is not a valid ${e} pin (${i})`)};const l=new Map;o.normalize=function(t,e){var i,n=e.pins.type,s=a(e),h=l.get(e);return("string"==typeof t||"number"==typeof t||Array.isArray(t))&&(t=new r(t)),h||(i=e.io&&"function"==typeof e.io.normalize,h=function(t){return s?o.fromAnalog(o.translate(t,n)):i?e.io.normalize(t):t},l.set(e,h)),function({pin:t,pins:e}){return void 0!==t||void 0!==e&&e.length}(t)&&(t.pins?t.pins=t.pins.map(h):t.pin=h(t.pin)),t},o.normalize.clear=function(){l.clear()},o.translations={UNO:{dtoa:{14:"A0",15:"A1",16:"A2",17:"A3",18:"A4",19:"A5"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}},MEGA:{dtoa:{54:"A0",55:"A1",56:"A2",57:"A3",58:"A4",59:"A5",60:"A6",61:"A7",62:"A8",63:"A9"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",I6:"A6",I7:"A7",I8:"A8",I9:"A9",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}}},o.translations.LEONARDO=o.translations.UNO,o.translate=function(t,e){var i=o.translations[e.toUpperCase()];return i?Object.keys(i).reduce((function(t,e){return i[e][t]||t}),t):t},o.fromAnalog=function(t){return"string"==typeof t&&t.length>1&&"A"===t[0]?parseInt(t.slice(1),10):t},o.identity=function(t,e){return[].findIndex.call(t,(function(t){return t.name===e||t.id===e||t.port===e}))},Object.keys(n).forEach((function(t){var e=t[0]+t.slice(1).toLowerCase();o.prototype["is"+e]=function(e){var i=this[e]||this[o.identity(this,e)];return!(!i||!i.supportedModes.includes(n[t]))}})),o.prototype.isDigital=function(t){var e=this[t]||this[o.identity(this,t)];return!(!e||!e.supportedModes.length)},t.exports=o},function(t,e,i){"use strict";(function(e,r){var n=i(2).EventEmitter,s=i(12),o=[7,8],a=[1,2],l=["none","even","mark","odd","space"],h=["RTSCTS"],c=9600,u="none",d=!1,p=8,f=1,g=256;function E(t){switch(t.dataBits){case 7:t.dataBits="seven";break;case 8:t.dataBits="eight"}switch(t.stopBits){case 1:t.stopBits="one";break;case 2:t.stopBits="two"}switch(t.parity){case"none":t.parity="no"}return t}function m(t,i,r,s){n.call(this);var m,v=this,y=Array.prototype.slice.call(arguments);if("function"!=typeof(s=y.pop())&&(s=null),r=null==r||r,s=s||function(t){t&&v.emit("error",t)},(i="function"!=typeof i&&i||{}).baudRate=i.baudRate||i.baudrate||c,i.dataBits=i.dataBits||i.databits||p,-1===o.indexOf(i.dataBits))return m=new Error('Invalid "databits": '+i.dataBits),void s(m);if(i.stopBits=i.stopBits||i.stopbits||f,-1===a.indexOf(i.stopBits))return m=new Error('Invalid "stopbits": '+i.stopbits),void s(m);if(i.parity=i.parity||u,-1===l.indexOf(i.parity))return m=new Error('Invalid "parity": '+i.parity),void s(m);if(!t)return m=new Error("Invalid port specified: "+t),void s(m);if(i.rtscts=d,i.flowControl||i.flowcontrol){var R=i.flowControl||i.flowcontrol;if("boolean"==typeof R)i.rtscts=!0;else{var b=R.every((function(t){var e=t.toUpperCase(),r=h.indexOf(e);if(r<0){var n=new Error('Invalid "flowControl": '+e+". Valid options: "+h.join(", "));return s(n),!1}switch(r){case 0:i.rtscts=!0}return!0}));if(!b)return}}if(i.bufferSize=i.bufferSize||i.buffersize||g,i.serial=i.serial||"undefined"!=typeof chrome&&chrome.serial,!i.serial)throw new Error("No access to serial ports. Try loading as a Chrome Application.");this.options=E(i),this.options.serial.onReceiveError.addListener((function(t){switch(t.error){case"disconnected":case"device_lost":case"system_error":m=new Error("Disconnected"),v.options.disconnectedCallback?v.options.disconnectedCallback(m):v.emit("disconnect",m),v.connectionId>=0&&v.close()}})),this.path=t,r&&e.nextTick((function(){v.open(s)}))}function v(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=0;r<t.length;r++)i[r]=t[r];return e}function y(t){for(var e=new r(t.byteLength),i=new Uint8Array(t),n=0;n<e.length;++n)e[n]=i[n];return e}s.inherits(m,n),m.prototype.connectionId=-1,m.prototype.open=function(t){var e={bitrate:parseInt(this.options.baudRate,10),dataBits:this.options.dataBits,parityBit:this.options.parity,stopBits:this.options.stopBits,ctsFlowControl:this.options.rtscts};this.options.serial.connect(this.path,e,this.proxy("onOpen",t))},m.prototype.onOpen=function(t,e){chrome.runtime.lastError?"function"==typeof t?t(chrome.runtime.lastError):this.emit("error",chrome.runtime.lastError):(this.connectionId=e.connectionId,-1!==this.connectionId?(this.emit("open",e),this._reader=this.proxy("onRead"),this.options.serial.onReceive.addListener(this._reader),"function"==typeof t&&t(chrome.runtime.lastError,e)):this.emit("error",new Error("Could not open port.")))},m.prototype.onRead=function(t){t&&this.connectionId===t.connectionId&&(this.options.dataCallback?this.options.dataCallback(y(t.data)):this.emit("data",y(t.data)))},m.prototype.write=function(t,e){if(this.connectionId<0){var i=new Error("Serialport not open.");"function"==typeof e?e(i):this.emit("error",i)}else"string"==typeof t&&(t=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return e}(t)),t instanceof ArrayBuffer==!1&&(t=v(t)),this.options.serial.send(this.connectionId,t,(function(t){"function"==typeof e&&e(chrome.runtime.lastError,t)}))},m.prototype.close=function(t){if(this.connectionId<0){var e=new Error("Serialport not open.");"function"==typeof t?t(e):this.emit("error",e)}else this.options.serial.disconnect(this.connectionId,this.proxy("onClose",t))},m.prototype.onClose=function(t,e){this.connectionId=-1,this.emit("close"),this.removeAllListeners(),this._reader&&(this.options.serial.onReceive.removeListener(this._reader),this._reader=null),"function"==typeof t&&t(chrome.runtime.lastError,e)},m.prototype.flush=function(t){if(this.connectionId<0){var e=new Error("Serialport not open.");"function"==typeof t?t(e):this.emit("error",e)}else{var i=this;this.options.serial.flush(this.connectionId,(function(e){chrome.runtime.lastError?"function"==typeof t?t(chrome.runtime.lastError,e):i.emit("error",chrome.runtime.lastError):t(null,e)}))}},m.prototype.drain=function(t){if(this.connectionId<0){var e=new Error("Serialport not open.");"function"==typeof t?t(e):this.emit("error",e)}else"function"==typeof t&&t()},m.prototype.proxy=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=e.splice(0,1)[0],n=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s=e.concat(i);t[r].apply(t,s)};return n},m.prototype.set=function(t,e){this.options.serial.setControlSignals(this.connectionId,t,(function(t){e(chrome.runtime.lastError,t)}))},m.prototype.isOpen=function(){return this.connectionId>-1},t.exports={SerialPort:m,list:function(t){"undefined"!=typeof chrome&&chrome.serial?chrome.serial.getDevices((function(e){for(var i=new Array(e.length),r=0;r<e.length;r++)i[r]={comName:e[r].path,manufacturer:e[r].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(e[r].vendorId||0).toString(16),productId:"0x"+(e[r].productId||0).toString(16)};t(chrome.runtime.lastError,i)})):t(new Error("No access to serial ports. Try loading as a Chrome Application."),null)},buffer2ArrayBuffer:v,used:[]}}).call(this,i(1),i(7).Buffer)},function(t,e,i){"use strict";e.byteLength=function(t){var e=h(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,r=h(t),o=r[0],a=r[1],l=new s(function(t,e,i){return 3*(e+i)/4-i}(0,o,a)),c=0,u=a>0?o-4:o;for(i=0;i<u;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===a&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,l[c++]=255&e);1===a&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,s=[],o=0,a=i-n;o<a;o+=16383)s.push(c(t,o,o+16383>a?a:o+16383));1===n?(e=t[i-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===n&&(e=(t[i-2]<<8)+t[i-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,i){for(var n,s,o=[],a=e;a<i;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(r[(s=n)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,r,n){var s,o,a=8*n-r-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?n-1:0,d=i?-1:1,p=t[e+u];for(u+=d,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+t[e+u],u+=d,c-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),s-=h}return(p?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var o,a,l,h=8*s-n-1,c=(1<<h)-1,u=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,f=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,n),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;t[i+p]=255&a,p+=f,a/=256,n-=8);for(o=o<<n|a,h+=n;h>0;t[i+p]=255&o,p+=f,o/=256,h-=8);t[i+p-f]|=128*g}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";t.exports=i(35)(i(75))},function(t,e,i){"use strict";const r=i(36),n={crc8(t){let e=0;for(let i of t)for(let t=8;t;t--){const t=1&(e^i);e>>=1,t&&(e^=140),i>>=1}return e},readDevices(t){const e=r.from7BitArray(t),i=[];for(let t=0;t<e.length;t+=8){const r=e.slice(t,t+8);if(8!==r.length)continue;n.crc8(r.slice(0,7))!==r[7]&&console.error("ROM invalid!"),i.push(r)}return i}};t.exports=n},function(t,e,i){"use strict";(function(e,r){const n=i(2);class s extends n{constructor(t){super(),this.isOpen=!0,this.baudRate=0,this.path=t}write(t){e.isBuffer(t)&&(t=Array.from(t)),this.lastWrite=t,this.emit("write",t)}static list(){return Promise.resolve([])}}let o,a,l;s.SerialPort=s;try{r.env.IS_TEST_MODE?o=s:(l=i(18),o=l)}catch(t){a=t}if(null==o){if(!r.env.IS_TEST_MODE)throw console.log("It looks like serialport didn't install properly."),console.log("More information can be found here https://serialport.io/docs/guide-installation"),console.log("The result of requiring the package is: "+l),console.log(a),"Missing serialport dependency";o=s}t.exports=o}).call(this,i(7).Buffer,i(1))},function(t,e,i){(function(e){const i={micro(t){const i=e.hrtime();let r,n=0;for(;t>n;)r=e.hrtime(i),n=(1e9*r[0]+r[1])/1e3},milli(t){i.micro(1e3*t)}};t.exports=i}).call(this,i(1))},function(t,e){const i=1.70158,r=2.5949095,n=7.5625,{PI:s,cos:o,sin:a,sqrt:l}=Math,h={linear:t=>t,inQuad:t=>t*t,outQuad:t=>t*(2-t),inOutQuad:t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1),inCube:t=>t*t*t,outCube:t=>--t*t*t+1,inOutCube:t=>(t*=2)<1?t*t*t*.5:.5*((t-=2)*t*t+2),inQuart:t=>t*t*t*t,outQuart:t=>1- --t*(t*t*t),inOutQuart:t=>(t*=2)<1?t*t*t*t*.5:-.5*((t-=2)*(t*t*t)-2),inQuint:t=>t*t*t*t*t,outQuint:t=>--t*(t*t*t*t)+1,inOutQuint:t=>(t*=2)<1?t*t*t*t*t*.5:.5*((t-=2)*(t*t*t*t)+2),inSine:t=>1-o(t*s/2),outSine:t=>a(t*s/2),inOutSine:t=>.5*(1-o(s*t)),inExpo:t=>0===t?0:Math.pow(1024,t-1),outExpo:t=>1===t?t:1-Math.pow(2,-10*t),inOutExpo:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1))),inCirc:t=>1-l(1-t*t),outCirc:t=>l(1- --t*t),inOutCirc:t=>(t*=2)<1?-.5*(l(1-t*t)-1):.5*(l(1-(t-=2)*t)+1),inBack:t=>t*t*((i+1)*t-i),outBack:t=>--t*t*((i+1)*t+i)+1,inOutBack:t=>(t*=2)<1?t*t*((r+1)*t-r)*.5:.5*((t-=2)*t*((r+1)*t+r)+2),outBounce:t=>t<1/2.75?n*t*t:t<2/2.75?n*(t-=1.5/2.75)*t+.75:t<2.5/2.75?n*(t-=2.25/2.75)*t+.9375:n*(t-=2.625/2.75)*t+.984375,inBounce:t=>1-h.outBounce(1-t),inOutBounce:t=>t<.5?.5*h.inBounce(2*t):.5*h.outBounce(2*t-1)+.5},c={};Object.keys(h).forEach(t=>{c[t.toLowerCase()]=h[t]}),t.exports=new Proxy({},{get:(t,e)=>c[e.replace(/([a-z])([A-Z])/g,"$1$2").toLowerCase()]})},function(t,e,i){(function(e,r){var n=i(2).EventEmitter,s=i(12),o=1e6,a=new n,l={},h=Date.now(),c=!1,u=e.setImmediate||r.nextTick,d=function(){var t=r.hrtime();return Math.floor((1e9*t[0]+t[1])/o)},p=function(){return Date.now()},f=p;function g(t){if(!(this instanceof g))return new g(t);this.called=0,this.now=this.calledAt=f(),1e6!==o&&(t.time=~~(t.time*(1e6/o))),this.isRunnable=!0,this.later=this.now+t.time,this.task=t.task,this.type=t.type,this.time=t.time,this.later>h&&(h=this.later),l[this.later]||(l[this.later]=[]),l[this.later].push(this)}function E(t){this.refs=[],this.add(t)}s.inherits(g,n),g.deriveOp=function(t,e){return"task"!==e?e:t},g.prototype.stop=function(){this.isRunnable=!1,this.emit("stop")},s.inherits(E,n),E.prototype.stop=function(){this.refs.forEach((function(t){t.stop()})),this.emit("stop")},E.prototype.add=function(t){var e,i,r,n;for(this.cumulative=this.cumulative||0;t.length;)i=t.shift(),e=Object.keys(i).reduce(g.deriveOp,""),this.cumulative+=i[e],0===t.length&&(r=i.task,i.task=t=>{r.call(this,t),this.emit("end",t),this.cumulative=0}),n="loop"===e&&0===t.length?a.delay(this.cumulative-i[e],()=>{n=a.loop(i[e],i.task),this.refs.push(n)}):a[e](this.cumulative,i.task),this.refs.push(n)},a.queue=function(t){var e=new E(t);return v(),e};var m=f();function v(){c||(c=!0,a.emit("busy"));var t,e,i=f(),r=[],n=!0;for(h<=i&&(n=!1),e=m;e<=i;e++)[].push.apply(r,l[e]||[]);if(r.length){for(;r.length;)(t=r.shift()).isRunnable&&(t.called++,t.calledAt=i,t.task.call(t,t)),"loop"===t.type&&t.isRunnable&&(n=!0,t.later=i+t.time,t.later>h&&(h=t.later),l[t.later]||(l[t.later]=[]),t.isRunnable&&l[t.later].push(t));for(e=m;e<=i;e++)delete l[e];r.length=0}m=i,n?u(v):(c=!1,a.emit("idle"))}["loop","delay"].forEach((function(t){a[t]=function(e,i){"function"==typeof e&&(i=e,e=10);var r=new g({time:e,type:t,task:i});return c||v(),r}})),a.wait=a.defer=a.delay,a.repeat=function(t,e,i){return a.loop(e,(function(e){i(e),e.called===t&&this.stop()}))},a.clear=function(){c=!1,a.removeAllListeners(),l={}},a.resolution=function(t){.1===t||.01===t?(o=1e6*t,f=d):(o=1e6,f=p),m=f()},t.exports=a}).call(this,i(6),i(1))},function(t,e,i){(function(e){const r=i(3),n=i(5),s=i(2),o=i(13),a=i(4),l=new Map,h=r.Pins,c={down:["down","press"],up:["up","release"]},u={DEFAULT:{initialize:{value(t,e){const i=l.get(this);h.isFirmata(this)&&"string"==typeof t.pinValue&&t.pinValue.length>1&&"A"===t.pinValue[0]&&(t.pinValue=this.io.analogPins[+t.pinValue.slice(1)]),this.pin=Number.isNaN(+t.pinValue)?t.pinValue:+t.pinValue,this.io.pinMode(this.pin,this.io.MODES.INPUT),this.pullup&&this.io.digitalWrite(this.pin,this.io.HIGH),this.pulldown&&this.io.digitalWrite(this.pin,this.io.LOW),this.io.digitalRead(this.pin,t=>{t!==i.last&&e(t)})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}},TINKERKIT:{initialize:{value(t,e){const i=l.get(this);let r=0;this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,t=>{(t=t>512?1:0)!==r&&t!==i.last&&e(t),r=t})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}},EVS_EV3:{initialize:{value(t,e){const i=l.get(this);i.previous=0,i.shield=o.shieldPort(t.pin),i.register=o.Touch,i.ev3=new o(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,o.Type_EV3_TOUCH),i.ev3.read(i.shield,o.Touch,o.Touch_Bytes,t=>{const r=t[0];i.previous!==r&&e(r),i.previous=r})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}},EVS_NXT:{initialize:{value(t,e){const i=l.get(this);i.previous=0,i.shield=o.shieldPort(t.pin),i.ev3=new o(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,o.Type_ANALOG),i.ev3.read(i.shield,i.shield.analog,o.Analog_Bytes,t=>{let r=t[0]|t[1]<<8;r=r<300?1:0,i.previous!==r&&e(r),i.previous=r})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}}};class d extends s{constructor(t){let e;super();let i=!1,n=1,s=0;const o={interval:null,last:null},h=a.debounce(t=>{c[t].forEach(t=>this.emit(t))},7);let d="object"==typeof t?t.pin:t;r.Component.call(this,t=r.Options(t)),r.Controller.call(this,u,t),t.pinValue=d,this.holdtime=t.holdtime||500,this.pullup=t.pullup||t.isPullup||!1,this.pulldown=t.pulldown||t.isPulldown||!1,i=void 0!==t.invert?t.invert:this.pullup||!1,i&&(n^=1,s^=1),o.last=s,l.set(this,o),Object.defineProperties(this,{value:{get(){return Number(this.isDown)}},invert:{get:()=>i,set(t){i=t,n=i?0:1,s=i?1:0,o.last=s}},downValue:{get:()=>n,set(t){n=t,s=1^t,i=!!t,o.last=s}},upValue:{get:()=>s,set(t){s=t,n=1^t,i=!!t,o.last=n}},isDown:{get(){return this.toBoolean(e)}}}),"function"==typeof this.initialize&&this.initialize(t,t=>{e=t,this.isDown||(o.interval&&clearInterval(o.interval),h("up")),this.isDown&&(h("down"),o.interval=setInterval(()=>{this.isDown&&this.emit("hold")},this.holdtime)),o.last=t})}}class p extends n.Emitter{constructor(t){super(t)}get type(){return d}}n.installMethodForwarding(p.prototype,d.prototype),d.Collection=p,e.env.IS_TEST_MODE&&(d.Controllers=u,d.purge=function(){l.clear()}),t.exports=d}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(13),s=i(2),o=i(4),a=new Map,l={EVS_EV3:{initialize:{value(t,e){const i=a.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="RAW"===t.mode?n.Type_EV3_COLOR_RGBRAW:n.Type_EV3_COLOR,i.bytes=i.mode===n.Type_EV3_COLOR_RGBRAW?6:2,i.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255],[139,69,19]],i.shield=n.shieldPort(t.pin),i.ev3=new n(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,n.Type_EV3),i.ev3.write(i.shield,129+i.shield.offset,i.mode),i.ev3.read(i.shield,n.ColorMeasure,i.bytes,t=>{let r="";if(2===i.bytes)r+=String(t[0]|t[1]<<8||1);else for(let e=0;e<3;e++)r+=t[2*e].toString(16).padStart(2,"0");e(r)})}},toRGB:{value(t){const e=a.get(this);return e.mode===n.Type_EV3_COLOR?t>0&&t<8?e.colors[t]:e.colors[0]:(t=String(t),[0,0,0].map((e,i)=>parseInt(t.slice(2*i,2*i+2),16)))}}},EVS_NXT:{initialize:{value(t,e){const i=a.get(this);if(t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="RAW"===t.mode?n.Type_NXT_COLOR_RGBRAW:n.Type_NXT_COLOR,i.bytes=i.mode===n.Type_NXT_COLOR_RGBRAW?10:1,i.mode===n.Type_NXT_COLOR_RGBRAW)throw new Error("Raw RGB is not currently supported for the NXT.");i.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255]],i.shield=n.shieldPort(t.pin),i.ev3=new n(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,n.Type_NXT_COLOR),i.ev3.read(i.shield,112+i.shield.offset,i.bytes,t=>{let r="";1===i.bytes&&(r+=String(t[0])),e(r)})}},toRGB:{value(t){const e=a.get(this);return e.mode===n.Type_NXT_COLOR?t>0&&t<7?e.colors[t]:e.colors[0]:(t=String(t),[0,0,0].map((e,i)=>parseInt(t.slice(2*i,2*i+2),16)))}}},ISL29125:{ADDRESSES:{value:[68]},REGISTER:{value:{RESET:0,CONFIG1:1,CONFIG2:2,CONFIG3:3,READ:9}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cWriteReg(n,this.REGISTER.RESET,70),this.io.i2cWriteReg(n,this.REGISTER.CONFIG1,13),this.io.i2cWriteReg(n,this.REGISTER.CONFIG2,63),this.io.i2cWriteReg(n,this.REGISTER.CONFIG3,0),this.io.i2cRead(n,this.REGISTER.READ,6,t=>{let i="";const r=t[1]<<8|t[0],n=[(t[3]<<8|t[2])>>2,r>>2,(t[5]<<8|t[4])>>2].map(t=>o.constrain(t,0,255));for(let t=0;t<3;t++)i+=n[t].toString(16).padStart(2,"0");e(i)})}},toRGB:{value:t=>(t=String(t),[0,0,0].map((e,i)=>parseInt(t.slice(2*i,2*i+2),16)))}}},h=["red","green","blue"];class c extends s{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,l,t);const e=t.freq||25;let i=0,n=null;a.set(this,{}),this.toRGB||(this.toRGB=t.toRGB||(t=>t)),Object.defineProperties(this,{value:{get:()=>i},rgb:{get(){return this.toRGB(i).reduce((t,e,i)=>(t[h[i]]=e,t),{})}}}),"function"==typeof this.initialize&&this.initialize(t,t=>{i=t}),setInterval(()=>{if(void 0===i)return;const t={rgb:this.rgb};this.emit("data",t),i!==n&&(n=i,this.emit("change",t))},e)}static hexCode(t){return void 0===t.red||void 0===t.green||void 0===t.blue?null:0===t.length?"unknown":h.reduce((e,i)=>e+t[i].toString(16).padStart(2,"0"),"")}}e.env.IS_TEST_MODE&&(c.Controllers=l,c.purge=()=>{a.clear()}),t.exports=c}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(8),s=r.Pins,o=i(5),{scale:a,fscale:l,constrain:h}=i(4),c=new Map,u={PCA9685:{initialize:{value:function(t){const e=c.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[1e3,2e3],this.frequency=t.frequency||50,e.expander=n.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=e.expander.normalize(t.pin)}},update:{writable:!0,value:function(t){c.get(this).expander.servoWrite(this.pin,t)}}},DEFAULT:{initialize:{value:function(t){t.debug&&!this.board.pins.isServo(this.pin)&&r.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),this.io.servoConfig(this.pin,this.pwmRange[0],this.pwmRange[1])}},update:{writable:!0,value:function(t){this.io.servoWrite(this.pin,t)}}}},d={FORWARD:{device:{value:"FORWARD"}},FORWARD_REVERSE:{device:{value:"FORWARD_REVERSE"}},FORWARD_BRAKE_REVERSE:{device:{value:"FORWARD_BRAKE_REVERSE"}}};class p{constructor(t){if(!(this instanceof p))return new p(t);let e;r.Component.call(this,t=r.Options(t)),void 0===t.controller&&s.isFirmata(this)&&("string"==typeof e&&e.length>1&&"A"===e[0]&&(e=this.io.analogPins[+e.slice(1)]),e=+e,Number.isNaN(e)||this.pin===e||(this.pin=e)),r.Controller.call(this,u,t),Object.defineProperties(this,t.device&&d[t.device]||d.FORWARD),this.pwmRange=t.pwmRange||[1e3,2e3],this.neutral=t.neutral,c.set(this,{}),this.initialize(t);const[i,n]=this.pwmRange;if(void 0!==this.neutral&&this.neutral<=100&&(this.neutral=a(this.neutral,0,100,i,n)),void 0===this.neutral&&(this.neutral=(i+n)/2),this.neutral=h(this.neutral,i,n),"FORWARD_REVERSE"===this.device&&this.neutral===i)throw new Error("Bidirectional (FORWARD_REVERSE) speed controllers require a non-zero neutral point");"FORWARD"===this.device&&(this.neutral=i),this.throttle(this.neutral)}throttle(t){if(t>0&&t<=100){if("FORWARD"!==this.device)throw new Error("Bidirectional (FORWARD_REVERSE, FORWARD_*_REVERSE) speed controllers require a pulse in usec");t=l(t,0,100,this.pwmRange[0],this.pwmRange[1])}return this.update(h(t,this.pwmRange[0],this.pwmRange[1])),this}brake(){return this.update(this.neutral),this}}class f extends o{constructor(t){super(t)}get type(){return p}}o.installMethodForwarding(f.prototype,p.prototype),p.Collection=f,e.env.IS_TEST_MODE&&(p.Controllers=u,p.purge=function(){c.clear()}),t.exports=p}).call(this,i(1))},function(t,e,i){(function(e,r){const n=i(3),s=i(2),o=i(19),{toFixed:a}=i(4),l=new Map,h={ADAFRUIT_ULTIMATE_GPS:{receiver:{value:"FGPMMOPA6H"}}},c={FGPMMOPA6H:{chip:{value:"MT3339"}}},u={DEFAULT:{baud:{value:9600,writable:!0},configure:{value(t){e.nextTick(t)}}},MT3339:{baud:{value:9600,writable:!0},configure:{value(t){e.nextTick(t)}},frequency:{get(){return l.get(this).frequency},set(t){const e=l.get(this);t<10&&(t=10),e.frequency=t,this.sendCommand("$PMTK220,"+String(1e3/e.frequency))}},restart:{value(t){!0===t?this.sendCommand("$PMTK103"):(this.sendCommand("$PMTK101"),setTimeout(()=>{this.sendCommand("")},1e3))}}}};class d extends s{constructor(t){super(),Array.isArray(t)&&(t={pins:{rx:t[0],tx:t[1],onOff:t[2]}}),void 0===t.pins&&(t.pins={}),n.Component.call(this,t=n.Options(t));let e=t.breakout||{},i=t.receiver,r=t.chip;h[e]&&(!i&&h[e].receiver&&(i=h[e].receiver.value),!r&&h[e].chip&&(r=h[e].chip.value)),r||(r=i&&c[i].chip?c[i].chip.value:"DEFAULT"),e="string"==typeof e?u[e]:t.breakout,r="string"==typeof r?u[r]:t.chip,i="string"==typeof i?c[i]:t.receiver,r&&Object.defineProperties(this,r),i&&Object.defineProperties(this,i),e&&Object.defineProperties(this,e),this.fixed=t.fixed||6,this.baud=t.baud||this.baud;let s={sat:{},latitude:0,longitude:0,altitude:0,speed:0,course:0,frequency:1,lowPowerMode:!1};l.set(this,s),Object.defineProperties(this,{latitude:{get:()=>s.latitude},longitude:{get:()=>s.longitude},altitude:{get:()=>s.altitude},sat:{get:()=>s.sat},speed:{get:()=>s.speed},course:{get:()=>s.course},time:{get:()=>s.time}}),this.initialize&&this.initialize(t)}initialize(t){const e=l.get(this);e.portId=t.serialPort||t.portId||t.port||t.bus,void 0===e.portId&&this.io.SERIAL_PORT_IDs&&(e.portId=this.io.SERIAL_PORT_IDs.DEFAULT),["tx","rx"].forEach(t=>{this.pins[t]&&this.io.pinMode(this.pins[t],this.io.MODES.SERIAL)}),this.pins.onOff&&(this.io.pinMode(this.pins.onOff,this.io.MODES.OUTPUT),this.onOff=new o(this.pins.onOff)),this.io.serialConfig({portId:e.portId,baud:this.baud,rxPin:this.pins.rx,txPin:this.pins.tx}),this.configure&&this.configure(()=>{this.listen(),t.frequency&&(this.frequency=t.frequency)})}sendCommand(t){const e=l.get(this),i=[];for(let e=0;e<t.length;++e)i[e]=t.charCodeAt(e);const r=f(t.substring(1));i.push(42,r.charCodeAt(0),r.charCodeAt(1),13,10),this.io.serialWrite(e.portId,i)}listen(){const t=l.get(this);let e="";this.io.serialRead(t.portId,t=>{e+=new r(t).toString("ascii");const i=e.split("\r\n");if(i.length>1){for(let t=0;t<i.length-1;t++)this.parseNmeaSentence(i[t]);e=i[i.length-1]}})}parseNmeaSentence(t){const e=l.get(this),i=t.split("*");if(i[1]!==f(i[0].substring(1)))return;this.emit("sentence",t);const r=i[0].split(","),n=e.latitude,s=e.longitude,o=e.altitude,h=e.speed,c=e.course;switch(r[0]){case"$GPGGA":e.time=r[1],e.latitude=p(r[2],2,r[3],this.fixed),e.longitude=p(r[4],3,r[5],this.fixed),e.altitude=Number(r[9]);break;case"$GPGSA":e.sat.satellites=r.slice(3,15),e.sat.pdop=Number(r[15]),e.sat.hdop=Number(r[16]),e.sat.vdop=Number(r[17]),this.emit("operations",t);break;case"$GPRMC":e.time=r[1],e.latitude=p(r[3],2,r[4],this.fixed),e.longitude=p(r[5],3,r[6],this.fixed),e.course=Number(r[8]),e.speed=a(.514444*r[7],this.fixed);break;case"$GPVTG":e.course=Number(r[1]),e.speed=a(.514444*r[5],this.fixed);break;case"$GPGSV":break;case"$PGACK":this.emit("acknowledge",t);break;default:this.emit("unknown",t)}this.emit("data",{latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,speed:e.speed,course:e.course,sat:e.sat,time:e.time}),n===e.latitude&&s===e.longitude&&o===e.altitude||this.emit("change",{latitude:e.latitude,longitude:e.longitude,altitude:e.altitude}),h===e.speed&&c===e.course||this.emit("navigation",{speed:e.speed,course:e.course})}}function p(t,e,i,r){if(t){let n=Number(t.substring(0,e))+Number(t.substring(e))/60;return"S"!==i&&"W"!==i||(n*=-1),Number(n.toFixed(r))}return 0}function f(t){let e=0;for(let i=0;i<t.length;++i)e^=t.charCodeAt(i);return e=e.toString(16).toUpperCase(),e.length<2&&(e=("00"+e).slice(-2)),e}e.env.IS_TEST_MODE&&(d.Breakouts=h,d.Chips=u,d.Receivers=c,d.purge=()=>{l.clear()}),t.exports=d}).call(this,i(1),i(7).Buffer)},function(t,e,i){(function(e){const r=i(3),n=i(2),s=i(4),{scale:o,toFixed:a,uint16:l}=s,h=new Map,c={down:["down","press","tap","impact","hit","touch"],up:["up","release"],hold:["hold"]};function u(t){let e=[];var i;return t.keys&&Array.isArray(t.keys)&&(e=t.keys.slice(),e.every(Array.isArray)&&(e=(i=e).flat?i.flat():i.reduce((t,e)=>t.concat(e),[]))),e}const d={MPR121:{ADDRESSES:{value:[90,91,92,93]},REGISTER:{value:i(84)},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=h.get(this),c=this.REGISTER.MAPS[t.controller].KEYS,d=this.REGISTER.MAPS[t.controller].TARGETS,f=Object.keys(c).reduce((t,e)=>(t[e]=c[e],t),[]);let g=u(t);const E=f.length;this.io.i2cConfig(t),this.io.i2cWrite(n,this.REGISTER.MPR121_SOFTRESET,99),this.io.i2cWrite(n,this.REGISTER.MHD_RISING,1),this.io.i2cWrite(n,this.REGISTER.NHD_AMOUNT_RISING,1),this.io.i2cWrite(n,this.REGISTER.NCL_RISING,0),this.io.i2cWrite(n,this.REGISTER.FDL_RISING,0),this.io.i2cWrite(n,this.REGISTER.MHD_FALLING,1),this.io.i2cWrite(n,this.REGISTER.NHD_AMOUNT_FALLING,1),this.io.i2cWrite(n,this.REGISTER.NCL_FALLING,255),this.io.i2cWrite(n,this.REGISTER.FDL_FALLING,2),this.sensitivity={press:Array(12).fill(.95),release:Array(12).fill(.975)},t.keys&&"MPR121_SHIELD"===t.controller&&(g=g.reverse()),t.sensitivity&&(Array.isArray(t.sensitivity)?t.sensitivity.forEach((function({press:t,release:e},i){void 0!==t&&(this.sensitivity.press[i]=t),void 0!==e&&(this.sensitivity.release[i]=e)}),this):(void 0!==t.sensitivity.press&&this.sensitivity.press.fill(t.sensitivity.press),void 0!==t.sensitivity.release&&this.sensitivity.release.fill(t.sensitivity.release)));for(let t=0;t<12;t++)this.io.i2cWrite(n,this.REGISTER.ELE0_TOUCH_THRESHOLD+(t<<1),o(a(1-this.sensitivity.press[t],3),0,1,0,255)),this.io.i2cWrite(n,this.REGISTER.ELE0_RELEASE_THRESHOLD+(t<<1),o(a(1-this.sensitivity.release[t],3),0,1,0,255));this.io.i2cWrite(n,this.REGISTER.FILTER_CONFIG,19),this.io.i2cWrite(n,this.REGISTER.AFE_CONFIGURATION,128),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_CONTROL_0,143),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_USL,228),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_LSL,148),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_TARGET_LEVEL,205),this.io.i2cWrite(n,this.REGISTER.ELECTRODE_CONFIG,204),g.length||(g=Array.from(Object.assign({},c,{length:E}))),s.length=E,s.touches=p(E),s.keys=g,s.mapping=f,s.targets=d,s.isMultitouch=!0,this.io.i2cRead(n,0,2,t=>e(l(t[1],t[0])))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=h.get(this),i=[];for(let r=0;r<12;r++)t&1<<r&&i.push(e.targets[t&1<<r]);return i}}},VKEY:{initialize:{value(t,e){const i=h.get(this),r=t.aref||this.io.aref||5,n=s.inRange(r,4.5,5.5),o=[1,2,3,4,5,6,7,8,9,10,11,12];let a=u(t),l=0;a.length||(a=o),i.scale=[n?17:26,n?40:58,n?496:721],l=o.length,i.length=l,i.touches=p(l),i.mapping=o,i.keys=a,i.isMultitouch=!1,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,t=>e(t))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=h.get(this),i=e.length,r=e.scale[0],n=e.scale[1],s=e.scale[2];return t<r||t>s?[]:[i-(t-r)/n|0]}}},ANALOG:{initialize:{value(t,e){let i=u(t),r=[],n=0;if(t.length&&!i.length&&(i=Array.from({length:t.length},(t,e)=>e)),!i.length)throw new Error("Missing `keys`. Analog Keypad requires either a numeric `length` or a `keys` array.");r=i,n=r.length;const s=h.get(this),o=n+1,a=Math.round(1023/o),l=Array.from({length:o},(t,e)=>{const i=a*e;return Array.from({length:a-1},(t,e)=>i+e)});s.length=n,s.ranges=l,s.touches=p(n),s.mapping=r,s.keys=i,s.isMultitouch=!0,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,t=>e(t))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=h.get(this);let i=e.ranges.findIndex(e=>e.includes(t));return i===e.length&&i--,i<0?[]:[i]}}},AT42QT1070:{ADDRESSES:{value:[27]},REGISTER:{value:{READ:3}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=h.get(this),o=[0,1,2,3,4,5,6];let a=u(t),l=0;a.length||(a=o),l=o.length,s.length=l,s.touches=p(l),s.mapping=o,s.keys=a,s.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(n,this.REGISTER.READ,1,t=>e(t[0]))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=[];for(let i=0;i<7;i++)t&1<<i&&e.push(i);return e}}},"3X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=h.get(this),o=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let a=u(t),c=0;a.length||(a=o),c=o.length,s.length=c,s.touches=p(c),s.mapping=o,s.keys=a,s.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(n,2,t=>e(l(t[0],t[1])))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=h.get(this),i=[];for(let r=0;r<e.length;r++)t&1<<r&&i.push(r);return i}}},"4X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=h.get(this);let o=u(t);const a=[1,2,3,"A",4,5,6,"B",7,8,9,"C","*",0,"#","D"];let c=0;o.length||(o=a),c=a.length,s.length=c,s.touches=p(c),s.mapping=a,s.keys=o,s.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(n,2,t=>e(l(t[0],t[1])))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=h.get(this),i=[];for(let r=0;r<e.length;r++)t&1<<r&&i.push(r);return i}}},SX1509:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{value:{PULLUP:3,OPEN_DRAIN:5,DIR:7,DIR_B:14,DIR_A:15}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=h.get(this);let o=u(t);const a=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let c=0;o.length||(o=a),c=a.length,s.length=c,s.touches=p(c),s.mapping=a,s.keys=o,s.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cWriteReg(n,this.REGISTER.DIR,240),this.io.i2cWriteReg(n,this.REGISTER.OPEN_DRAIN,15),this.io.i2cWriteReg(n,this.REGISTER.PULLUP,240),this.io.i2cRead(n,2,t=>e(l(t[0],t[1])))}},toAlias:{value(t){return h.get(this).keys[t]}},toIndices:{value(t){const e=h.get(this),i=[];for(let r=0;r<e.length;r++)t&1<<r&&i.push(r);return i}}}};function p(t){return Array.from({length:t},()=>({timeout:null,value:0}))}d.MPR121QR2=d.MPR121,d.MPR121QR2_SHIELD=d.MPR121,d.MPR121_KEYPAD=d.MPR121,d.MPR121_SHIELD=d.MPR121,d.QTOUCH=d.AT42QT1070,d.DEFAULT=d.ANALOG;class f extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t));let e=null;const i={touches:null,timeout:null,length:null,keys:null,mapping:null,holdtime:null},n=s.debounce((function(t,e){const i={type:t,which:e,timestamp:Date.now()};c[t].forEach((function(t){this.emit(t,i)}),this),this.emit("change",Object.assign({},i))}),5);r.Controller.call(this,d,t),i.holdtime=t.holdtime?t.holdtime:500,h.set(this,i),"function"==typeof this.initialize&&this.initialize(t,t=>{e=t;const r=Date.now(),s=this.toIndices(t),o=i.length,a={down:[],hold:[],up:[]};let l=null,h=null;for(let t=0;t<o;t++)h=this.toAlias(t),s.includes(t)?(0===i.touches[t].value?(i.touches[t].timeout=r+i.holdtime,a.down.push(h)):1===i.touches[t].value&&null!==i.touches[t].timeout&&r>i.touches[t].timeout&&(i.touches[t].timeout=r+i.holdtime,a.hold.push(h)),i.touches[t].value=1):(1===i.touches[t].value&&(i.touches[t].timeout=null,a.up.push(h)),i.touches[t].value=0),l=null,h=null;Object.keys(a).forEach((function(t){const e=a[t];e.length&&n.call(this,t,e)}),this)}),Object.defineProperties(this,{isMultitouch:{get:()=>i.isMultitouch},value:{get:()=>e}})}}e.env.IS_TEST_MODE&&(f.Controllers=d,f.purge=()=>{h.clear()}),t.exports=f}).call(this,i(1))},function(t,e){t.exports={MAPS:{MPR121QR2_SHIELD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9},TARGETS:{256:0,32:1,4:2,128:3,16:4,2:5,64:6,8:7,1:8}},MPR121:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}},MPR121_KEYPAD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,10:11,11:12},TARGETS:{8:0,128:1,2048:2,4:3,64:4,1024:5,2:6,32:7,512:8,1:9,16:10,256:11}},MPR121_SHIELD:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}}},MPR121_DEFAULT_ADDRESS:90,MPR121_SOFTRESET:128,ELE0_ELE7_TOUCH_STATUS:0,ELE8_ELE11_ELEPROX_TOUCH_STATUS:1,ELE0_7_OOR_STATUS:2,ELE8_11_ELEPROX_OOR_STATUS:3,ELE0_FILTERED_DATA_LSB:4,ELE0_FILTERED_DATA_MSB:5,ELE1_FILTERED_DATA_LSB:6,ELE1_FILTERED_DATA_MSB:7,ELE2_FILTERED_DATA_LSB:8,ELE2_FILTERED_DATA_MSB:9,ELE3_FILTERED_DATA_LSB:10,ELE3_FILTERED_DATA_MSB:11,ELE4_FILTERED_DATA_LSB:12,ELE4_FILTERED_DATA_MSB:13,ELE5_FILTERED_DATA_LSB:14,ELE5_FILTERED_DATA_MSB:15,ELE6_FILTERED_DATA_LSB:16,ELE6_FILTERED_DATA_MSB:17,ELE7_FILTERED_DATA_LSB:18,ELE7_FILTERED_DATA_MSB:19,ELE8_FILTERED_DATA_LSB:20,ELE8_FILTERED_DATA_MSB:21,ELE9_FILTERED_DATA_LSB:22,ELE9_FILTERED_DATA_MSB:23,ELE10_FILTERED_DATA_LSB:24,ELE10_FILTERED_DATA_MSB:25,ELE11_FILTERED_DATA_LSB:26,ELE11_FILTERED_DATA_MSB:27,ELEPROX_FILTERED_DATA_LSB:28,ELEPROX_FILTERED_DATA_MSB:29,ELE0_BASELINE_VALUE:30,ELE1_BASELINE_VALUE:31,ELE2_BASELINE_VALUE:32,ELE3_BASELINE_VALUE:33,ELE4_BASELINE_VALUE:34,ELE5_BASELINE_VALUE:35,ELE6_BASELINE_VALUE:36,ELE7_BASELINE_VALUE:37,ELE8_BASELINE_VALUE:38,ELE9_BASELINE_VALUE:39,ELE10_BASELINE_VALUE:40,ELE11_BASELINE_VALUE:41,ELEPROX_BASELINE_VALUE:42,MHD_RISING:43,NHD_AMOUNT_RISING:44,NCL_RISING:45,FDL_RISING:46,MHD_FALLING:47,NHD_AMOUNT_FALLING:48,NCL_FALLING:49,FDL_FALLING:50,NHD_AMOUNT_TOUCHED:51,NCL_TOUCHED:52,FDL_TOUCHED:53,ELEPROX_MHD_RISING:54,ELEPROX_NHD_AMOUNT_RISING:55,ELEPROX_NCL_RISING:56,ELEPROX_FDL_RISING:57,ELEPROX_MHD_FALLING:58,ELEPROX_NHD_AMOUNT_FALLING:59,ELEPROX_FDL_FALLING:60,ELEPROX_NHD_AMOUNT_TOUCHED:62,ELEPROX_NCL_TOUCHED:63,ELEPROX_FDL_TOUCHED:64,ELE0_TOUCH_THRESHOLD:65,ELE0_RELEASE_THRESHOLD:66,ELE1_TOUCH_THRESHOLD:67,ELE1_RELEASE_THRESHOLD:68,ELE2_TOUCH_THRESHOLD:69,ELE2_RELEASE_THRESHOLD:70,ELE3_TOUCH_THRESHOLD:71,ELE3_RELEASE_THRESHOLD:72,ELE4_TOUCH_THRESHOLD:73,ELE4_RELEASE_THRESHOLD:74,ELE5_TOUCH_THRESHOLD:75,ELE5_RELEASE_THRESHOLD:76,ELE6_TOUCH_THRESHOLD:77,ELE6_RELEASE_THRESHOLD:78,ELE7_TOUCH_THRESHOLD:79,ELE7_RELEASE_THRESHOLD:80,ELE8_TOUCH_THRESHOLD:81,ELE8_RELEASE_THRESHOLD:82,ELE9_TOUCH_THRESHOLD:83,ELE9_RELEASE_THRESHOLD:84,ELE10_TOUCH_THRESHOLD:85,ELE10_RELEASE_THRESHOLD:86,ELE11_TOUCH_THRESHOLD:87,ELE11_RELEASE_THRESHOLD:88,ELEPROX_TOUCH_THRESHOLD:89,ELEPROX_RELEASE_THRESHOLD:90,DEBOUNCE_TOUCH_AND_RELEASE:91,AFE_CONFIGURATION:92,FILTER_CONFIG:93,ELECTRODE_CONFIG:94,ELE0_CURRENT:95,ELE1_CURRENT:96,ELE2_CURRENT:97,ELE3_CURRENT:98,ELE4_CURRENT:99,ELE5_CURRENT:100,ELE6_CURRENT:101,ELE7_CURRENT:102,ELE8_CURRENT:103,ELE9_CURRENT:104,ELE10_CURRENT:105,ELE11_CURRENT:106,ELEPROX_CURRENT:107,ELE0_ELE1_CHARGE_TIME:108,ELE2_ELE3_CHARGE_TIME:109,ELE4_ELE5_CHARGE_TIME:110,ELE6_ELE7_CHARGE_TIME:111,ELE8_ELE9_CHARGE_TIME:112,ELE10_ELE11_CHARGE_TIME:113,ELEPROX_CHARGE_TIME:114,GPIO_CONTROL_0:115,GPIO_CONTROL_1:116,GPIO_DATA:117,GPIO_DIRECTION:118,GPIO_ENABLE:119,GPIO_SET:120,GPIO_CLEAR:121,GPIO_TOGGLE:122,AUTO_CONFIG_CONTROL_0:123,AUTO_CONFIG_CONTROL_1:124,AUTO_CONFIG_USL:125,AUTO_CONFIG_LSL:126,AUTO_CONFIG_TARGET_LEVEL:127,TOUCH_THRESHOLD:15,RELEASE_THRESHOLD:10,NUM_CHANNELS:12}},function(t,e,i){(function(e){var r=i(3),n=i(19),s=i(86),o=i(20);const a=new Map;function l(t){const i=e.hrtime();let r,n=0;for(;t>n;)r=e.hrtime(i),n=(1e9*r[0]+r[1])/1e3}function h(t){l(1e3*t)}class c{constructor(t,e){this.address=t,this.mask=255,this.memory=0,this.io=e}pinMode(t,e){1===e?this.mask&=~(1<<t):this.mask|=1<<t}portMode(t){this.mask=0===t?255:0}portWrite(t){this.memory=t&~this.mask,this.io.i2cWrite(this.address,this.memory)}}const u={DEFAULT:{SHIFT_LEFT:4,CLEAR:1,HOME:2,ENTRY:4,DISPLAY:8,DIMENSIONS:32,CURSORSHIFT:16,SETCGRAMADDR:64,SETDDRAMADDR:128,DATA:64,COMMAND:128,ENTRYRIGHT:0,ENTRYLEFT:2,ENTRYSHIFTINCREMENT:1,ENTRYSHIFTDECREMENT:0,DISPLAYON:4,DISPLAYOFF:0,CURSORON:2,CURSOROFF:0,BLINKON:1,BLINKOFF:0,DISPLAYMOVE:8,CURSORMOVE:0,MOVERIGHT:4,MOVELEFT:0,BITMODE:{4:0,8:16},LINE:{1:0,2:8},DOTS:{"5x10":4,"5x8":0},BACKLIGHT_ON:8,BACKLIGHT_OFF:0,MEMORYLIMIT:8,EN:4,RW:2,RS:1,D4:4,D5:5,D6:6,D7:7}},d={JHD1313M1:{REGISTER:{value:u.DEFAULT},CHARS:{value:s.DEFAULT},initialize:{value(t){this.address={lcd:t.address||62,rgb:98},t.address=this.address,this.io.i2cConfig(t),this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8";const e={display:this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};a.set(this,e);{const t=this.REGISTER.DIMENSIONS|this.REGISTER.LINE[2];h(50),this.command(t),h(5),this.command(t),this.command(t),this.command(t),h(5),this.command(this.REGISTER.ENTRY|this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT),this.on(),this.clear(),this.home()}this.bgOn(),t.color?this.bgColor(t.color):this.bgColor("black")}},clear:{value(){return this.command(this.REGISTER.CLEAR)}},setCursor:{value(t,e){return this.command(0===e?128|t:192|t)}},autoscroll:{value(){const t=a.get(this);return t.display=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}},bgColor:{value(t,e,i){const r=o.ToRGB(t,e,i),n=this.address.rgb;return this.io.i2cWrite(n,[0,0]),this.io.i2cWrite(n,[1,0]),this.io.i2cWrite(n,[4,r.red]),this.io.i2cWrite(n,[3,r.green]),this.io.i2cWrite(n,[2,r.blue]),this}},bgOn:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,170]),this}},bgOff:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,0]),this}},command:{value(t,e){return 1===arguments.length&&(e=t,t=this.REGISTER.COMMAND),t===this.REGISTER.DATA?this.send(e):this.writeBits(this.REGISTER.COMMAND,e)}},send:{value(t){return this.writeBits(this.REGISTER.DATA,t)}},writeBits:{value(t,e){return this.io.i2cWrite(this.address.lcd,[t,e]),this}},hilo:{value(t){t.call(this)}}},PCF8574:{REGISTER:{value:Object.assign({},u.DEFAULT,{COMMAND:0,DATA:1,BACKLIGHT_ON:255,BACKLIGHT_OFF:0})},CHARS:{value:s.DEFAULT},initialize:{value(t){this.bitMode=t.bitMode||4,this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8",t.address||(t.address=["PCF8574A","PCF8574AT"].includes(t.controller)?63:39),this.io.i2cConfig(t),this.address={lcd:t.address},this.expander=new c(this.address.lcd,this.io),this.expander.portMode(this.io.MODES.OUTPUT),this.expander.portWrite(0);const e=t.backlight||{polarity:0,pin:3};e.pin=void 0===e.pin?3:e.pin,e.polarity=void 0===e.polarity?0:e.polarity;const i=this.REGISTER.BITMODE[this.bitMode]|this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots],r=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,n=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT,s={display:r,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:e.polarity,pinMask:1<<e.pin,statusMask:0},data:[1<<this.REGISTER.D4,1<<this.REGISTER.D5,1<<this.REGISTER.D6,1<<this.REGISTER.D7]};a.set(this,s);let o=3<<this.REGISTER.SHIFT_LEFT;this.expander.portWrite(o),this.pulse(o),h(4),this.expander.portWrite(o),this.pulse(o),h(4),this.expander.portWrite(o),this.pulse(o),o=2<<this.REGISTER.SHIFT_LEFT,this.expander.portWrite(o),this.pulse(o),this.command(this.REGISTER.DIMENSIONS|i),this.command(s.display),s.display=n,this.command(this.REGISTER.ENTRY|s.display),this.on(),this.clear(),this.backlight()}},clear:{value(){return this.command(this.REGISTER.CLEAR),h(2),this}},backlight:{value(t){const e=a.get(this);let i;return t=void 0===t?255:t,0!==e.backlight.pinMask&&(i=0===e.backlight.polarity&&t>0||1===e.backlight.polarity&&0===t?255:0,e.backlight.statusMask=e.backlight.pinMask&i,this.expander.portWrite(e.backlight.statusMask)),this}},createChar:{value(t,e){const i=a.get(this);let r;"number"==typeof t?r=7&t:(r=i.index,i.index--,-1===i.index&&(i.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|r<<3),h(1);for(let t=0;t<8;t++)this.command(this.REGISTER.DATA,e[t]),h(1);return i.characters[t]=r,r}},noBacklight:{value(){this.backlight(0)}},on:{value(){const t=a.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|t.display),this}},off:{value(){const t=a.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|t.display),this}},hilo:{value(t){t.call(this)}},command:{value(t,e){return 1===arguments.length&&(e=t,t=this.REGISTER.COMMAND),this.send(t,e),this}},send:{writable:!0,value(t,e){return this.writeBits(t,e>>4),this.writeBits(t,15&e),this}},writeBits:{writable:!0,value(t,e){const i=a.get(this);let r=0;for(let t=0;t<4;t++)1==(1&e)&&(r|=i.data[t]),e>>=1;return t===this.REGISTER.DATA&&(t=this.REGISTER.RS),r|=t|i.backlight.statusMask,this.pulse(r),this}},pulse:{writable:!0,value(t){this.expander.portWrite(t|this.REGISTER.EN),this.expander.portWrite(t&~this.REGISTER.EN)}}},PARALLEL:{REGISTER:{value:u.DEFAULT},CHARS:{value:s.DEFAULT},initialize:{value(t){this.bitMode=t.bitMode||4,this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8",Array.isArray(t.pins)?this.pins={rs:t.pins[0],en:t.pins[1],data:[t.pins[5],t.pins[4],t.pins[3],t.pins[2]]}:this.pins=t.pins;const e=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON,i={display:e,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};if(a.set(this,i),t.pins.forEach((function(t){this.io.pinMode(t,1)}),this),this.io.digitalWrite(this.pins.rs,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.LOW),t.backlight){if("number"==typeof t.backlight){const e=t.backlight;t.backlight={pin:e}}t.backlight.pin&&(i.backlight.pin=new n({pin:t.backlight.pin,board:this.board}),i.backlight.pin.high())}this.command(3),h(4),this.command(3),h(4),this.command(3),4===this.bitMode&&this.command(2),this.command(this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots]),this.command(e),this.clear(),this.home()}}}};d.LCM1602=d.LCD1602=d.LCM1602IIC=d.LCD2004=d.PCF8574A=d.PCF8574AT=d.PCF8574T=d.PCF8574,d.MJKDZ=Object.assign({},d.PCF8574,{REGISTER:{value:Object.assign({},u.DEFAULT,{SHIFT_LEFT:0,COMMAND:0,DATA:6,EN:16,RW:5,RS:6,D4:0,D5:1,D6:2,D7:3})},writeBits:{writable:!0,value(t,e){const i=a.get(this);let r=0;for(let t=0;t<4;t++)1==(1&e)&&(r|=i.data[t]),e>>=1;return t===this.REGISTER.DATA&&(t=1<<this.REGISTER.RS),r|=t|i.backlight.statusMask,this.pulse(r),this}}}),d.DEFAULT=d.PARALLEL;class p{constructor(t){r.Component.call(this,t=r.Options(t)),r.Controller.call(this,d,t),this.ctype=t.controller,this.initialize&&this.initialize(t),Object.defineProperties(this,{characters:{get(){return Object.assign({},a.get(this).characters)}}})}command(t,e){return void 0===e&&(e=t,t=128),4===this.bitMode&&this.send(e>>4),this.send(e),this}send(t){let e=0,i={4:8,8:128}[this.bitMode];for(;i>0;i>>=1)this.io.digitalWrite(this.pins.data[e],this.io[t&i?"HIGH":"LOW"]),e++;return this.io.digitalWrite(this.pins.en,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.HIGH),l(1),this.io.digitalWrite(this.pins.en,this.io.LOW),l(37),this}hilo(t){this.io.digitalWrite(this.pins.rs,this.io.HIGH),t.call(this),this.io.digitalWrite(this.pins.rs,this.io.LOW)}print(t,e){let i,r,n,s;return t=""+t,e=e||{},i=a.get(this),r=e.dontProcessSpecials||!1,n=!r&&f.test(t),1===t.length?this.hilo((function(){this.command(this.REGISTER.DATA,t.charCodeAt(0))})):n?(s=t.replace(f,(t,e)=>{const r=i.characters[e];return"number"==typeof r?String.fromCharCode(r):t}),this.print(s,{dontProcessSpecials:!0})):this.hilo((function(){Array.from(t).forEach((function(t){this.command(this.REGISTER.DATA,t.charCodeAt(0))}),this)})),this}write(t){return this.hilo.call(this,(function(){this.command(this.REGISTER.DATA,t)})),this}clear(){return this.command(this.REGISTER.CLEAR),h(2),this}home(){return this.command(this.REGISTER.HOME),h(2),this}setCursor(t,e){return this.command(this.REGISTER.SETDDRAMADDR|t+[0,64,20,84][e]),this}backlight(t){const e=a.get(this);return t=void 0===t,e.backlight.pin instanceof n&&(t?e.backlight.pin.high():e.backlight.pin.low()),t?e.display|=this.REGISTER.DISPLAYON:e.display&=~this.REGISTER.DISPLAYON,this.command(e.display),this}noBacklight(){const t=a.get(this);return t.backlight.pin instanceof n&&t.backlight.pin.high(),this.backlight(!1)}on(){const t=a.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(t.display),this}off(){const t=a.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(t.display),this}cursor(t,e){if(void 0!==e&&void 0!==t)return this.setCursor(e,t);const i=a.get(this);return i.display|=this.REGISTER.CURSORON,this.command(i.display),this}noCursor(){const t=a.get(this);return t.display&=~this.REGISTER.CURSORON,this.command(t.display),this}blink(){const t=a.get(this);return t.display|=this.REGISTER.BLINKON,this.command(t.display),this}noBlink(){const t=a.get(this);return t.display&=~this.REGISTER.BLINKON,this.command(t.display),this}autoscroll(){const t=a.get(this);return t.display|=this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}noAutoscroll(){const t=a.get(this);return t.display&=~this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}createChar(t,e){const i=a.get(this);let r;return"number"==typeof t?r=7&t:(r=i.index,i.index--,-1===i.index&&(i.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|r<<3),this.hilo((function(){for(let t=0;t<8;t++)this.command(this.REGISTER.DATA,e[t])})),i.characters[t]=r,r}useChar(t){const e=a.get(this);if(void 0===e.characters[t]){const i=this.createChar(t,this.CHARS[t]);for(const r in e.characters)if(t!==r&&e.characters[r]===i){delete e.characters[r];break}e.characters[t]=i}return this}}const f=/:(\w+):/g;p.POSITIVE=0,p.NEGATIVE=1,p.Characters=s,t.exports=p}).call(this,i(1))},function(t,e){t.exports={DEFAULT:{0:[14,27,27,27,27,27,14,0],1:[2,6,14,6,6,6,6,0],2:[14,27,3,6,12,24,31,0],3:[14,27,3,14,3,27,14,0],4:[3,7,15,27,31,3,3,0],5:[31,24,30,3,3,27,14,0],6:[14,27,24,30,27,27,14,0],7:[31,3,6,12,12,12,12,0],8:[14,27,27,14,27,27,14,0],9:[14,27,27,15,3,27,14,0],10:[23,21,21,21,23,0,31,0],11:[10,10,10,10,10,0,31,0],12:[23,17,23,20,23,0,31,0],13:[23,17,19,17,23,0,31,0],14:[21,21,23,17,17,0,31,0],15:[23,20,23,17,23,0,31,0],16:[23,20,23,21,23,0,31,0],17:[23,17,18,18,18,0,31,0],18:[23,21,23,21,23,0,31,0],19:[23,21,23,17,23,0,31,0],circle:[0,14,17,17,17,14,0,0],cdot:[0,14,17,21,17,14,0,0],donut:[0,14,31,27,31,14,0,0],ball:[0,14,31,31,31,14,0,0],square:[0,31,17,17,17,31,0,0],sdot:[0,31,17,21,17,31,0,0],fbox:[0,31,31,31,31,31,0,0],sbox:[0,0,14,10,14,0,0,0],sfbox:[0,0,14,14,14,0,0,0],bigpointerright:[8,12,10,9,10,12,8,0],bigpointerleft:[2,6,10,18,10,6,2,0],arrowright:[8,12,10,9,10,12,8,0],arrowleft:[2,6,10,18,10,6,2,0],ascprogress1:[16,16,16,16,16,16,16,16],ascprogress2:[24,24,24,24,24,24,24,24],ascprogress3:[28,28,28,28,28,28,28,28],ascprogress4:[30,30,30,30,30,30,30,30],fullprogress:[31,31,31,31,31,31,31,31],descprogress1:[1,1,1,1,1,1,1,1],descprogress2:[3,3,3,3,3,3,3,3],descprogress3:[7,7,7,7,7,7,7,7],descprogress4:[15,15,15,15,15,15,15,15],ascchart1:[31,0,0,0,0,0,0,0],ascchart2:[31,31,0,0,0,0,0,0],ascchart3:[31,31,31,0,0,0,0,0],ascchart4:[31,31,31,31,0,0,0,0],ascchart5:[31,31,31,31,31,0,0,0],ascchart6:[31,31,31,31,31,31,0,0],ascchart7:[31,31,31,31,31,31,31,0],descchart1:[0,0,0,0,0,0,0,31],descchart2:[0,0,0,0,0,0,31,31],descchart3:[0,0,0,0,0,31,31,31],descchart4:[0,0,0,0,31,31,31,31],descchart5:[0,0,0,31,31,31,31,31],descchart6:[0,0,31,31,31,31,31,31],descchart7:[0,31,31,31,31,31,31,31],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],bordertopbottom5:[31,0,0,0,0,0,0,31],borderright1:[16,16,16,16,16,16,16,16],borderright2:[24,8,8,8,8,8,8,24],borderright3:[28,4,4,4,4,4,4,28],borderright4:[30,2,2,2,2,2,2,30],borderright5:[31,1,1,1,1,1,1,31],box1:[3,3,3,0,0,0,0,0],box2:[24,24,24,0,0,0,0,0],box3:[27,27,27,0,0,0,0,0],box4:[0,0,0,0,3,3,3,0],box5:[3,3,3,0,3,3,3,0],box6:[24,24,24,0,3,3,3,0],box7:[27,27,27,0,3,3,3,0],box8:[0,0,0,0,24,24,24,0],box9:[3,3,3,0,24,24,24,0],box10:[24,24,24,0,24,24,24,0],box11:[27,27,27,0,24,24,24,0],box12:[0,0,0,0,27,27,27,0],box13:[3,3,3,0,27,27,27,0],box14:[24,24,24,0,27,27,27,0],box15:[27,27,27,0,27,27,27,0],euro:[3,4,30,8,30,8,7,0],cent:[0,0,14,17,16,21,14,8],speaker:[1,3,15,15,15,3,1,0],sound:[8,16,0,24,0,16,8,0],x:[0,27,14,4,14,27,0,0],target:[0,10,17,21,17,10,0,0],pointerright:[0,8,12,14,12,8,0,0],pointerup:[0,0,4,14,31,0,0,0],pointerleft:[0,2,6,14,6,2,0,0],pointerdown:[0,0,31,14,4,0,0,0],arrowne:[0,15,3,5,9,16,0,0],arrownw:[0,30,24,20,18,1,0,0],arrowsw:[0,1,18,20,24,30,0,0],arrowse:[0,16,9,5,3,15,0,0],dice1:[0,0,0,4,0,0,0,0],dice2:[0,16,0,0,0,1,0,0],dice3:[0,16,0,4,0,1,0,0],dice4:[0,17,0,0,0,17,0,0],dice5:[0,17,0,4,0,17,0,0],dice6:[0,17,0,17,0,17,0,0],bell:[4,14,14,14,31,0,4,0],smile:[0,10,0,17,14,0,0,0],note:[2,3,2,14,30,12,0,0],clock:[0,14,21,23,17,14,0,0],heart:[0,10,31,31,31,14,4,0],duck:[0,12,29,15,15,6,0,0],check:[0,1,3,22,28,8,0,0],retarrow:[1,1,5,9,31,8,4,0],runninga:[6,6,5,14,20,4,10,17],runningb:[6,6,4,14,14,4,10,10]}}},function(t,e,i){var r=i(44),n=i(89),s={};Object.keys(r).forEach((function(t){s[t]={},Object.defineProperty(s[t],"channels",{value:r[t].channels});var e=n(t);Object.keys(e).forEach((function(i){var r=e[i];s[t][i]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var r=i.length,n=0;n<r;n++)i[n]=Math.round(i[n]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(r),s[t][i].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=s},function(t,e){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,i){var r=i(44),n=Object.keys(r);function s(t){var e=function(){for(var t={},e=n.length,i=0;i<e;i++)t[n[i]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var s=i.pop(),o=Object.keys(r[s]),a=o.length,l=0;l<a;l++){var h=o[l],c=e[h];-1===c.distance&&(c.distance=e[s].distance+1,c.parent=s,i.unshift(h))}return e}function o(t,e){return function(i){return e(t(i))}}function a(t,e){for(var i=[e[t].parent,t],n=r[e[t].parent][t],s=e[t].parent;e[s].parent;)i.unshift(e[s].parent),n=o(r[e[s].parent][s],n),s=e[s].parent;return n.conversion=i,n}t.exports=function(t){for(var e=s(t),i={},r=Object.keys(e),n=r.length,o=0;o<n;o++){var l=r[o];null!==e[l].parent&&(i[l]=a(l,e))}return i}},function(t,e,i){const r=i(10),n=i(46),s=i(5);class o extends s{constructor(t){super(t)}get type(){return n}[r.normalize](t){return t.map((t,e)=>null!==t?this[e][r.normalize](t):t)}[r.render](t){return this.each((e,i)=>e[r.render]([t[i]]))}}s.installMethodForwarding(o.prototype,n.prototype,{skip:[r.normalize,r.render]}),s.installCallbackReconciliation(o.prototype,["pulse","fade","fadeIn","fadeOut","blink"]),n.Collection=o,t.exports=o},function(t,e,i){const r=i(10),n=i(5),s=i(20);class o extends n{constructor(t){super(t)}get type(){return s}[r.normalize](t){return t.map((t,e)=>null!==t?this[e][r.normalize](t):t)}[r.render](t){return this.each((e,i)=>e[r.render]([t[i]]))}}n.installMethodForwarding(o.prototype,s.prototype,{skip:[r.normalize,r.render]}),n.installCallbackReconciliation(o.prototype,["blink"]),o.prototype[r.keys]=s.colors,t.exports=o},function(t,e,i){const r=i(21);t.exports=class extends r{constructor(t){t.isMatrix=!0,super(t)}static get CHARS(){return r.MATRIX_CHARS}}},function(t,e){t.exports={MATRIX_CHARS:{" ":[0,0,0,0,0,0,0,0],"!":[4,4,4,4,0,0,4,0],'"':[10,10,10,0,0,0,0,0],"#":[10,10,31,10,31,10,10,0],$:[4,15,20,14,5,30,4,0],"%":[24,25,2,4,8,19,3,0],"&":[12,18,20,8,21,18,13,0],"'":[12,4,8,0,0,0,0,0],"(":[2,4,8,8,8,4,2,0],")":[8,4,2,2,2,4,8,0],"*":[0,4,21,14,21,4,0,0],"+":[0,4,4,31,4,4,0,0],",":[0,0,0,0,12,4,8,0],"-":[0,0,0,31,0,0,0,0],".":[0,0,0,0,0,12,12,0],"/":[0,1,2,4,8,16,0,0],"[":[14,8,8,8,8,8,14,0],"\\":[0,16,8,4,2,1,0,0],"]":[14,2,2,2,2,2,14,0],"^":[4,10,17,0,0,0,0,0],_:[0,0,0,0,0,0,31,0],"`":[16,8,4,0,0,0,0,0],":":[0,12,12,0,12,12,0,0],";":[0,12,12,0,12,4,8,0],"<":[2,4,8,16,8,4,2,0],"=":[0,0,31,0,31,0,0,0],">":[8,4,2,1,2,4,8,0],"?":[14,17,1,2,4,0,4,0],"@":[14,17,1,13,21,21,14,0],"{":[2,4,4,8,4,4,2,0],"|":[4,4,4,0,4,4,4,0],"}":[8,4,4,2,4,4,8,0],"~":[8,21,2,0,0,0,0,0],0:[14,17,19,21,25,17,14,0],1:[4,12,4,4,4,4,14,0],2:[14,17,1,2,4,8,31,0],3:[31,2,4,2,1,17,14,0],4:[2,6,10,18,31,2,2,0],5:[31,16,30,1,1,17,14,0],6:[6,8,16,30,17,17,14,0],7:[31,1,2,4,4,4,4,0],8:[30,17,17,14,17,17,14,0],9:[14,17,17,15,1,2,12,0],A:[8,20,34,62,34,34,34,34],B:[60,34,34,62,34,34,60,0],C:[60,64,64,64,64,64,60,0],D:[124,66,66,66,66,66,124,0],E:[124,64,64,124,64,64,64,124],F:[124,64,64,124,64,64,64,64],G:[60,64,64,64,64,68,68,60],H:[68,68,68,124,68,68,68,68],I:[124,16,16,16,16,16,16,124],J:[60,8,8,8,8,8,72,48],K:[0,36,40,48,32,48,40,36],L:[64,64,64,64,64,64,64,124],M:[129,195,165,153,129,129,129,129],N:[0,66,98,82,74,70,66,0],O:[60,66,66,66,66,66,66,60],P:[60,34,34,34,60,32,32,32],Q:[28,34,34,34,34,38,34,29],R:[60,34,34,34,60,36,34,33],S:[0,30,32,32,62,2,2,60],T:[0,62,8,8,8,8,8,8],U:[66,66,66,66,66,66,34,28],V:[66,66,66,66,66,66,36,24],W:[0,73,73,73,73,42,28,0],X:[0,65,34,20,8,20,34,65],Y:[65,34,20,8,8,8,8,8],Z:[0,127,2,4,8,16,32,127],a:[0,0,14,1,15,17,15,0],b:[16,16,22,25,17,17,30,0],c:[0,0,14,17,16,17,14,0],d:[1,1,13,19,17,17,15,0],e:[0,0,14,17,31,16,14,0],f:[2,5,4,14,4,4,4,0],g:[0,13,19,19,13,1,14,0],h:[16,16,22,25,17,17,17,0],i:[4,0,12,4,4,4,14,0],j:[2,0,6,2,2,18,12,0],k:[8,8,9,10,12,10,9,0],l:[12,4,4,4,4,4,14,0],m:[0,0,26,21,21,21,21,0],n:[0,0,22,25,17,17,17,0],o:[0,0,14,17,17,17,14,0],p:[0,22,25,25,22,16,16,0],q:[0,13,19,19,13,1,1,0],r:[0,0,22,25,16,16,16,0],s:[0,0,15,16,30,1,31,0],t:[8,8,28,8,8,9,6,0],u:[0,0,18,18,18,18,13,0],v:[0,0,17,17,17,10,4,0],w:[0,0,17,17,21,21,10,0],x:[0,0,17,10,4,10,17,0],y:[0,0,17,17,19,13,1,14],z:[0,0,31,2,4,8,31,0],euro:[14,16,124,32,124,32,16,14],cent:[0,60,66,64,64,82,60,32],angryface:[0,102,102,0,24,36,66,129],circle:[60,66,129,129,129,129,66,60],cdot:[60,66,129,153,153,129,66,60],donut:[60,126,255,231,231,255,126,60],equality:[0,255,255,0,0,255,255,0],ball:[60,126,255,255,255,255,126,60],thinsquare:[255,129,129,129,129,129,129,255],thicksquare:[255,255,195,195,195,195,255,255],centeredsquare1:[0,0,60,60,60,60,0,0],centeredsquare2:[0,0,60,60,60,60,0,0],arrowright:[0,4,6,255,255,6,4,0],arrowleft:[0,32,96,255,255,96,32,0],note:[4,6,7,4,60,124,124,56],clock:[60,82,145,145,143,129,66,60],heartoutline:[102,153,129,129,66,36,24,0],heartfull:[102,255,255,255,126,60,24,0],thincheck:[0,0,1,2,4,136,80,32],thickcheck:[0,1,3,6,140,216,112,32],speaker:[3,7,63,63,63,63,7,3],sound:[0,64,128,0,192,0,128,64],xbig:[195,231,126,60,60,126,231,195],target:[60,126,195,219,219,195,126,60],bell:[24,60,60,60,60,126,0,24],smile:[0,102,102,0,0,129,66,60],frown:[0,102,102,0,0,60,66,129],winkright:[0,96,102,0,0,129,66,60],winkleft:[0,6,102,0,0,129,66,60],blink:[0,0,102,0,0,129,66,60],laughing:[0,102,102,0,255,129,66,60],tongueout:[0,102,102,0,0,126,10,4],expressionless:[0,102,102,0,0,255,0,0],ascprogress1:[128,128,128,128,128,128,128,128],ascprogress2:[192,192,192,192,192,192,192,192],ascprogress3:[224,224,224,224,224,224,224,224],ascprogress4:[240,240,240,240,240,240,240,240],ascprogress5:[248,248,248,248,248,248,248,248],ascprogress6:[252,252,252,252,252,252,252,252],ascprogress7:[254,254,254,254,254,254,254,254],fullprogress:[255,255,255,255,255,255,255,255],descprogress1:[127,127,127,127,127,127,127,127],descprogress2:[63,63,63,63,63,63,63,63],descprogress3:[31,31,31,31,31,31,31,31],descprogress4:[15,15,15,15,15,15,15,15],descprogress5:[7,7,7,7,7,7,7,7],descprogress6:[3,3,3,3,3,3,3,3],descprogress7:[1,1,1,1,1,1,1,1],ascchart1:[255,0,0,0,0,0,0,0],ascchart2:[255,255,0,0,0,0,0,0],ascchart3:[255,255,255,0,0,0,0,0],ascchart4:[255,255,255,255,0,0,0,0],ascchart5:[255,255,255,255,255,0,0,0],ascchart6:[255,255,255,255,255,255,0,0],ascchart7:[255,255,255,255,255,255,255,0],ascchart8:[255,255,255,255,255,255,255,255],descchart1:[0,255,255,255,255,255,255,255],descchart2:[0,0,255,255,255,255,255,255],descchart3:[0,0,0,255,255,255,255,255],descchart4:[0,0,0,0,255,255,255,255],descchart5:[0,0,0,0,0,255,255,255],descchart6:[0,0,0,0,0,0,255,255],descchart7:[0,0,0,0,0,0,0,255],descchart8:[0,0,0,0,0,0,0,0],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],borderleft6:[63,32,32,32,32,32,32,63],borderleft7:[127,64,64,64,64,64,64,127],borderleft8:[255,128,128,128,128,128,128,255],bordertopbottom5:[255,0,0,0,0,0,0,255],borderright1:[128,128,128,128,128,128,128,128],borderright2:[192,64,64,64,64,64,64,192],borderright3:[224,32,32,32,32,32,32,224],borderright4:[240,16,16,16,16,16,16,240],borderright5:[248,8,8,8,8,8,8,248],borderright6:[252,4,4,4,4,4,4,252],borderright7:[254,2,2,2,2,2,2,254],borderright8:[255,1,1,1,1,1,1,255],box1:[224,224,224,0,0,0,0,0],box2:[7,7,7,0,0,0,0,0],box3:[231,231,231,0,0,0,0,0],box4:[0,0,0,0,0,7,7,7],box5:[7,7,7,0,0,7,7,7],box6:[224,224,224,0,0,7,7,7],box7:[231,231,231,0,0,7,7,7],box8:[0,0,0,0,0,224,224,224],box9:[7,7,7,0,0,224,224,224],box10:[224,224,224,0,0,224,224,224],box11:[231,231,231,0,0,224,224,224],box12:[0,0,0,0,0,231,231,231],box13:[7,7,7,0,0,231,231,231],box14:[224,224,224,0,0,231,231,231],box15:[231,231,231,0,0,231,231,231],checkerboard1:[170,85,170,85,170,85,170,85],checkerboard2:[85,170,85,170,85,170,85,170],checkerboard3:[93,234,87,186,85,238,85,187],checkerboard4:[204,51,51,204,204,51,51,204],checkerboard5:[204,204,51,51,204,204,51,51],checkerboard6:[51,204,204,51,51,204,204,51],checkerboard7:[51,51,204,204,51,51,204,204],pointerright:[32,48,56,60,60,56,48,32],pointerup:[0,0,24,60,126,255,0,0],pointerleft:[4,12,28,60,60,28,12,4],pointerdown:[0,0,255,126,60,24,0,0],arrowne:[0,62,6,10,18,34,64,128],arrownw:[0,124,96,80,72,68,2,1],arrowsw:[1,2,68,72,80,96,124,0],arrowse:[128,64,34,18,10,6,62,0],dice1:[0,0,0,24,24,0,0,0],dice2:[192,192,0,0,0,0,3,3],dice3:[192,192,0,24,24,0,3,3],dice4:[195,195,0,0,0,0,195,195],dice5:[195,195,0,24,24,0,195,195],dice6:[195,195,0,195,195,0,195,195],outlinedplus1:[60,36,231,129,129,231,36,60],outlinedplus2:[255,231,231,129,129,231,231,255],twoboxes1:[240,144,144,240,15,9,9,15],twoboxes2:[240,144,144,254,18,18,30,0],twoboxes3:[240,144,188,244,36,60,0,0],twoboxes4:[240,248,216,248,120,0,0,0],twoboxes5:[15,9,9,15,240,144,144,240],fourboxes:[255,153,153,255,255,153,153,255],chain1:[240,248,216,248,120,0,0,0],chain2:[240,144,188,244,47,61,9,15]},SPECIAL_CHARS:{0:[60,102,102,102,102,102,102,60],1:[24,56,120,24,24,24,24,24],2:[60,102,6,12,24,48,96,126],3:[60,102,6,28,6,6,102,60],4:[14,30,54,102,102,126,6,6],5:[126,96,96,124,6,6,102,60],6:[60,102,96,124,102,102,102,60],7:[126,126,6,12,24,24,24,24],8:[60,102,102,60,102,102,102,60],9:[60,102,102,62,6,6,102,60],10:[94,82,82,82,82,94,0,255],11:[36,36,36,36,36,36,0,255],12:[94,66,68,72,80,94,0,255],13:[94,66,78,66,66,94,0,255],14:[82,82,94,66,66,66,0,255],15:[94,80,94,66,66,94,0,255],16:[94,80,94,82,82,94,0,255],17:[94,66,68,72,72,72,0,255],18:[94,82,94,82,82,94,0,255],19:[94,82,94,66,66,94,0,255]},DIGIT_CHARS:{0:126,1:48,2:109,3:121,4:51,5:91,6:95,7:112,8:127,9:123," ":0,".":128,":":255,"!":176,A:119,a:125,B:127,b:31,C:78,c:13,D:126,d:61,E:79,e:111,F:71,f:71,G:94,g:123,H:55,h:23,I:48,i:16,J:60,j:56,K:55,k:23,L:14,l:6,M:85,m:85,N:21,n:21,O:126,o:29,P:103,p:103,Q:115,q:115,R:119,r:5,S:91,s:91,T:70,t:15,U:62,u:28,V:39,v:35,W:63,w:43,X:37,x:37,Y:59,y:51,Z:109,z:109}}},function(t,e,i){const r=i(21);t.exports=class extends r{constructor(t){t.isMatrix=!1,super(t)}static get CHARS(){return r.DIGIT_CHARS}}},function(t,e,i){(function(e){const r=i(3),n=i(13),s=i(15),{uint16:o,toFixed:a,scale:l}=i(4),h=new Map,c={DEFAULT:{initialize:{value(t,e){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,e)}},toIntensityLevel:{value:t=>a(l(t,0,1023,0,100)/100,2)}},EVS_EV3:{initialize:{value(t,e){const i=h.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="REFLECTED"===t.mode?n.Type_EV3_LIGHT_REFLECTED:n.Type_EV3_LIGHT,i.shield=n.shieldPort(t.pin),i.ev3=new n(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,n.Type_EV3),i.ev3.write(i.shield,129+i.shield.offset,i.mode),i.ev3.read(i.shield,n.Light,n.Light_Bytes,t=>{const i=t[0]|t[1]<<8;e(i)})}},toIntensityLevel:{value:t=>a(t/100,2)}},EVS_NXT:{initialize:{value(t,e){const i=h.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="REFLECTED"===t.mode?n.Type_NXT_LIGHT_REFLECTED:n.Type_NXT_LIGHT,i.shield=n.shieldPort(t.pin),i.ev3=new n(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,i.mode),i.ev3.read(i.shield,i.shield.analog,n.Analog_Bytes,t=>{e(t[0]|t[1]<<8)})}},toIntensityLevel:{value:t=>a(l(t,0,1023,100,0)/100,2)}},TSL2561:{ADDRESSES:{value:[41,57,73]},REGISTER:{value:{CONTROL:0,TIMING:1,READ:44}},initialize:{value(t,e){const r=t=>128|t,{Drivers:n}=i(0),s=n.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cWriteReg(s,r(this.REGISTER.CONTROL),3);const a=[13,101,402],l=[15,120,450],h=[29975,4071,65536];let c=16,u=0,d=a[u],p=0;Object.defineProperties(this,{gain:{get:()=>c,set(t){if(0!==t&&16!==t)throw new RangeError("Invalid gain. Expected one of: 0, 16");c=t,this.io.i2cWriteReg(s,r(this.REGISTER.TIMING),u|c)}},integration:{get:()=>d,set(t){if(u=a.indexOf(t),-1===u)throw new RangeError("Invalid integration. Expected one of: 13, 101, 402");d=t,this.io.i2cWriteReg(s,r(this.REGISTER.TIMING),u|c)}},lux:{get:()=>p}}),this.gain=c,this.integration=d;const f=()=>{setTimeout(()=>{this.io.i2cReadOnce(s,r(this.REGISTER.READ),4,t=>{let i=o(t[1],t[0]),r=o(t[3],t[2]),n=0,s=0,a=h[u];c||(a<<=4),i=i*a>>10,r=r*a>>10;let l=0;i&&(l=(r<<10)/i),l=Math.round(l);const d=l+1>>1;d>=0&&d<=64?(n=498,s=446):d<=128?(n=532,s=721):d<=192?(n=575,s=891):d<=256?(n=624,s=1022):d<=312?(n=367,s=508):d<=410?(n=210,s=251):d<=666?(n=24,s=18):d>666&&(n=0,s=0);let g=i*n-r*s;g<0&&(g=0),g+=8192,p=g>>>14,e(p),f()})},l[u])};f()}},toLux:{value:t=>t},toIntensityLevel:{value:t=>a(l(t,0,17e3,0,100)/100,2)}},BH1750:{ADDRESSES:{value:[35,92]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=t.mode||16;this.io.i2cConfig(t),this.io.i2cWrite(n,s);const a=()=>{setTimeout(()=>{this.io.i2cReadOnce(n,2,t=>{e(o(t[0],t[1])),a()})},120)};a()}},toLux:{value:t=>Math.round(t/1.2)},toIntensityLevel:{value:t=>a(l(t/1.2,0,65535,0,100)/100,2)}}};c.ALSPT19=c["ALS-PT19"]=c.DEFAULT;class u extends s{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,c,t);let e=0,i=0,{freq:n=25}=t;h.set(this,{}),this.toIntensityLevel||(this.toIntensityLevel=t.toIntensityLevel||(t=>t)),this.toLux||(this.toLux=t.toLux||(t=>t)),Object.defineProperties(this,{value:{get:()=>e},level:{get(){return this.toIntensityLevel(e)}}}),"function"==typeof this.initialize&&this.initialize(t,t=>e=t),void 0===this.lux&&Object.defineProperty(this,"lux",{get(){return this.toLux(e)}});const s={level:0,lux:0};setInterval(()=>{s.level=this.level,s.lux=this.lux,this.emit("data",s),e!==i&&(i=e,this.emit("change",s))},n)}}e.env.IS_TEST_MODE&&(u.Controllers=c,u.purge=function(){h.clear()}),t.exports=u}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(2),{constrain:s,fscale:o}=i(4),a=new Map,l=["x","y"];class h{constructor({pins:t,io:e}){this.pins=t,this.io=e,this.io.pinMode(this.pins[0],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[1],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[2],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[3],this.io.MODES.OUTPUT)}select(t){this.io.digitalWrite(this.pins[0],1&t?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[1],2&t?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[2],4&t?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[3],8&t?this.io.HIGH:this.io.LOW)}}const c={ANALOG:{initialize:{value({pins:t},e){const i={x:null,y:null};t.forEach((t,r)=>{this.io.pinMode(t,this.io.MODES.ANALOG),this.io.analogRead(t,t=>{i[l[r]]=t,null!==i.x&&null!==i.y&&(e({x:i.x,y:i.y}),i.x=null,i.y=null)})})}},toAxis:{value(t,e){const i=a.get(this);return s(o(t-i[e].zeroV,-511,511,-1,1),-1,1)}}},ESPLORA:{initialize:{value(t,e){const i=new h({pins:[18,19,20,21],io:this.io}),r=[11,12];let n=1;const s={x:null,y:null};this.io.pinMode(4,this.io.MODES.ANALOG);const o=t=>{s[l[n]]=t,null!==s.x&&null!==s.y&&(e({x:s.x,y:s.y}),s.x=null,s.y=null),this.io.removeListener("analog-read-4",o),setTimeout(a,10)};var a=()=>{i.select(r[n^=1]),this.io.analogRead(4,o)};a()}},toAxis:{value(t,e){const i=a.get(this);return s(o(t-i[e].zeroV,-511,511,-1,1),-1,1)}}}};c.DEFAULT=c.ANALOG;class u extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,c,t),this.toAxis||(this.toAxis=t.toAxis||(t=>t));const e={x:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1},y:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1}};e.x.zeroV=void 0===t.zeroV?0:t.zeroV.x||0,e.y.zeroV=void 0===t.zeroV?0:t.zeroV.y||0,e.x.invert=t.invertX||t.invert||!1,e.y.invert=t.invertY||t.invert||!1,a.set(this,e),"function"==typeof this.initialize&&this.initialize(t,t=>{let i=!1;const r={x:null,y:null};Object.keys(t).forEach(n=>{const s=t[n],o=e[n];o.value=s,e[n].calibrated||(e[n].calibrated=!0,e[n].zeroV=s,i=!0),r[n]=this[n];const a=Math.abs(r[n]),l=Math.abs(o.previous);(a<l||a>l)&&(i=!0),o.previous=r[n]}),this.emit("data",{x:r.x,y:r.y}),i&&this.emit("change",{x:r.x,y:r.y})}),Object.defineProperties(this,{x:{get(){return this.toAxis(e.x.value,"x")*(e.x.invert?-1:1)}},y:{get(){return this.toAxis(e.y.value,"y")*(e.y.invert?-1:1)}}})}}e.env.IS_TEST_MODE&&(u.Controllers=c,u.purge=()=>{a.clear()}),t.exports=u}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(5),s=i(2),o=new Map;const a={value:function({pin:t},e){const i=o.get(this);this.io.pinMode(t,this.io.MODES.ANALOG),setTimeout(()=>{i.isCalibrated=!0,this.emit("calibrated")},10),this.io.analogRead(t,e)}},l={PIR:{initialize:{value(t,e){const i=o.get(this),r=void 0!==t.calibrationDelay?t.calibrationDelay:2e3;this.io.pinMode(t.pin,this.io.MODES.INPUT),setTimeout(()=>{i.isCalibrated=!0,this.emit("calibrated")},r),this.io.digitalRead(t.pin,e)}},toBoolean:{value:t=>!!t}},GP2Y0D805Z0F:{ADDRESSES:{value:[38]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t),s=o.get(this);setTimeout(()=>{s.isCalibrated=!0,this.emit("calibrated")},10),this.io.i2cConfig(t),this.io.i2cWriteReg(n,3,254),this.io.i2cWrite(n,[0]),this.io.i2cRead(n,1,t=>{e(2&t[0])})}},toBoolean:{value:t=>0===t}},GP2Y0D810Z0F:{initialize:a,toBoolean:{value:t=>t>>9==0}},GP2Y0A60SZLF:{initialize:a,toBoolean:{value:t=>t>>9==1}}};l.GP2Y0D815Z0F=l.GP2Y0D810Z0F,l["HC-SR501"]=l.PIR,l.HCSR501=l.PIR,l["0D805"]=l.GP2Y0D805Z0F,l[805]=l.GP2Y0D805Z0F,l["0D810"]=l.GP2Y0D810Z0F,l[810]=l.GP2Y0D810Z0F,l["0D815"]=l.GP2Y0D815Z0F,l[815]=l.GP2Y0D815Z0F,l["0A60SZLF"]=l.GP2Y0A60SZLF,l["60SZLF"]=l.GP2Y0A60SZLF,l.DEFAULT=l.PIR;class h extends s{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,l,t);let e=!1;const i=t.freq||25,n={value:!1,isCalibrated:!1};o.set(this,n),Object.defineProperties(this,{detectedMotion:{get(){return this.toBoolean(n.value)}},isCalibrated:{get:()=>n.isCalibrated}}),"function"==typeof this.initialize&&this.initialize(t,t=>n.value=t),setInterval(()=>{let t=!1;const i={timestamp:Date.now(),detectedMotion:this.detectedMotion,isCalibrated:n.isCalibrated};n.isCalibrated&&this.detectedMotion&&!e&&this.emit("motionstart",i),n.isCalibrated&&!this.detectedMotion&&e&&this.emit("motionend",i),e!==this.detectedMotion&&(t=!0),this.emit("data",i),t&&this.emit("change",i),e=this.detectedMotion},i)}}h.Collection=class extends n.Emitter{constructor(t){super(t)}get type(){return h}},n.installMethodForwarding(h.Collection.prototype,h.prototype),e.env.IS_TEST_MODE&&(h.Controllers=l,h.purge=()=>{o.clear()}),t.exports=h}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=i(5),s=i(2),o=i(13),a=i(8),l=i(4),h=i(22),c=i(47),u=new Map,d=new Map;function p(t){return["clock","data","latch"].reduce((e,i)=>`${e}.${t[i]}`,"")}function f(t,e,i){return i?t|=1<<e:t&=~(1<<e)}const g={DEFAULT:{},ShiftRegister:{initialize:{value({register:t,bits:e}){const i=p(t);if(!e||void 0===e.a||void 0===e.b)throw new Error("ShiftRegister Motors MUST contain HBRIDGE bits {a, b}");u.get(this).bits=e,d.has(this.board)||d.set(this.board,{}),d.get(this.board)[i]||(d.get(this.board)[i]=new c({board:this.board,pins:t})),this.io.pinMode(this.pins.pwm,this.io.MODES.PWM)}},dir:{value(t){return this.stop(),function(t,e){const i=p(t.settings.register),r=d.get(t.board)[i];let n=r.value;const s=u.get(t).bits,o="reverse"!==e;n=f(n,s.a,o),n=f(n,s.b,!o),r.value!==n&&r.send(n)}(this,t.name),this.direction=t,e.nextTick(()=>this.emit(t.name)),this}}},PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i}){const r=u.get(this);this.address=t||64,this.pwmRange=e||[0,4080],this.frequency=i||50,r.expander=a.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),Object.keys(this.pins).forEach(t=>{this.pins[t]=r.expander.normalize(this.pins[t])})}},setPWM:{writable:!0,value(t,e){u.get(this).expander.analogWrite(t,e)}},setPin:{writable:!0,value(t,e){u.get(this).expander.digitalWrite(t,e)}}},PCA9685_Hybrid:{initialize:{value({address:t,pwmRange:e,frequency:i}){const r=u.get(this);this.address=t||64,this.pwmRange=e||[0,4080],this.frequency=i||50,r.expander=a.get({address:this.address,controller:"PCA9685",bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pins.pwm=r.expander.normalize(this.pins.pwm)}},setPWM:{writable:!0,value(t,e){u.get(this).expander.analogWrite(t,e)}}},EVS_EV3:{initialize:{value(t){const e=u.get(this);e.shield=o.shieldPort(t.pin),e.ev3=new o(Object.assign(t,{io:this.io})),this.settings.pins={pwm:t.pin,dir:t.pin}}},setPWM:{value(t,e){const i=u.get(this),r=i.shield.motor===o.M1?o.SPEED_M1:o.SPEED_M2;let n=0|l.scale(e,0,255,0,100);if(0===e)i.ev3.write(i.shield,o.COMMAND,o.Motor_Reset);else{this.direction.value||(n=-n);const t=[n,0,0,o.CONTROL_SPEED|o.CONTROL_GO];i.ev3.write(i.shield,r,t)}}},setPin:{value(t,e){this.setPWM(this.pin,e)}},validatePins:{value(){if(void 0===this.settings.pin)throw new Error("Pin must be defined")}}},GROVE_I2C_MOTOR_DRIVER:{REGISTER:{value:{ADDRESS:15}},COMMANDS:{value:{SET_SPEED:130,SET_PWM_FREQUENCY:132,SET_DIRECTION:170,NOOP:1}},initialize:{value(t){const e=u.get(this);let i=u.get("GROVE_I2C_MOTOR_DRIVER");i||(i={direction:{A:1,B:1},speed:{A:0,B:0}},u.set("GROVE_I2C_MOTOR_DRIVER",i)),e.shared=i,e.pin=t.pin.toUpperCase(),this.settings.pins={pwm:t.pin,dir:t.pin},this.address=t.address||this.REGISTER.ADDRESS,t.address=this.address,this.io.i2cConfig(t)}},setPWM:{value(t,e){const i=u.get(this),n=0|r.constrain(e,0,255);i.shared.speed[i.pin]=n,this.io.i2cWrite(this.address,[this.COMMANDS.SET_SPEED,i.shared.speed.A,i.shared.speed.B])}},setPin:{value(t,e){const i=u.get(this);i.shared.direction[i.pin]=e?1:2;const r=3&i.shared.direction.A,n=(3&i.shared.direction.B)<<2|r;this.io.i2cWrite(this.address,[this.COMMANDS.SET_DIRECTION,n,this.COMMANDS.NOOP])}},validatePins:{value(){if(void 0===this.settings.pin)throw new Error("Pin must be defined")}}}};g.EVS_NXT=g.EVS_EV3;const E={NONDIRECTIONAL:{pins:{get(){return this.settings.pin?{pwm:this.settings.pin}:this.settings.pins||{}}},dir:{writable:!0,configurable:!0,value(t){return t=t||this.speed(),this}},resume:{value(){const t=this.speed();return this.speed({speed:t}),this}}},DIRECTIONAL:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1]}:this.settings.pins}},dir:{writable:!0,configurable:!0,value(t){return this.stop(),this.setPin(this.pins.dir,t.value),this.direction=t,e.nextTick(()=>this.emit(t.name)),this}}},CDIR:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1],cdir:this.settings.pins[2]}:this.settings.pins}},dir:{value(t){return this.stop(),this.direction=t,this.setPin(this.pins.cdir,1^t.value),this.setPin(this.pins.dir,t.value),e.nextTick(()=>this.emit(t.name)),this}},brake:{value(t){return this.speed({speed:0,saveSpeed:!1}),this.setPin(this.pins.dir,1,127),this.setPin(this.pins.cdir,1,128,127),this.speed({speed:255,saveSpeed:!1,braking:!0}),e.nextTick(()=>this.emit("brake")),t&&this.board.wait(t,()=>this.stop()),this}}}};class m extends s{constructor(t){var e,i;super(),r.Component.call(this,t=r.Options(t)),this.settings=t,void 0===this.settings.device&&(this.settings.device="DIRECTIONAL",void 0===this.settings.pins&&"object"!=typeof this.settings.register&&(this.settings.device="NONDIRECTIONAL"),this.settings.pins&&(Array.isArray(this.settings.pins)?this.settings.device=["NONDIRECTIONAL","DIRECTIONAL","CDIR"][this.settings.pins.length-1]:(void 0===this.settings.pins.dir?this.settings.device="NONDIRECTIONAL":this.settings.device="DIRECTIONAL",void 0!==this.settings.pins.cdir&&(this.settings.device="CDIR")))),"string"==typeof this.settings.controller&&(this.settings.controller.startsWith("EVS")||this.settings.controller.startsWith("GROVE_I2C"))&&(this.settings.device="DIRECTIONAL"),e="string"==typeof this.settings.device?E[this.settings.device]:this.settings.device,this.threshold=void 0!==this.settings.threshold?this.settings.threshold:30,this.invertPWM=void 0!==this.settings.invertPWM&&this.settings.invertPWM,Object.defineProperties(this,e),this.settings.register&&(this.settings.controller="ShiftRegister"),this.settings.controller&&("string"==typeof this.settings.controller?g[this.settings.controller]:this.settings.controller,r.Controller.call(this,g,t)),this.settings.current&&(this.settings.current.board=this.board,this.current=new h(this.settings.current)),i={isOn:!1,currentSpeed:void 0!==this.settings.speed?this.settings.speed:128,braking:!1,enabled:!1},u.set(this,i),Object.defineProperties(this,{isOn:{get:function(){return i.isOn}},currentSpeed:{get:function(){return i.currentSpeed}},braking:{get:function(){return i.braking}},enabled:{get:function(){return i.enabled}}}),this.direction={value:1},this.initialize&&this.initialize(t),this.validatePins(),this.enable(),this.dir(this.direction)}}m.prototype.initialize=function(){this.io.pinMode(this.pins.pwm,this.io.MODES.PWM),["dir","cdir","brake","enable"].forEach(t=>{void 0!==this.pins[t]&&this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)})},m.prototype.setPin=function(t,e){this.io.digitalWrite(t,e)},m.prototype.setPWM=function(t,e){this.io.analogWrite(t,l.map(e,0,255,0,this.board.RESOLUTION.PWM))},m.prototype.speed=function(t){var e=u.get(this);return void 0===t?e.currentSpeed:("number"==typeof t&&(t={speed:t}),t.speed=r.constrain(t.speed,0,255),t.saveSpeed=void 0===t.saveSpeed||t.saveSpeed,t.speed<this.threshold&&(t.speed=0),e.isOn=0!==t.speed,t.saveSpeed&&(e.currentSpeed=t.speed),t.braking&&(e.braking=!0),this.invertPWM&&1===this.direction.value&&(t.speed^=255),this.setPWM(this.pins.pwm,t.speed),this)},m.prototype.start=function(t){return this.pins.brake&&this.braking&&this.setPin(this.pins.brake,0),t=void 0!==t?t:this.speed(),this.speed({speed:t,braking:!1}),t>0&&e.nextTick(()=>this.emit("start")),this},m.prototype.stop=function(){return this.speed({speed:0,saveSpeed:!1}),e.nextTick(()=>this.emit("stop")),this},m.prototype.brake=function(t){if(void 0===this.pins.brake)"Mock"!==this.board.io.name&&console.log("Non-braking motor type"),this.stop();else if(this.setPin(this.pins.brake,1),this.setPin(this.pins.dir,1),this.speed({speed:255,saveSpeed:!1,braking:!0}),e.nextTick(()=>this.emit("brake")),t){var i=this;this.board.wait(t,(function(){i.resume()}))}return this},m.prototype.release=function(){return this.resume(),e.nextTick(()=>this.emit("release")),this},m.prototype.resume=function(){var t=this.speed();return this.dir(this.direction),this.start(t),this},m.prototype.enable=function(){var t=u.get(this);void 0===this.pins.enable||t.enabled||(this.setPin(this.pins.enable,1),t.enabled=!0)},m.prototype.disable=function(){var t=u.get(this);void 0!==this.pins.enable&&t.enabled&&(this.setPin(this.pins.enable,0),t.enabled=!1)},m.prototype.validatePins=function(){if(void 0===this.pins.pwm)throw new Error("PWM pin must be defined");if(void 0===this.pins.dir&&"NONDIRECTIONAL"!==this.settings.device)throw new Error("DIR pin must be defined");if("CDIR"===this.settings.device&&void 0===this.pins.cdir)throw new Error("CDIR pin must be defined for three wire motors")},[{name:"forward",abbr:"fwd",value:1},{name:"reverse",abbr:"rev",value:0}].forEach(t=>{m.prototype[t.name]=m.prototype[t.abbr]=function(e){return this.dir(t),this.start(e),this}}),m.SHIELD_CONFIGS={ADAFRUIT_V1:{M1:{pins:{pwm:11},register:{data:8,clock:4,latch:12},bits:{a:2,b:3}},M2:{pins:{pwm:3},register:{data:8,clock:4,latch:12},bits:{a:1,b:4}},M3:{pins:{pwm:6},register:{data:8,clock:4,latch:12},bits:{a:5,b:7}},M4:{pins:{pwm:5},register:{data:8,clock:4,latch:12},bits:{a:0,b:6}}},ADAFRUIT_V2:{M1:{pins:{pwm:8,dir:9,cdir:10},address:96,controller:"PCA9685"},M2:{pins:{pwm:13,dir:12,cdir:11},address:96,controller:"PCA9685"},M3:{pins:{pwm:2,dir:3,cdir:4},address:96,controller:"PCA9685"},M4:{pins:{pwm:7,dir:6,cdir:5},address:96,controller:"PCA9685"}},SEEED_STUDIO:{A:{pins:{pwm:9,dir:8,cdir:11}},B:{pins:{pwm:10,dir:12,cdir:13}}},FREETRONICS_HBRIDGE:{A:{pins:{pwm:6,dir:4,cdir:7}},B:{pins:{pwm:5,dir:3,cdir:2}}},ARDUINO_MOTOR_SHIELD_R3_1:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},ARDUINO_MOTOR_SHIELD_R3_2:{A:{pins:{pwm:3,dir:12,brake:9}},B:{pins:{pwm:11,dir:13,brake:8}}},ARDUINO_MOTOR_SHIELD_R3_3:{A:{pins:{pwm:3,dir:12,brake:9,current:"A0"}},B:{pins:{pwm:11,dir:13,brake:8,current:"A1"}}},DF_ROBOT:{A:{pins:{pwm:6,dir:7}},B:{pins:{pwm:5,dir:4}}},NKC_ELECTRONICS_KIT:{A:{pins:{pwm:9,dir:12}},B:{pins:{pwm:10,dir:13}}},RUGGED_CIRCUITS:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},SPARKFUN_ARDUMOTO:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},POLOLU_DRV8835_SHIELD:{M1:{pins:{pwm:9,dir:7}},M2:{pins:{pwm:10,dir:8}}},POLOLU_VNH5019_SHIELD:{M1:{pins:{pwm:9,dir:2,cdir:4,enable:6}},M2:{pins:{pwm:10,dir:7,cdir:8,enable:12}}},MICRO_MAGICIAN_V2:{A:{pins:{pwm:6,dir:8},invertPWM:!0},B:{pins:{pwm:5,dir:7},invertPWM:!0}},SPARKFUN_LUDUS:{A:{pins:{pwm:3,dir:4,cdir:5}},B:{pins:{pwm:6,dir:7,cdir:8}}},SPARKFUN_DUAL_HBRIDGE_EDISON_BLOCK:{A:{pins:{pwm:20,dir:33,cdir:46,enable:47}},B:{pins:{pwm:14,dir:48,cdir:36,enable:47}}},PICAR_V:{A:{controller:"PCA9685_Hybrid",pins:{pwm:4,dir:"GPIO17"}},B:{controller:"PCA9685_Hybrid",pins:{pwm:5,dir:"GPIO27"}}}};class v extends n{constructor(t){super(t)}get type(){return m}}n.installMethodForwarding(v.prototype,m.prototype),m.Collection=v,e.env.IS_TEST_MODE&&(m.Controllers=g,m.purge=function(){u.clear(),d.clear()}),t.exports=m}).call(this,i(1))},function(t,e,i){const r=i(3),n=i(100),s=new Map;let o=4;function a(t){return t.timer?(t.timer.clearInterval(),delete t.timer,t):t}const l={DEFAULT:{initialize:{writable:!0,value(){this.io.pinMode(this.pin,this.io.MODES.OUTPUT)}},tone:{writable:!0,value(t,e){if(isNaN(t)||isNaN(e))throw new Error("Piezo.tone: invalid tone or duration");a(this),this.timer=new n;let i=1;return this.timer.setInterval(()=>{i=1===i?0:1,this.io.digitalWrite(this.pin,i),this.timer.difTime/1e6>e&&a(this)},null,t+"u",()=>{}),this}},noTone:{writable:!0,value(){return this.io.digitalWrite(this.pin,0),a(this)}}},I2C_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{NO_TONE:0,TONE:1}},initialize:{writable:!0,value(t){const{Drivers:e}=i(0),r=e.addressResolver(this,t),n=s.get(this);this.io.i2cConfig(t),n.address=r}},tone:{writable:!0,value(t,e){const i=s.get(this);if(isNaN(t)||isNaN(e))throw new Error("Piezo.tone: invalid tone or duration");return this.io.i2cWrite(i.address,[this.REGISTER.TONE,this.pin,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e]),this}},noTone:{writable:!0,value(){const t=s.get(this);return this.io.i2cWrite(t.address,[this.REGISTER.NO_TONE,this.pin]),this}}}};class h{constructor(t){r.Component.call(this,t=r.Options(t)),r.Controller.call(this,l,t);const e={isPlaying:!1,timeout:null,address:null};s.set(this,e),Object.defineProperties(this,{isPlaying:{get:()=>e.isPlaying}}),"function"==typeof this.initialize&&this.initialize(t)}note(t,e){return this.frequency(h.Parsers.hzFromInput(t),e)}tone(t,e){return this.frequency(h.ToFrequency(t),e)}frequency(t,e){return this.tone(h.ToTone(t),e)}play(t,e){"object"!=typeof t&&(t={song:t}),"string"==typeof t.song&&(t.song=h.ToSong(t.song,t.beats)),t.song&&!Array.isArray(t.song)&&(t.song=[t.song]);const i=s.get(this),r=t.tempo||250,n=Math.round(6e4/r),o=t.song||[];let a,l=0;const c=()=>{if(l===o.length)return i.isPlaying=!1,void("function"==typeof e&&e(t));const r=o[l],s=h.Parsers.hzFromInput(r),u=h.Parsers.beatFromNote(r);a=u*n,l++,null===s?this.noTone():this.frequency(s,a),i.timeout=setTimeout(c,a)};return i.isPlaying=!0,c(),this}off(){return this.noTone()}stop(){const t=s.get(this);return t.timeout&&(clearTimeout(t.timeout),t.timeout=null),this}}h.Notes={c0:16,"c#0":17,d0:18,"d#0":19,e0:21,f0:22,"f#0":23,g0:25,"g#0":26,a0:28,"a#0":29,b0:31,c1:33,"c#1":35,d1:37,"d#1":39,e1:41,f1:44,"f#1":47,g1:49,"g#1":52,a1:55,"a#1":58,b1:62,c2:65,"c#2":69,d2:73,"d#2":78,e2:82,f2:87,"f#2":93,g2:98,"g#2":104,a2:110,"a#2":117,b2:124,c3:131,"c#3":139,d3:147,"d#3":156,e3:165,f3:175,"f#3":185,g3:196,"g#3":208,a3:220,"a#3":233,b3:247,c4:262,"c#4":277,d4:294,"d#4":311,e4:330,f4:349,"f#4":370,g4:392,"g#4":415,a4:440,"a#4":466,b4:494,c5:523,"c#5":554,d5:587,"d#5":622,e5:659,f5:698,"f#5":740,g5:784,"g#5":831,a5:880,"a#5":932,b5:988,c6:1047,"c#6":1109,d6:1175,"d#6":1245,e6:1319,f6:1397,"f#6":1480,g6:1568,"g#6":1661,a6:1760,"a#6":1865,b6:1976,c7:2093,"c#7":2217,d7:2349,"d#7":2489,e7:2637,f7:2794,"f#7":2960,g7:3136,"g#7":3322,a7:3520,"a#7":3729,b7:3951,c8:4186,"c#8":4435,d8:4699,"d#8":4978,e8:5274,f8:5588,"f#8":5920,g8:6272,"g#8":6645,a8:7040,"a#8":7459,b8:7902},h.Frequencies=Object.keys(h.Notes).reduce((t,e)=>(t[h.Notes[e]]=e,t),{}),h.Parsers={},h.Parsers.hzFromInput=t=>{let e=t;return Array.isArray(t)&&(e=t[0]),"number"==typeof e&&h.Frequencies[e]||("string"==typeof e&&(e=e.toLowerCase().trim(),(e.endsWith("#")||1===e.length)&&(e+=o),e=h.Notes[e]||null),isNaN(e)&&(e=null)),e},h.Parsers.beatFromNote=t=>{let e=1;return Array.isArray(t)&&void 0!==t[1]&&(e=t[1]),e},h.isValidOctave=t=>"number"==typeof t&&t>=0&&t<=8,h.defaultOctave=t=>(h.isValidOctave(t)&&(o=t),o),h.ToFrequency=t=>{const e=2*(t/1e6);return Math.round(1/e)},h.ToTone=t=>{const e=1/t/2;return Math.round(1e6*e)},h.ToSong=(t,e=1)=>{const i=t.split(" "),r=[];let n,s;for(;i.length;)n=i.shift(),/^[0-9]+$/.test(n)&&(n=parseInt(n,10)),s=r[r.length-1],s&&s[0]===n?s[1]+=e:r.push([n,e]);return r},t.exports=h},function(t,e,i){(function(e,i,r){function n(t){var i=e.version,r=i.split(".")[0];r=r.split("v")[1];var n=i.split(".")[1];0==r&&n<10&&(console.log("Error: Please update to the latest version of node! This library requires 0.10.x or later"),e.exit(0)),this.intervalT1=null,this.timeOutT1=null,this.intervalCount=1,this.deferredInterval=!1,this.deferredTimeout=!1,this.deferredTimeoutRef=null,this.deferredIntervalRef=null,this.timeoutCallbackRef=null,this.intervalCallbackRef=null,this.timeoutImmediateRef=null,this.intervalImmediateRef=null,this.intervalErrorChecked=!1,this.intervalType="",t&&(this.logging=!0)}n.prototype.time=function(t,i,r,n){if(!n){o=e.hrtime();i?t.apply(null,i):t();var s=e.hrtime(o);return"s"==r?s[0]+s[1]/1e9:"m"==r?s[0]/1e3+s[1]/1e6:"u"==r?s[0]/1e6+s[1]/1e3:"n"==r?s[0]/1e9+s[1]:e.hrtime(o)}var o=e.hrtime();i?(i.push((function(){var t=e.hrtime(o);n("s"==r?t[0]+t[1]/1e9:"m"==r?t[0]/1e3+t[1]/1e6:"u"==r?t[0]/1e6+t[1]/1e3:"n"==r?t[0]/1e9+t[1]:t)})),t.apply(null,i)):t((function(){var t=e.hrtime(o);n("s"==r?t[0]+t[1]/1e9:"m"==r?t[0]/1e3+t[1]/1e6:"u"==r?t[0]/1e6+t[1]/1e3:"n"==r?t[0]/1e9+t[1]:t)}))},n.prototype.setInterval=function(t,r,n,s){this.intervalErrorChecked||(t?"function"!=typeof t&&(console.log("Task argument to setInterval must be a function reference"),e.exit(1)):(console.log("A task function must be specified to setInterval"),e.exit(1)),n?"string"!=typeof n&&(console.log("Interval argument to setInterval must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),e.exit(1)):(console.log("An interval argument must be specified"),e.exit(1)),s&&("function"!=typeof s?(console.log("Callback argument to setInterval must be a function reference"),e.exit(1)):this.intervalCallbackRef=s),this.intervalType=n[n.length-1],"s"==this.intervalType?this.intervalTime=1e9*n.slice(0,n.length-1):"m"==this.intervalType?this.intervalTime=1e6*n.slice(0,n.length-1):"u"==this.intervalType?this.intervalTime=1e3*n.slice(0,n.length-1):"n"==this.intervalType?this.intervalTime=n.slice(0,n.length-1):(console.log("Error with argument: "+n+': Incorrect interval format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),e.exit(1)),this.intervalErrorChecked=!0);var o=this;this.intervalTime>0?(null==this.intervalT1&&(this.intervalT1=e.hrtime()),this.intervalTime*this.intervalCount>8e15&&(this.intervalT1=e.hrtime(),this.intervalCount=1),this.difArray=e.hrtime(this.intervalT1),this.difTime=1e9*this.difArray[0]+this.difArray[1],this.difTime<this.intervalTime*this.intervalCount?this.intervalTime>25e6?0==this.deferredInterval?(this.deferredInterval=!0,msDelay=(this.intervalTime-25e6)/1e6,this.deferredIntervalRef=setTimeout((function(){o.setInterval(t,r,n,s)}),msDelay)):(this.deferredIntervalRef=null,this.intervalImmediateRef=i((function(){o.setInterval(t,r,n,s)}))):this.intervalImmediateRef=i((function(){o.setInterval(t,r,n,s)})):(this.intervalImmediateRef=null,this.logging&&console.log("nanotimer log: cycle time at - "+this.difTime),r?t.apply(null,r):t(),this.intervalT1&&(this.intervalCount++,this.deferredInterval=!1,this.intervalImmediateRef=i((function(){o.setInterval(t,r,n,s)}))))):(null==this.intervalT1&&(this.intervalT1=e.hrtime(),this.intervalContinue=!0),1==this.intervalContinue?(r?t.apply(null,r):t(),i((function(){o.setInterval(t,r,n,s)}))):(this.intervalT1=null,this.intervalCount=1,s()))},n.prototype.setTimeout=function(t,r,n,s){t?"function"!=typeof t&&(console.log("Task argument to setTimeout must be a function reference"),e.exit(1)):(console.log("A task function must be specified to setTimeout"),e.exit(1)),n?"string"!=typeof n&&(console.log("Delay argument to setTimeout must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),e.exit(1)):(console.log("A delay argument must be specified"),e.exit(1)),s&&("function"!=typeof s?(console.log("Callback argument to setTimeout must be a function reference"),e.exit(1)):this.timeoutCallbackRef=s);var o=this,a=n[n.length-1];if("s"==a)var l=1e9*n.slice(0,n.length-1);else if("m"==a)l=1e6*n.slice(0,n.length-1);else if("u"==a)l=1e3*n.slice(0,n.length-1);else if("n"==a)l=n.slice(0,n.length-1);else console.log("Error with argument: "+n+': Incorrect delay format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),e.exit(1);null==this.timeOutT1&&(this.timeOutT1=e.hrtime());var h=e.hrtime(this.timeOutT1),c=1e9*h[0]+h[1];c<l?l>25e6?0==this.deferredTimeout?(this.deferredTimeout=!0,msDelay=(l-25e6)/1e6,this.deferredTimeoutRef=setTimeout((function(){o.setTimeout(t,r,n,s)}),msDelay)):(this.deferredTimeoutRef=null,this.timeoutImmediateRef=i((function(){o.setTimeout(t,r,n,s)}))):this.timeoutImmediateRef=i((function(){o.setTimeout(t,r,n,s)})):(this.timeoutImmediateRef=null,this.timeOutT1=null,this.deferredTimeout=!1,1==this.logging&&console.log("nanotimer log: actual wait - "+c),r?t.apply(null,r):t(),s&&s({waitTime:c}))},n.prototype.clearInterval=function(){this.deferredIntervalRef&&(clearTimeout(this.deferredIntervalRef),this.deferredInterval=!1),this.intervalImmediateRef&&r(this.intervalImmediateRef),this.intervalT1=null,this.intervalCount=1,this.intervalErrorChecked=!1,this.intervalCallbackRef&&this.intervalCallbackRef()},n.prototype.clearTimeout=function(){if(this.deferredTimeoutRef){clearTimeout(this.deferredTimeoutRef);var t=e.hrtime(this.timeOutT1),i=1e9*t[0]+t[1];this.deferredTimeout=!1}if(this.timeoutImmediateRef&&r(this.timeoutImmediateRef),this.timeOutT1=null,this.timeoutCallbackRef){var n={waitTime:i};this.timeoutCallbackRef(n)}},t.exports=n}).call(this,i(1),i(23).setImmediate,i(23).clearImmediate)},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var r,n,s,o,a,l=1,h={},c=!1,u=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(t){s.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,r=function(t){var e=u.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(f,0,t)}:(o="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(o+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return h[l]=n,r(l),l++},d.clearImmediate=p}function p(t){delete h[t]}function f(t){if(c)setTimeout(f,0,t);else{var e=h[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(6),i(1))},function(t,e,i){(function(e){const r=i(3),n=i(5),s=i(13),o=i(4),a=i(15),l=r.Pins,h=o.toFixed,c=new Map;function u(t,e){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,t=>{e.call(this,t)})}const d={GP2Y0A21YK:{initialize:{value:u},toCm:{value:t=>h(12343.85*t**-1.15,2)}},GP2D120XJ00F:{initialize:{value:u},toCm:{value:t=>h(2914/(t+5)-1,2)}},GP2Y0A02YK0F:{initialize:{value:u},toCm:{value:t=>h(10650.08*t**-.935-10,2)}},GP2Y0A41SK0F:{initialize:{value:u},toCm:{value:t=>h(2076/(t-11),2)}},GP2Y0A710K0F:{initialize:{value:u},toCm:{value:t=>h(38631e4*t**-2.463343,0)}},SRF10:{ADDRESSES:{value:[112]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cWrite(n,[1,16]),this.io.i2cWrite(n,[2,255]);const s=()=>{this.io.i2cWrite(n,[0,81]),setTimeout(()=>{this.io.i2cWrite(n,[2]),this.io.i2cReadOnce(n,2,t=>e(t[0]<<8|t[1])),s()},65)};s()}},toCm:{value:t=>t}},MB1000:{initialize:{value:u},toCm:{value:t=>h(t/2*2.54,2)}},MB1003:{initialize:{value:u},toCm:{value:t=>h(t/2,1)}},MB1230:{initialize:{value:u},toCm:{value:t=>t>>0}},HCSR04:{initialize:{value(t,e){let i=t.pinValue;l.isFirmata(this)&&("string"==typeof i&&i.length>1&&"A"===i[0]&&(i=this.io.analogPins[+i.slice(1)]),i=+i,this.io.analogPins.includes(i)&&(t.pin=i),this.pin=t.pin);const r={pin:t.pin,value:this.io.HIGH,pulseOut:5},n=()=>{this.io.pingRead(r,t=>{e(t),setTimeout(n,65)})};n()}},toCm:{value:t=>h(t/29.1/2,1)}},HCSR04I2CBACKPACK:{ADDRESSES:{value:[39]},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t),void 0===t.pin&&(this.pin=8);const s=()=>{this.io.i2cReadOnce(n,2,t=>{e((t[0]<<8)+t[1]),setTimeout(s,90)})};s()}},toCm:{value:t=>h(t/29.1/2,1)}},LIDARLITE:{ADDRESSES:{value:[98]},REGISTER:{value:{ENABLE:0,READ:143}},initialize:{value(t,e){const{Drivers:r}=i(0),n=r.addressResolver(this,t);this.io.i2cConfig(t);const s=()=>{this.io.i2cWrite(n,this.REGISTER.ENABLE,4),setTimeout(()=>{this.io.i2cReadOnce(n,this.REGISTER.READ,2,t=>{e((t[0]<<8)+t[1]),s()})},20)};s()}},toCm:{value:t=>t>>0}},EVS_EV3_IR:{initialize:{value(t,e){const i=c.get(this);i.shield=s.shieldPort(t.pin),i.ev3=new s(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,s.Type_EV3),i.ev3.read(i.shield,s.Proximity,s.Proximity_Bytes,t=>e(t[0]|t[1]<<8))}},toCm:{value:t=>t}},EVS_EV3_US:{initialize:{value(t,e){const i=c.get(this);i.shield=s.shieldPort(t.pin),i.ev3=new s(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,s.Type_EV3),i.ev3.read(i.shield,s.Proximity,s.Proximity_Bytes,t=>e(t[0]|t[1]<<8))}},toCm:{value:t=>t/10}}};d["2Y0A21"]=d.GP2Y0A21YK,d["2D120X"]=d.GP2D120XJ00F,d["2Y0A02"]=d.GP2Y0A02YK0F,d["0A41"]=d.GP2Y0A41SK0F,d["0A21"]=d.GP2Y0A21YK,d["0A02"]=d.GP2Y0A02YK0F,d["41SK0F"]=d.GP2Y0A41SK0F,d["21YK"]=d.GP2Y0A21YK,d["2YK0F"]=d.GP2Y0A02YK0F,d.MB1010=d.MB1000,d["LV-MaxSonar-EZ"]=d.MB1000,d["LV-MaxSonar-EZ0"]=d.MB1000,d["LV-MaxSonar-EZ1"]=d.MB1010,d["HRLV-MaxSonar-EZ0"]=d.MB1003,d["XL-MaxSonar-EZ3"]=d.MB1230,["HC-SR04","SR04","SRF05","SRF06","PARALLAXPING","SEEEDPING","GROVEPING","PING_PULSE_IN","ULTRASONIC_PING"].forEach(t=>{d[t]=d.HCSR04}),["HCSR04-I2C-BACKPACK","HC-SR04-I2C-BACKPACK","SR04-I2C-BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING-I2C-BACKPACK","HCSR04_I2C_BACKPACK","HC_SR04_I2C_BACKPACK","SR04_I2C_BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING_I2C_BACKPACK"].forEach(t=>{d[t]=d.HCSR04I2CBACKPACK}),d["LIDAR-Lite"]=d.LIDARLITE,d.DEFAULT=d.GP2Y0A21YK;class p extends a{constructor(t){super();const e="object"==typeof t?t.pin:t;r.Component.call(this,t=r.Options(t)),r.Controller.call(this,d,t);const i=t.freq||25;let n=0,s=0;this.toCm||(this.toCm=t.toCm||(t=>t)),c.set(this,{}),Object.defineProperties(this,{centimeters:{get(){return this.toCm(n)}},cm:{get(){return this.centimeters}},inches:{get(){return h(.39*this.centimeters,2)}},in:{get(){return this.inches}}}),"function"==typeof this.initialize&&(t.pinValue=e,this.initialize(t,t=>n=t)),setInterval(()=>{if(void 0===n)return;const t={cm:this.cm,centimeters:this.centimeters,in:this.in,inches:this.inches};this.emit("data",t),n!==s&&(s=n,this.emit("change",t))},i)}}p.Collection=class extends n.Emitter{constructor(t){super(t)}get type(){return p}},n.installMethodForwarding(p.Collection.prototype,p.prototype),p.Controllers=Object.keys(d),e.env.IS_TEST_MODE&&(p.Controllers=d,p.purge=()=>{c.clear()}),t.exports=p}).call(this,i(1))},function(t,e,i){const r=i(3),n=i(2),s=i(4),o=i(45),a=i(22),l=new Map,h={DEFAULT:{initialize:{value(t){if(void 0===t.emitter)throw new Error("Emitter pin is required");if(!t.pins||0===t.pins.length)throw new Error("Pins must be defined");const e=l.get(this);e.emitter=new o({board:this.board,pin:t.emitter}),e.sensorStates=t.pins.map(t=>{const i=new a({board:this.board,freq:e.freq,pin:t}),r={sensor:i,rawValue:0,dataReceived:!1};return i.on("data",t=>{!function(t,e,i){const r=l.get(t);e.dataReceived=!0,e.rawValue=i;r.sensorStates.every(({dataReceived:t})=>t)&&(t.emit("data",t.raw),r.autoCalibrate&&c(r.calibration,t.raw),t.isCalibrated&&(t.emit("calibratedData",t.values),t.emit("line",t.line)),r.sensorStates.forEach(t=>{t.dataReceived=!1}))}(this,r,t)}),r})}}}};function c(t,e){e.forEach((e,i)=>{(void 0===t.min[i]||e<t.min[i])&&(t.min[i]=e),(void 0===t.max[i]||e>t.max[i])&&(t.max[i]=e)})}function u(t,e){return t&&t.max&&t.max.length===e.length&&t.min&&t.min.length===e.length}function d(t){return 1e3*(t.sensors.length-1)}t.exports=class extends n{constructor(t){super(),r.Component.call(this,t=r.Options(t)),r.Controller.call(this,h,t);const{autoCalibrate:e=!1,freq:i=25}=t,n={autoCalibrate:e,freq:i,lastLine:0,isOn:!1,calibration:{min:[],max:[]}};l.set(this,n),"function"==typeof this.initialize&&this.initialize(t),Object.defineProperties(this,{isOn:{get:()=>n.emitter.isOn},isCalibrated:{get(){return u(this.calibration,this.sensors)}},isOnLine:{get(){const t=this.line;return t>0&&t<d(this)}},sensors:{get:()=>n.sensorStates.map(({sensor:t})=>t)},calibration:{get:()=>n.calibration},raw:{get:()=>n.sensorStates.map(({rawValue:t})=>t)},values:{get(){return this.isCalibrated?(t=this).raw.map((e,i)=>s.constrain(s.scale(e,t.calibration.min[i],t.calibration.max[i],0,1e3),0,1e3)):this.raw;var t}},line:{get(){return this.isCalibrated?function(t,e){const i=l.get(t);let r=!1,n=0,s=0;if(e=!!e,t.values.forEach((t,i)=>{(t=e?1e3-t:t)>200&&(r=!0),t>50&&(n+=t*i*1e3,s+=t)}),!r){const e=d(t)+1,r=e/2;return i.lastLine<r?0:e}return i.lastLine=Math.floor(n/s)}(this):0}}})}enable(){return l.get(this).emitter.on(),this}disable(){return l.get(this).emitter.off(),this}calibrate(){return this.once("data",t=>{c(l.get(this).calibration,t),this.emit("calibrated")}),this}calibrateUntil(t){const e=()=>{this.calibrate(),this.once("calibrated",()=>{t()||e()})};return e(),this}loadCalibration(t){if(!u(t,this.sensors))throw new Error("Calibration data not properly set: {min: [], max: []}");return l.get(this).calibration=t,this}}},function(t,e,i){(function(e){const r=i(3),n=i(5),s=r.Pins,o=new Map;class a{constructor(t){const e="object"==typeof t?t.pin:t;r.Component.call(this,t=r.Options(t)),t.type=t.type||"NO";const i={isInverted:"NC"===t.type,isClosed:!1,value:null};o.set(this,i),Object.defineProperties(this,{value:{get(){return Number(this.isClosed)}},type:{get:()=>i.isInverted?"NC":"NO"},isClosed:{get:()=>i.isClosed}}),s.isFirmata(this)&&"string"==typeof e&&"A"===e[0]&&(this.pin=this.io.analogPins[+e.slice(1)],this.io.pinMode(this.pin,this.io.MODES.OUTPUT))}close(){const t=o.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.LOW:this.io.HIGH),t.isClosed=!0,this}open(){const t=o.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.HIGH:this.io.LOW),t.isClosed=!1,this}toggle(){return o.get(this).isClosed?this.open():this.close(),this}}class l extends n{constructor(t){super(t)}get type(){return a}}n.installMethodForwarding(l.prototype,a.prototype),a.Collection=l,e.env.IS_TEST_MODE&&(a.purge=()=>{o.clear()}),t.exports=a}).call(this,i(1))},function(t,e,i){(function(e){const r=i(3),n=r.Pins,s=i(8),o=i(2),a=i(5),l=i(4),h=i(10),c=new Map,u={PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i,pin:r}){const n=c.get(this);this.address=t||64,this.pwmRange=e||[450,1850],this.frequency=i||50,n.expander=s.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=n.expander.normalize(r)}},update:{writable:!0,value(t){c.get(this).expander.servoWrite(this.pin,t)}}},Standard:{initialize:{value({debug:t,pwmRange:e}){t&&!this.board.pins.isServo(this.pin)&&r.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),Array.isArray(e)?this.io.servoConfig(this.pin,e[0],e[1]):this.io.pinMode(this.pin,this.mode)}},update:{writable:!0,value(t){if(this.last&&this.last.degrees===t)return this;let e=l.map(t,this.degreeRange[0],this.degreeRange[1],this.pwmRange[0],this.pwmRange[1]);e|=0,this.io.servoWrite(this.pin,e)}}}};u.DEFAULT=u.Standard;class d extends o{constructor(t){super();const e=[];let i="object"==typeof t?t.pin:t;r.Component.call(this,t=r.Options(t)),this.degreeRange=t.degreeRange||[0,180],this.pwmRange=t.pwmRange||[600,2400],this.range=t.range||this.degreeRange,this.deadband=t.deadband||[90,90],this.fps=t.fps||100,this.offset=t.offset||0,this.range=t.range||[0-this.offset,180-this.offset],this.mode=this.io.MODES.SERVO,this.interval=null,this.value=null,this.type=t.type||"standard",t.isInverted&&console.warn("The 'isInverted' property has been renamed 'invert'"),this.invert=t.isInverted||t.invert||!1,void 0===t.controller&&n.isFirmata(this)&&("string"==typeof i&&i.length>1&&"A"===i[0]&&(i=this.io.analogPins[+i.slice(1)]),i=+i,Number.isNaN(i)||this.pin===i||(this.pin=i)),r.Controller.call(this,u,t),c.set(this,{history:e}),Object.defineProperties(this,{history:{get:()=>e.slice(-5)},last:{get:()=>e[e.length-1]},position:{get:()=>e.length?e[e.length-1].degrees:-1}}),this.initialize(t),void 0!==t.startAt?(this.startAt=t.startAt,this.to(t.startAt)):this.startAt=(this.degreeRange[1]-this.degreeRange[0])/2+this.degreeRange[0],t.center&&this.center(),"continuous"===t.type&&this.stop()}to(t,i,r){const n=c.get(this),s={};if("object"==typeof t)Object.assign(s,t),s.duration=t.duration||t.interval||1e3,s.cuePoints=t.cuePoints||[0,1],s.keyFrames=t.keyFrames||[null,{value:"number"==typeof t.degrees?t.degrees:this.startAt}],s.oncomplete=()=>{e.nextTick(()=>{"function"==typeof t.oncomplete&&t.oncomplete(),this.emit("move:complete")})},n.isRunning=!0,n.animation=n.animation||new h(this),n.animation.enqueue(s);else{const e=t;t=l.constrain(t,this.range[0],this.range[1]),void 0!==i?(s.duration=i,s.keyFrames=[null,{degrees:t}],s.fps=r||this.fps,this.to(s)):(this.value=t,t+=this.offset,this.invert&&(t=l.map(t,this.degreeRange[0],this.degreeRange[1],this.degreeRange[1],this.degreeRange[0])),this.update(t),n.history.length>5&&n.history.shift(),n.history.push({timestamp:Date.now(),degrees:t,target:e}))}return this}step(t,e){return this.to(this.last.target+t,e)}move(t,e){return console.warn("Servo.prototype.move has been renamed to Servo.prototype.to"),this.to(t,e)}min(t,e){return this.to(this.range[0],t,e)}max(t,e){return this.to(this.range[1],t,e)}center(t,e){return this.to(Math.abs((this.range[0]+this.range[1])/2),t,e)}home(){return this.to(this.startAt)}sweep(t){const e={keyFrames:[{value:this.range[0]},{value:this.range[1]}],metronomic:!0,loop:!0,easing:"inOutSine"};return Array.isArray(t)?e.keyFrames=p(t):"object"==typeof t&&null!==t&&(Object.assign(e,t),Array.isArray(e.range)&&(e.keyFrames=p(e.range))),this.to(e)}stop(){const t=c.get(this);return t.animation&&t.animation.stop(),"continuous"===this.type?this.to(this.deadband.reduce((t,e)=>Math.round((t+e)/2))):clearInterval(this.interval),this}}function p(t){return t.map(t=>({value:t}))}d.prototype[h.normalize]=function(t){const e=this.last?this.last.target:this.startAt;return null===t[0]&&(t[0]={value:e}),"number"==typeof t[0]&&(t[0]={value:e+t[0]}),t.map(t=>(null!==t&&("number"==typeof t?t={step:t}:("number"==typeof t.degrees&&(t.value=t.degrees,delete t.degrees),"number"==typeof t.copyDegrees&&(t.copyValue=t.copyDegrees,delete t.copyDegrees)),t.easing||(t.easing="linear")),t))},d.prototype[h.render]=function(t){return this.to(t[0])},["clockWise","cw","counterClockwise","ccw"].forEach(t=>{d.prototype[t]=function(e){let i;return e=void 0===e?1:e,"continuous"!==this.type&&this.board.error("Servo",`Servo.prototype.${t} is only available for continuous servos`),i="cw"===t||"clockWise"===t?[e,0,1,this.deadband[1]+1,this.range[1]]:[e,0,1,this.deadband[0]-1,this.range[0]],this.to(0|l.scale.apply(null,i))}}),d.Continuous=class extends d{constructor(t){const e={};"object"==typeof t?Object.assign(e,t):e.pin=t,e.type="continuous",super(e)}};class f extends a{constructor(t){super(t)}get type(){return d}[h.normalize](t){return t.map((e,i)=>{if(null!==e&&Array.isArray(e)){let r=this[i];r instanceof f&&(r=r[0]);const n=r.last?r.last.target:r.startAt;return null===e[0]&&(e[0]={value:n}),Array.isArray(e)&&null===e[0]&&(t[i][0]={value:n}),this[i][h.normalize](e)}return e&&"number"==typeof e.degrees&&(e.value=e.degrees,delete e.degrees),e})}[h.render](t){return this.each((e,i)=>e.to(t[i]))}}a.installMethodForwarding(f.prototype,d.prototype,{skip:[h.normalize,h.render]}),d.Collection=f,e.env.IS_TEST_MODE&&(d.Controllers=u,d.purge=()=>{c.clear()}),t.exports=d}).call(this,i(1))},function(t,e,i){const r=i(3),n=i(4),s=new Map,o=new Map,a=n.TAU;class l{constructor(t){this.rpm=180,this.direction=-1,this.speed=0,this.accel=0,this.decel=0,this.stepper=t}move(t,e,i,r,n,s){this.stepper.io.stepperStep.apply(this.stepper.io,[this.stepper.id,e,t,i,r,n,s])}}function h(t){let e=0;for(t=t.slice();t.length;)this["motor"+ ++e]=t.shift()}l.PROPERTIES=["rpm","direction","speed","accel","decel"],l.DEFAULTS=[180,-1,0,0,0];class c{constructor(t){const e=[];let i;if(r.Component.call(this,t=r.Options(t)),!function({pins:t,MODES:e}){return t.some(({supportedModes:t})=>t.includes(e.STEPPER))}(this.io))throw new Error("Stepper is not supported");if(!t.pins)throw new Error("Stepper requires a `pins` object or array");if(!t.stepsPerRev)throw new Error("Stepper requires a `stepsPerRev` number value");if(o.set(this.board,o.get(this.board)||[]),this.id=o.get(this.board).length,this.id>=6)throw new Error("Stepper cannot exceed max steppers (6)");if(Array.isArray(this.pins)){if(2===this.pins.length&&!t.type)throw new Error("Stepper requires a `type` number value (DRIVER, TWO_WIRE)");t.type===c.TYPE.DRIVER?this.pins={step:this.pins[0],dir:this.pins[1]}:this.pins=new h(this.pins)}if(t.type||(this.pins.dir?t.type=c.TYPE.DRIVER:this.pins.motor3?t.type=c.TYPE.FOUR_WIRE:t.type=c.TYPE.TWO_WIRE),e.push(this.id,t.type,t.stepsPerRev),t.type===c.TYPE.DRIVER){if(void 0===this.pins.dir||void 0===this.pins.step)throw new Error("Stepper.TYPE.DRIVER expects: `pins.dir`, `pins.step`");e.push(this.pins.dir,this.pins.step)}if(t.type===c.TYPE.TWO_WIRE){if(void 0===this.pins.motor1||void 0===this.pins.motor2)throw new Error("Stepper.TYPE.TWO_WIRE expects: `pins.motor1`, `pins.motor2`");e.push(this.pins.motor1,this.pins.motor2)}if(t.type===c.TYPE.FOUR_WIRE){if(void 0===this.pins.motor1||void 0===this.pins.motor2||void 0===this.pins.motor3||void 0===this.pins.motor4)throw new Error("Stepper.TYPE.FOUR_WIRE expects: `pins.motor1`, `pins.motor2`, `pins.motor3`, `pins.motor4`");e.push(this.pins.motor1,this.pins.motor2,this.pins.motor3,this.pins.motor4)}e.slice(3).forEach(t=>{this.io.pinMode(t,this.io.MODES.STEPPER)}),this.io.stepperConfig.apply(this.io,e),o.get(this.board).push(this),i=l.PROPERTIES.reduce((e,i,r)=>(e[i]=void 0!==t[i]?t[i]:l.DEFAULTS[r],e),{isRunning:!1,type:t.type,pins:this.pins}),s.set(this,i),Object.defineProperties(this,{type:{get:()=>i.type},pins:{get:()=>i.pins}})}rpm(t){const e=s.get(this);return void 0===t?e.rpm:(e.rpm=t,e.speed=Math.round(t*a*100/60),this)}speed(t){const e=s.get(this);return void 0===t?e.speed:(e.speed=t,e.rpm=Math.round(t/a/100*60),this)}ccw(){return this.direction(0)}cw(){return this.direction(1)}step(t,e){let i,r,n,o,a;function h(t){a=!1,e&&e(t)}return i="object"==typeof t?t.steps||0:Math.floor(t),r=new l(this),n=s.get(this),o=[],a=!0,o.push(i),"object"==typeof t&&l.PROPERTIES.forEach(e=>{void 0!==t[e]&&this[e](t[e])}),n.speed||(this.rpm(n.rpm),r.speed=this.speed()),l.PROPERTIES.slice(1).forEach(t=>{o.push(r[t]=this[t]())}),0===i&&h(new Error("Must set a number of steps when calling `step()`")),r.direction<0&&h(new Error("Must set a direction before calling `step()`")),a&&(n.isRunning=!0,o.push(t=>{n.isRunning=!1,e(null,t)}),r.move.apply(r,o)),this}}Object.defineProperties(c,{TYPE:{value:Object.freeze({DRIVER:1,TWO_WIRE:2,FOUR_WIRE:4})},RUNSTATE:{value:Object.freeze({STOP:0,ACCEL:1,DECEL:2,RUN:3})},DIRECTION:{value:Object.freeze({CCW:0,CW:1})}}),["direction","accel","decel"].forEach(t=>{c.prototype[t]=function(e){const i=s.get(this);return void 0===e?i[t]:(i[t]=e,this)}}),t.exports=c},function(t,e,i){const r=i(3),n=i(5),s=i(2),o=i(4);class a extends s{constructor(t){super(),r.Component.call(this,t=r.Options(t));const e=o.debounce(t=>this.emit(t,this),5);t.type=t.type||"NO";const i="NO"===t.type;let n=null,s=void 0!==t.invert?t.invert:i||!1,a=1,l=0;s&&(a^=1,l^=1),this.io.pinMode(this.pin,this.io.MODES.INPUT),i&&this.io.digitalWrite(this.pin,this.io.HIGH),this.io.digitalRead(this.pin,t=>{n=t,e.call(this,this.isOpen?"open":"close")}),Object.defineProperties(this,{value:{get(){return Number(this.isOpen)}},invert:{get:()=>s,set(t){s=t,a=s?0:1,l=s?1:0}},closeValue:{get:()=>a,set(t){a=t,l=1^t}},openValue:{get:()=>l,set(t){l=t,a=1^t}},isOpen:{get:()=>n===l},isClosed:{get:()=>n===a}})}}class l extends n.Emitter{constructor(t){super(t)}get type(){return a}}n.installMethodForwarding(l.prototype,a.prototype),a.Collection=l,t.exports=a},function(t,e,i){"use strict";(function(e){var r=i(12),n=i(109),s=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9114,productId:32785}];function o(t){var i=this;function r(t){i.device=t;var r=function(){i.device.transferIn(5,64).then((function(t){i.emit("data",new e(t.data.buffer)),r()}),(function(t){i.emit("emit",t)}))};i.device.open().then((function(){return i.device.configuration})).then((function(t){if(1==t.configurationValue)return{};throw new Error("Need to setConfiguration(1).")})).catch((function(t){return i.device.setConfiguration(1)})).then((function(){return i.device.claimInterface(2)})).then((function(){return i.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:2})})).then((function(){i.emit("open"),r()}))}t=t||{},i.filters=t.filters||s,t.device?r(t.device):navigator.usb.requestDevice({filters:i.filters}).then(r).catch((function(t){i.emit("error",t)}))}r.inherits(o,n.Stream),o.prototype.open=function(t){this.emit("open"),t&&t()},o.prototype.write=function(t,e){this.device.transferOut(4,t).then((function(){e&&e(null)})).catch((function(t){e&&e(t)}))},o.prototype.close=function(t){var e=this;e.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:2}).then((function(){e.device.close(),t&&t()}))},o.prototype.flush=function(t){t&&t()},o.prototype.drain=function(t){t&&t()},o.DEFAULT_FILTERS=s,t.exports=o}).call(this,i(7).Buffer)},function(t,e,i){t.exports=n;var r=i(2).EventEmitter;function n(){r.call(this)}i(11)(n,r),n.Readable=i(24),n.Writable=i(115),n.Duplex=i(116),n.Transform=i(117),n.PassThrough=i(118),n.Stream=n,n.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",s),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",l));var o=!1;function a(){o||(o=!0,t.end())}function l(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){i.removeListener("data",n),t.removeListener("drain",s),i.removeListener("end",a),i.removeListener("close",l),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",c),i.removeListener("close",c),t.removeListener("close",c)}return i.on("error",h),t.on("error",h),i.on("end",c),i.on("close",c),t.on("close",c),t.emit("pipe",i),t}},function(t,e){},function(t,e,i){"use strict";var r=i(17).Buffer,n=i(112);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,i,n,s=r.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,i=s,n=a,e.copy(i,n),a+=o.data.length,o=o.next;return s},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,i(6))},function(t,e,i){"use strict";t.exports=s;var r=i(52),n=Object.create(i(14));function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}n.inherits=i(11),n.inherits(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){t.exports=i(25)},function(t,e,i){t.exports=i(9)},function(t,e,i){t.exports=i(24).Transform},function(t,e,i){t.exports=i(24).PassThrough},function(t,e,i){var r=i(12),n=i(120),s=i(121),o=i(122);function a(t,e){t.io?this.io=t.io:this.io=t,e=e||{},this.options=e,this.address=e.address||112,this.io.i2cConfig(0),this.io.i2cWrite(this.address,[33]),this.io.i2cWrite(this.address,[129]),this.setBrightness(e.brightness||15)}function l(t,e){a.apply(this,arguments)}function h(t,e){a.apply(this,arguments)}function c(t,e){a.apply(this,arguments)}function u(t,e){a.apply(this,arguments)}function d(t,e){a.apply(this,arguments)}function p(t,e){a.apply(this,arguments)}function f(t){for(var e=[],i=0,r=0;r<8;r++)e.unshift(t>>r&1);return e.forEach((function(t,e){i+=t<<e})),i}a.prototype.setBrightness=function(t){this.io.i2cWrite(this.address,[224|t])},a.prototype.clearDisplay=function(){this.io.i2cWrite(this.address,0,[0,0,0,0,0,0,0,0])},r.inherits(l,a),l.prototype.clearDisplay=function(){this.io.i2cWrite(this.address,0,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},l.prototype.drawBitmap=function(t){var e=[];t.forEach((function(t){e.push(255&t),e.push(t>>8)})),this.io.i2cWrite(this.address,0,this.rotateBuffer(e))},l.prototype.rotateBuffer=function(t){var e=[];return t.forEach((function(t){var i=new Uint8Array([t>>1|t<<7]);e.push(i[0])})),e},r.inherits(h,a),h.prototype.drawBitmap=function(t){},r.inherits(c,a),c.prototype.drawBitmap=function(t){},r.inherits(u,a),u.prototype.writeText=function(t){var e=o(t,4," ").substring(0,4).split("").map((function(t){return n[t.charCodeAt(0)]||0})),i=[];e.forEach((function(t){i.push(255&t),i.push(t>>8)})),this.io.i2cWrite(this.address,0,i)},r.inherits(d,a),d.prototype.clearDisplay=function(){this.io.i2cWrite(this.address,0,[0,0,0,0,0,0,0,0,0,0])},d.prototype.writeText=function(t){var e=[];t=(t=String(t)).toLowerCase();for(var i=o(t,4," ").split(""),r={},n=!1,a=0;a<i.length;a++)":"==i[a]?n=!0:"."==i[a]?e[e.length-1]&&(e[e.length-1].hasPeriod=!0):(r.character=i[a],e.push(r),r={});var l=[0,0,0,0,0,0,0,0,0,0];e[0]&&(l[0]=(s[e[0].character]||0)+(e[0].hasPeriod?128:0)),e[1]&&(l[2]=(s[e[1].character]||0)+(e[1].hasPeriod?128:0)),n&&(l[4]=255),e[2]&&(l[6]=(s[e[2].character]||0)+(e[2].hasPeriod?128:0)),e[3]&&(l[8]=(s[e[3].character]||0)+(e[3].hasPeriod?128:0)),this.io.i2cWrite(this.address,0,l)},r.inherits(p,a),p.prototype.drawBitmap=function(t,e){Array.isArray(t)&&(e=t[1],t=t[0]);var i=new Array(6);(i=i.map(f))[0]=(t>>20<<4)+(t>>8&15),i[1]=(e>>20<<4)+(e>>8&15),i[2]=((t>>12&15)<<4)+(t>>4&15),i[3]=((e>>12&15)<<4)+(e>>4&15),i[4]=((t>>4&15)<<4)+(15&t),i[5]=((e>>4&15)<<4)+(15&e),this.io.i2cWrite(this.address,0,i)},p.prototype.drawGraph=function(t){},t.exports={Backpack:a,Matrix8x8:l,Matrix8x16:h,AlphaNum4:u,SevenSegment:d,Bargraph24:p}},function(t,e){t.exports=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,0,0,0,0,0,0,0,0,4809,5568,4857,227,1328,4808,14848,5888,0,6,544,4814,4845,3108,9053,1024,9216,2304,16320,4800,2048,192,0,3072,3135,6,219,143,230,8297,253,7,255,239,4608,2560,9216,200,2304,4227,699,247,4751,57,4623,249,113,189,246,4608,30,9328,56,1334,8502,63,243,8255,8435,237,4609,62,3120,10294,11520,5376,3081,57,8448,15,3075,8,256,4184,8312,216,2190,2136,113,1166,4208,4096,14,13824,48,4308,4176,220,368,1158,80,8328,120,28,8196,10260,10432,8204,2120,2377,4608,9353,1312,16383]},function(t,e){t.exports={0:63,1:6,2:91,3:79,4:102,5:109,6:125,7:7,8:127,9:111,a:119,b:124,c:57,d:94,e:121,f:113}},function(t,e,i){(function(e){var i,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a="[\\ud800-\\udfff]",l="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",h="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="(?:"+l+"|"+h+")"+"?",f="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+[c,u,d].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),g="(?:"+[c+l+"?",l,u,d,a].join("|")+")",E=RegExp(h+"(?="+h+")|"+g+f,"g"),m=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),v=parseInt,y="object"==typeof e&&e&&e.Object===Object&&e,R="object"==typeof self&&self&&self.Object===Object&&self,b=y||R||Function("return this")(),S=(i="length",function(t){return null==t?void 0:t[i]});function T(t){return m.test(t)}function O(t){return T(t)?function(t){var e=E.lastIndex=0;for(;E.test(t);)e++;return e}(t):S(t)}function _(t){return T(t)?function(t){return t.match(E)||[]}(t):function(t){return t.split("")}(t)}var A=Object.prototype.toString,w=b.Symbol,I=Math.ceil,M=Math.floor,C=w?w.prototype:void 0,P=C?C.toString:void 0;function D(t,e){var i="";if(!t||e<1||e>9007199254740991)return i;do{e%2&&(i+=t),(e=M(e/2))&&(t+=t)}while(e);return i}function L(t){if("string"==typeof t)return t;if(G(t))return P?P.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function x(t,e,i){var r=t.length;return i=void 0===i?r:i,!e&&i>=r?t:function(t,e,i){var r=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(i=i>n?n:i)<0&&(i+=n),n=e>i?0:i-e>>>0,e>>>=0;for(var s=Array(n);++r<n;)s[r]=t[r+e];return s}(t,e,i)}function N(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function G(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==A.call(t)}function W(t){return t?(t=function(t){if("number"==typeof t)return t;if(G(t))return NaN;if(N(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=N(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=s.test(t);return i||o.test(t)?v(t.slice(2),i?2:8):n.test(t)?NaN:+t}(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}t.exports=function(t,e,i){var r;t=null==(r=t)?"":L(r);var n=(e=function(t){var e=W(t),i=e%1;return e==e?i?e-i:e:0}(e))?O(t):0;return e&&n<e?t+function(t,e){var i=(e=void 0===e?" ":L(e)).length;if(i<2)return i?D(e,t):e;var r=D(e,I(t/O(e)));return T(e)?x(_(r),0,t).join(""):r.slice(0,t)}(e-n,i):t}}).call(this,i(6))},function(t,e,i){"use strict";(function(e,r,n){var s=i(124),o=i(2),a=i(12);s.colorValue=function(t,e){return t[0]=e[t[0]],t[1]=e[t[1]],t[2]=e[t[2]],(t[0]<<16)+(t[1]<<8)+t[2]};var l={FIRMATA:{initialize:{value:function(t){var i=t.length||6,r=t.data||6,n=t.color_order||g.GRB,s=t.strips||new Array,o=!!t.skip_firmware_check,a=t.firmata||void 0;if(null==a)try{a=t.board.io}catch(t){t instanceof TypeError&&(a=void 0)}if(console.log("node-pixel opts",t,a),null==a){let t=new Error("A firmata or board object is required");throw t.name="NoFirmataError",t}if("node_pixel_firmata.ino"!==a.firmware.name&&!o){let t=new Error("Please upload NodePixel Firmata to the board");throw t.name="IncorrectFirmataVersionError",t}console.log("firmata loading in node-pixel",a);var l=a.transport||a.sp||a;if(void 0===l.write){let t=new Error("Node Pixel FIRMATA controller requires IO that can write out");throw t.name="NoWritablePortError",t}var u=t.gamma||1,d=h(256,u,this.dep_warning.gamma);if(void 0===s[0]&&s.push({pin:r,color_order:n,length:i}),s.length>8){var p=new RangeError("Maximum number of strips 8 exceeded");this.emit("error",p)}var E=0;if(s.forEach((function(t){E+=t.length})),E>216){p=new RangeError("Maximum number of pixels 216 exceeded");this.emit("error",p)}for(var m=[],v=0;v<E;v++)m.push(new f({addr:v,firmata:a,port:l,controller:"FIRMATA",strip:this}));c.set(this,{pixels:m,data:r,firmata:a,port:l,gtable:d,gamma:u});var y=[];y[0]=240,y[1]=81,y[2]=1,s.forEach((function(t){y.push(t.color_order<<5|t.pin),y.push(127&t.length),y.push(t.length>>7&127)})),y.push(247),l.write(new e(y),function(t,e){var i=null;t&&(i=t,this.emit("error",i)),setTimeout(()=>{this.emit("ready",i)},1)}.bind(this))}},show:{value:function(){var t=c.get(this),i=[];i[0]=240,i[1]=81,i[2]=2,i[3]=247,t.port.write(new e(i))}},strip_color:{value:function(t){var i=c.get(this),r=[];r[0]=240,r[1]=81,r[2]=4,r[3]=127&t,r[4]=t>>7&127,r[5]=t>>14&127,r[6]=t>>21&127,r[7]=247,i.port.write(new e(r))}},_shift:{value:function(t,i,r){let n=r?64:0,s=c.get(this),o=[];o[0]=240,o[1]=81,o[2]=5,o[3]=127&(t|i|n),o[4]=247,s.port.write(new e(o))}}},I2CBACKPACK:{initialize:{value:function(t){var e=t.length||6,i=t.strips||new Array,n=t.color_order||g.GRB,s=t.gamma||1,o=h(256,s,this.dep_warning.gamma),a=t.firmata||t.board.io;if(t.address||(t.address=66),null==a){let t=new Error("An IO object is required to I2C controller");throw t.name="NoIOError",t}if(void 0===i[0])i.push({color_order:n,length:e});else if(NaN!=parseInt(i[0]))for(var l=0;l<i.length;l++){var u=i[l];i[l]={color_order:n,length:u}}if(i.length>8){var d=new RangeError("Maximum number of strips 8 exceeded");this.emit("error",d)}var p=0;if(i.forEach((function(t){p+=t.length})),p>500){d=new RangeError("Maximum number of pixels 500 exceeded");this.emit("error",d)}var E=[];for(l=0;l<p;l++)E.push(new f({addr:l,io:a,controller:"I2CBACKPACK",i2c_address:t.address,strip:this}));c.set(this,{pixels:E,io:a,i2c_address:t.address,gtable:o,gamma:s});var m=[];m.push(1),i.forEach((function(t){m.push(t.color_order<<5|t.pin),m.push(127&t.length),m.push(t.length>>7&127)})),a.i2cConfig(t),r.nextTick(function(){try{a.i2cWrite(t.address,m)}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error",m)}r.nextTick(function(){this.emit("ready",null)}.bind(this))}.bind(this))}},show:{value:function(){var t=c.get(this);try{t.io.i2cWrite(t.i2c_address,[2])}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error","PIXEL_SHOW")}}},strip_color:{value:function(t){var e=c.get(this),i=[];i[0]=4,i[1]=127&t,i[2]=t>>7&127,i[3]=t>>14&127,i[4]=t>>21&127;try{e.io.i2cWrite(e.i2c_address,i)}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error",i)}}},_shift:{value:function(t,e,i){let r=i?64:0,n=c.get(this),s=[];s[0]=5,s[1]=127&(t|e|r);try{n.io.i2cWrite(n.i2c_address,s)}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error",s)}}}}};function h(t,e,i){i||1!=e||n.IS_TEST_MODE||(console.info("INFO: Default gamma behaviour is changing"),console.info("0.9 - gamma=1.0 - consistent with pre-gamma values"),console.info("0.10 - gamma=2.8 - default fix for WS2812 LEDs"),i=!0);var r=new Array(t);for(let i=0;i<t;i++)r[i]=Math.floor(255*Math.pow(i/255,e)+.5);return r}var c=new WeakMap;function u(t){if(!(this instanceof u))return new u(t);var e;e="string"==typeof t.controller?l[t.controller]:t.controller||l.FIRMATA,this.dep_warning={stripLength:!1,gammaValue:"undefined"===(t.gamma,!1)},Object.defineProperties(this,e),Object.defineProperty(this,"length",{get:function(){return c.get(this).pixels.length}}),Object.defineProperty(this,"gamma",{get:function(){return c.get(this).gamma}}),Object.defineProperty(this,"gtable",{get:function(){return c.get(this).gtable}}),"function"==typeof this.initialize&&this.initialize(t)}a.inherits(u,o.EventEmitter),u.prototype.pixel=function(t){return c.get(this).pixels[t]},u.prototype.colour=u.prototype.color=function(t,e){var i=c.get(this),r=null;if(t)if("object"==typeof t)r=t;else try{r=s.get(t).value}catch(e){e instanceof TypeError&&null===s.get(t)&&(r=null)}if(null!=r){for(var n=0;n<i.pixels.length;n++)i.pixels[n].color(t,{sendmsg:!1});this.strip_color(s.colorValue(r,i.gtable))}else console.log("Supplied colour couldn't be parsed: "+t)},u.prototype.off=u.prototype.clear=function(){this.color([0,0,0]),this.show()},u.prototype.shift=function(t,e,i){if(t>0){let r=c.get(this),n=0;32==e&&(n=this.length-t);let s=r.pixels.splice(n,t);for(;s.length>0;){let t=s.pop();i||t.color("#000"),32==e?r.pixels.unshift(t):r.pixels.push(t)}r.pixels.forEach((t,e)=>{t.address=e}),this._shift(t,e,i)}},u.prototype.stripLength=function(){c.get(this);throw this.dep_warning.stripLength||(console.info("ERROR: strip.stripLength() is deprecated in favour of strip.length"),console.info("0.8 - notice"),console.info("0.9 - error"),console.info("0.10 - removal"),this.dep_warning.stripLength=!0),new Error({name:"NotImplemented",message:"stripLength is no longer supported, use strip.length",toString:function(){return"NotImplemented: stripLength is no longer supported"}})};var d=new WeakMap,p={FIRMATA:{initialize:{value:function(t){return{address:t.addr,id:t.addr,color:{r:0,g:0,b:0,hexcode:"#000000",color:"black",rgb:[0,0,0]},firmata:t.firmata,port:t.port,parent:t.strip}}},pixel_color:{value:function(t){var i=d.get(this),r=[];r.push(240),r.push(81),r.push(3),r.push(127&i.address),r.push(i.address>>7&127),r.push(127&t),r.push(t>>7&127),r.push(t>>14&127),r.push(t>>21&127),r.push(247),i.port.write(new e(r))}}},I2CBACKPACK:{initialize:{value:function(t){return{address:t.addr,id:t.addr,color:{r:0,g:0,b:0,hexcode:"#000000",color:"black",rgb:[0,0,0]},io:t.io,i2c_address:t.i2c_address,parent:t.strip}}},pixel_color:{value:function(t){var e=d.get(this),i=[];i.push(3),i.push(127&e.address),i.push(e.address>>7&127),i.push(127&t),i.push(t>>7&127),i.push(t>>14&127),i.push(t>>21&127),e.io.i2cWrite(e.i2c_address,i)}}}};function f(t){if(!(this instanceof f))return new f(t);var e=p[t.controller];Object.defineProperties(this,e),Object.defineProperty(this,"address",{get:function(){return d.get(this).address},set:function(t){d.get(this).address=t}}),d.set(this,this.initialize(t))}f.prototype.off=f.prototype.clear=function(){this.color([0,0,0])},f.prototype.colour=f.prototype.color=function(t,e){var i=d.get(this),r=e||{},n=!0;null!=r.sendmsg&&(n=r.sendmsg);var o=null;if(!t)return i.color;null!=(o="object"==typeof t?{model:"rgb",value:t}:s.get(t))?(i.color.r=o.value[0],i.color.g=o.value[1],i.color.b=o.value[2],i.color.hexcode=s.to.hex(o.value),i.color.color=s.to.keyword(o.value),4==o.value.length&&o.value.pop(),i.color.rgb=o.value,t=s.colorValue(o.value,i.parent.gtable),n&&this.pixel_color(t)):console.log("Color supplied couldn't be parsed: "+t)};var g={GRB:0,RGB:1,BRG:2};t.exports={Strip:u,COLOR_ORDER:g,FORWARD:32,BACKWARD:0}}).call(this,i(7).Buffer,i(1),i(6))},function(t,e,i){var r=i(31),n=i(125),s={};for(var o in r)r.hasOwnProperty(o)&&(s[r[o]]=o);var a=t.exports={to:{},get:{}};function l(t,e,i){return Math.min(Math.max(e,t),i)}function h(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}a.get=function(t){var e,i;switch(t.substring(0,3).toLowerCase()){case"hsl":e=a.get.hsl(t),i="hsl";break;case"hwb":e=a.get.hwb(t),i="hwb";break;default:e=a.get.rgb(t),i="rgb"}return e?{model:i,value:e}:null},a.get.rgb=function(t){if(!t)return null;var e,i,n,s=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=e[2],e=e[1],i=0;i<3;i++){var o=2*i;s[i]=parseInt(e.slice(o,o+2),16)}n&&(s[3]=Math.round(parseInt(n,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(n=(e=e[1])[3],i=0;i<3;i++)s[i]=parseInt(e[i]+e[i],16);n&&(s[3]=Math.round(parseInt(n+n,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<3;i++)s[i]=parseInt(e[i+1],0);e[4]&&(s[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(s=r[e[1]])?(s[3]=1,s):null:null;for(i=0;i<3;i++)s[i]=Math.round(2.55*parseFloat(e[i+1]));e[4]&&(s[3]=parseFloat(e[4]))}for(i=0;i<3;i++)s[i]=l(s[i],0,255);return s[3]=l(s[3],0,1),s},a.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var i=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(i)?1:i,0,1)]}return null},a.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var i=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(i)?1:i,0,1)]}return null},a.to.hex=function(){var t=n(arguments);return"#"+h(t[0])+h(t[1])+h(t[2])+(t[3]<1?h(Math.round(255*t[3])):"")},a.to.rgb=function(){var t=n(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},a.to.rgb.percent=function(){var t=n(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+i+"%, "+r+"%)":"rgba("+e+"%, "+i+"%, "+r+"%, "+t[3]+")"},a.to.hsl=function(){var t=n(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},a.to.hwb=function(){var t=n(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},a.to.keyword=function(t){return s[t.slice(0,3)]}},function(t,e,i){"use strict";var r=i(126),n=Array.prototype.concat,s=Array.prototype.slice,o=t.exports=function(t){for(var e=[],i=0,o=t.length;i<o;i++){var a=t[i];r(a)?e=n.call(e,s.call(a)):e.push(a)}return e};o.wrap=function(t){return function(){return t(o(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,i){"use strict";(function(e){var i,r,n;!function(t){t[t.I2C=0]="I2C",t[t.SPI=1]="SPI"}(r||(r={})),function(t){t[t.Command=0]="Command",t[t.Data=1]="Data"}(n||(n={})),t.exports=((i=function(){function t(t,i,n){this.HEIGHT=n.height||32,this.WIDTH=n.width||128,this.ADDRESS=n.address||60,this.PROTOCOL=n.address?r.I2C:r.SPI,this.MICROVIEW=n.microview||!1,this.SECONDARYPIN=n.secondaryPin||12,this.RESETPIN=n.resetPin||4,this.DATA=n.data||64,this.COMMAND=n.command||0,this.cursor_x=0,this.cursor_y=0,this.buffer=e.alloc(this.WIDTH*this.HEIGHT/8),this.buffer.fill(0),this.dirtyBytes=[],this.board=t,this.five=i;var s={"128x32":{multiplex:31,compins:2,coloffset:0},"128x64":{multiplex:63,compins:18,coloffset:0},"96x16":{multiplex:15,compins:2,coloffset:0},"64x48":{multiplex:47,compins:18,coloffset:this.MICROVIEW?32:0}};this.MICROVIEW?this.SPIconfig={dcPin:8,ssPin:10,rstPin:7,clkPin:13,mosiPin:11}:this.PROTOCOL===r.SPI&&(this.SPIconfig={dcPin:11,ssPin:this.SECONDARYPIN,rstPin:13,clkPin:10,mosiPin:9});var o=this.WIDTH+"x"+this.HEIGHT;this.screenConfig=s[o],this.PROTOCOL===r.I2C?this._setUpI2C(n):this._setUpSPI(),this._initialise()}return t.prototype._initialise=function(){for(var e=[t.DISPLAY_OFF,t.SET_DISPLAY_CLOCK_DIV,128,t.SET_MULTIPLEX,this.screenConfig.multiplex,t.SET_DISPLAY_OFFSET,0,t.SET_START_LINE,t.CHARGE_PUMP,20,t.MEMORY_MODE,0,t.SEG_REMAP,t.COM_SCAN_DEC,t.SET_COM_PINS,this.screenConfig.compins,t.SET_CONTRAST,143,t.SET_PRECHARGE,241,t.SET_VCOM_DETECT,64,t.DISPLAY_ALL_ON_RESUME,t.NORMAL_DISPLAY,t.DISPLAY_ON],i=0;i<e.length;i++)this._transfer(n.Command,e[i])},t.prototype._setUpSPI=function(){this.dcPin=new this.five.Pin(this.SPIconfig.dcPin),this.ssPin=new this.five.Pin(this.SPIconfig.ssPin),this.clkPin=new this.five.Pin(this.SPIconfig.clkPin),this.mosiPin=new this.five.Pin(this.SPIconfig.mosiPin),this.rstPin=new this.five.Pin(this.SPIconfig.rstPin),this.rstPin.low(),this.rstPin.high(),this.ssPin.high()},t.prototype._setUpI2C=function(t){this.board.io.i2cConfig(t),this.rstPin=new this.five.Pin(this.RESETPIN),this.rstPin.low(),this.rstPin.high()},t.prototype._transfer=function(t,e){var i;if(t===n.Data)i=this.DATA;else{if(t!==n.Command)return;i=this.COMMAND}this.PROTOCOL===r.I2C?this.board.io.i2cWrite(this.ADDRESS,[i,e]):this._writeSPI(e,t)},t.prototype._writeSPI=function(t,e){e===n.Command?this.dcPin.low():this.dcPin.high(),this.ssPin.low();for(var i=7;i>=0;i--)this.clkPin.low(),t&1<<i?this.mosiPin.high():this.mosiPin.low(),this.clkPin.high();this.ssPin.high()},t.prototype._readI2C=function(t){this.board.io.i2cReadOnce(this.ADDRESS,1,(function(e){t(e)}))},t.prototype._waitUntilReady=function(t){var e=this,i=function(t){e._readI2C((function(e){e>>7&1?(console.log("I'm busy!"),setTimeout(i,0)):t()}))};this.PROTOCOL===r.I2C?setTimeout((function(){i(t)}),0):t()},t.prototype.setCursor=function(t,e){this.cursor_x=t,this.cursor_y=e},t.prototype._invertColor=function(t){return 0===t?1:0},t.prototype.writeString=function(t,e,i,r,n,s,o){for(var a=void 0===o||o,l=i.split(" "),h=l.length,c=this.cursor_x,u=0,d=s||2,p=0;p<h;p+=1){p<h-1&&(l[p]+=" ");var f=l[p].split(""),g=f.length,E=t.width*e*g+e*(h-1);n&&h>1&&c>=this.WIDTH-E&&(c=1,this.cursor_y+=t.height*e+e+d,this.setCursor(c,this.cursor_y));for(var m=0;m<g;m+=1){var v=this._findCharBuf(t,f[m]),y=this._readCharBytes(v);this._drawChar(t,y,e,r,!1),this.fillRect(c-u,this.cursor_y,u,t.height*e,this._invertColor(r),!1),u=" "===f[m]?0:e+1,c+=t.width*e+u,n&&c>=this.WIDTH-t.width-1&&(c=1,this.cursor_y+=t.height*e+e+d),this.setCursor(c,this.cursor_y)}}a&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype._drawChar=function(t,e,i,r,n){for(var s=this.cursor_x,o=this.cursor_y,a=0,l=0,h=0;h<e.length;h+=1){l=8*Math.floor(h/t.width);for(var c=0;c<8;c+=1){var u=1===e[h][c]?r:this._invertColor(r),d=void 0,p=void 0;1===i?(d=s+a,p=o+c+l,this.drawPixel([d,p,u],!1)):(d=s+h*i,p=o+c*i,this.fillRect(d,p,i,i,u,!1))}a=a<t.width-1?a+=1:0}},t.prototype._readCharBytes=function(t){for(var e=[],i=[],r=0;r<t.length;r+=1){for(var n=t[r],s=0;s<8;s+=1){var o=n>>s&1;e.push(o)}i.push(e),e=[]}return i},t.prototype._findCharBuf=function(t,e){var i=Math.ceil(t.width*t.height/8),r=t.lookup.indexOf(e)*i;return t.fontData.slice(r,r+i)},t.prototype.update=function(){var e=this;this._waitUntilReady((function(){for(var i=[t.COLUMN_ADDR,e.screenConfig.coloffset,e.screenConfig.coloffset+e.WIDTH-1,t.PAGE_ADDR,0,e.HEIGHT/8-1],r=i.length,s=e.buffer.length,o=0;o<r;o+=1)e._transfer(n.Command,i[o]);for(o=0;o<s;o+=1)e._transfer(n.Data,e.buffer[o])})),this.dirtyBytes=[]},t.prototype.dimDisplay=function(e){var i;i=e?0:207,this._transfer(n.Command,t.SET_CONTRAST),this._transfer(n.Command,i)},t.prototype.turnOffDisplay=function(){this._transfer(n.Command,t.DISPLAY_OFF)},t.prototype.turnOnDisplay=function(){this._transfer(n.Command,t.DISPLAY_ON)},t.prototype.clearDisplay=function(t){for(var e=void 0===t||t,i=0;i<this.buffer.length;i+=1)0!==this.buffer[i]&&(this.buffer[i]=0,-1===this.dirtyBytes.indexOf(i)&&this.dirtyBytes.push(i));e&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype.invertDisplay=function(e){e?this._transfer(n.Command,t.INVERT_DISPLAY):this._transfer(n.Command,t.NORMAL_DISPLAY)},t.prototype.drawBitmap=function(t,e){for(var i=void 0===e||e,r=0;r<t.length;r++){var n=Math.floor(r%this.WIDTH),s=Math.floor(r/this.WIDTH);this.drawPixel([n,s,t[r]],!1)}i&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype._isSinglePixel=function(t){return"object"!=typeof t[0]},t.prototype.drawPixel=function(t,e){var i=this,r=void 0===e||e;this._isSinglePixel(t)&&(t=[t]),t.forEach((function(t){var e=t[0],r=t[1],n=t[2];if(!(e>i.WIDTH||r>i.HEIGHT)){var s=0,o=Math.floor(r/8),a=1<<r-8*o;s=0===o?e:e+i.WIDTH*o,0===n?i.buffer[s]&=~a:i.buffer[s]|=a,-1===i.dirtyBytes.indexOf(s)&&i.dirtyBytes.push(s)}}),this),r&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype._updateDirtyBytes=function(e){var i=this,r=e.length;this._waitUntilReady((function(){for(var s=1/0,o=0,a=1/0,l=0,h=!1,c=0;c<r;c+=1){var u=e[c];if(u>=0&&u<i.buffer.length){var d=u/i.WIDTH|0;d<s&&(s=d),d>o&&(o=d);var p=u%i.WIDTH;p<a&&(a=p),p>l&&(l=p),h=!0}}if(h){var f=[t.COLUMN_ADDR,a,l,t.PAGE_ADDR,s,o],g=f.length;for(c=0;c<g;c+=1)i._transfer(n.Command,f[c]);for(c=s;c<=o;c+=1)for(var E=a;E<=l;E+=1)i._transfer(n.Data,i.buffer[i.WIDTH*c+E])}})),this.dirtyBytes=[]},t.prototype.drawLine=function(t,e,i,r,n,s){for(var o=void 0===s||s,a=Math.abs(i-t),l=t<i?1:-1,h=Math.abs(r-e),c=e<r?1:-1,u=(a>h?a:-h)/2;this.drawPixel([t,e,n],!1),t!==i||e!==r;){var d=u;d>-a&&(u-=h,t+=l),d<h&&(u+=a,e+=c)}o&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype.drawRect=function(t,e,i,r,n,s){var o=void 0===s||s;this.drawLine(t,e,t+i,e,n,!1),this.drawLine(t,e+1,t,e+r-1,n,!1),this.drawLine(t+i,e+1,t+i,e+r-1,n,!1),this.drawLine(t,e+r-1,t+i,e+r-1,n,!1),o&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype.fillRect=function(t,e,i,r,n,s){for(var o=void 0===s||s,a=t;a<t+i;a+=1)this.drawLine(a,e,a,e+r-1,n,!1);o&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype.drawCircle=function(t,e,i,r,n){var s=void 0===n||n,o=1-i,a=1,l=-2*i,h=0,c=i;for(this.drawPixel([[t,e+i,r],[t,e-i,r],[t+i,e,r],[t-i,e,r]],!1);h<c;)o>=0&&(c--,o+=l+=2),h++,o+=a+=2,this.drawPixel([[t+h,e+c,r],[t-h,e+c,r],[t+h,e-c,r],[t-h,e-c,r],[t+c,e+h,r],[t-c,e+h,r],[t+c,e-h,r],[t-c,e-h,r]],!1);s&&this._updateDirtyBytes(this.dirtyBytes)},t.prototype.startScroll=function(e,i,r){var s=this,o=[];switch(e){case"right":o.push(t.RIGHT_HORIZONTAL_SCROLL);break;case"left":o.push(t.LEFT_HORIZONTAL_SCROLL);break;case"left diagonal":o.push(t.SET_VERTICAL_SCROLL_AREA,0,this.HEIGHT,t.VERTICAL_AND_LEFT_HORIZONTAL_SCROLL,0,i,0,r,1,t.ACTIVATE_SCROLL);break;case"right diagonal":o.push(t.SET_VERTICAL_SCROLL_AREA,0,this.HEIGHT,t.VERTICAL_AND_RIGHT_HORIZONTAL_SCROLL,0,i,0,r,1,t.ACTIVATE_SCROLL)}this._waitUntilReady((function(){"right"!==e&&"left"!==e||o.push(0,i,0,r,0,255,t.ACTIVATE_SCROLL);for(var a=0;a<o.length;a+=1)s._transfer(n.Command,o[a])}))},t.prototype.stopScroll=function(){this._transfer(n.Command,t.DEACTIVATE_SCROLL)},t}()).DISPLAY_OFF=174,i.DISPLAY_ON=175,i.SET_DISPLAY_CLOCK_DIV=213,i.SET_MULTIPLEX=168,i.SET_DISPLAY_OFFSET=211,i.SET_START_LINE=0,i.CHARGE_PUMP=141,i.EXTERNAL_VCC=!1,i.MEMORY_MODE=32,i.SEG_REMAP=161,i.COM_SCAN_DEC=200,i.COM_SCAN_INC=192,i.SET_COM_PINS=218,i.SET_CONTRAST=129,i.SET_PRECHARGE=217,i.SET_VCOM_DETECT=219,i.DISPLAY_ALL_ON_RESUME=164,i.NORMAL_DISPLAY=166,i.COLUMN_ADDR=33,i.PAGE_ADDR=34,i.INVERT_DISPLAY=167,i.ACTIVATE_SCROLL=47,i.DEACTIVATE_SCROLL=46,i.SET_VERTICAL_SCROLL_AREA=163,i.RIGHT_HORIZONTAL_SCROLL=38,i.LEFT_HORIZONTAL_SCROLL=39,i.VERTICAL_AND_RIGHT_HORIZONTAL_SCROLL=41,i.VERTICAL_AND_LEFT_HORIZONTAL_SCROLL=42,i)}).call(this,i(7).Buffer)},function(t,e){t.exports={monospace:!0,width:5,height:7,fontData:[0,0,0,0,0,0,0,95,0,0,0,7,0,7,0,20,127,20,127,20,36,42,127,42,18,35,19,8,100,98,54,73,85,34,80,0,5,3,0,0,0,28,34,65,0,0,65,34,28,0,8,42,28,42,8,8,8,62,8,8,0,80,48,0,0,8,8,8,8,8,0,96,96,0,0,32,16,8,4,2,62,81,73,69,62,0,66,127,64,0,66,97,81,73,70,33,65,69,75,49,24,20,18,127,16,39,69,69,69,57,60,74,73,73,48,1,113,9,5,3,54,73,73,73,54,6,73,73,41,30,0,54,54,0,0,0,86,54,0,0,0,8,20,34,65,20,20,20,20,20,65,34,20,8,0,2,1,81,9,6,50,73,121,65,62,126,17,17,17,126,127,73,73,73,54,62,65,65,65,34,127,65,65,34,28,127,73,73,73,65,127,9,9,1,1,62,65,65,81,50,127,8,8,8,127,0,65,127,65,0,32,64,65,63,1,127,8,20,34,65,127,64,64,64,64,127,2,4,2,127,127,4,8,16,127,62,65,65,65,62,127,9,9,9,6,62,65,81,33,94,127,9,25,41,70,70,73,73,73,49,1,1,127,1,1,63,64,64,64,63,31,32,64,32,31,127,32,24,32,127,99,20,8,20,99,3,4,120,4,3,97,81,73,69,67,125,18,18,125,0,61,66,66,66,61,61,64,64,64,61,0,0,127,65,65,2,4,8,16,32,65,65,127,0,0,4,2,1,2,4,64,64,64,64,64,0,1,2,4,0,32,84,84,84,120,127,72,68,68,56,56,68,68,68,32,56,68,68,72,127,56,84,84,84,24,8,126,9,1,2,8,20,84,84,60,127,8,4,4,120,0,68,125,64,0,32,64,68,61,0,0,127,16,40,68,0,65,127,64,0,124,4,24,4,120,124,8,4,4,120,56,68,68,68,56,124,20,20,20,8,8,20,20,24,124,124,8,4,4,8,72,84,84,84,32,4,63,68,64,32,60,64,64,32,124,28,32,64,32,28,60,64,48,64,60,68,40,16,40,68,12,80,80,80,60,68,100,84,76,68,32,85,84,85,120,58,68,68,58,0,58,64,64,58,0,0,8,54,65,0,0,0,127,0,0,0,65,54,8,0,20,62,85,65,34,8,8,42,28,8,8,28,42,8,8,0,0,7,5,7],lookup:[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Ä","Ö","Ü","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","ä","ö","ü","{","|","}","€","†","‡","°"]}},function(t,e,i){var r=i(53).vector,n=i(53).rotate,s={ZYY:i(132)};function o(t){if(!(this instanceof o))return new o(t);this.chains=t.chains,this.offset=t.offset||[0,0,0],t.orientation||(t.orientation={}),this.orientation={pitch:t.orientation.pitch||0,yaw:t.orientation.yaw||0,roll:t.orientation.roll||0}}function a(t){if(!(this instanceof a))return new a(t);t.constructor?this.devices=new t.constructor(t.actuators):this.devices=t.actuators,this.chainType=t.chainType,this.links=t.links,this.origin=t.origin||[0,0,0],this.position=t.startAt||[0,0,0],this.require=t.require||!0}o.prototype["@@normalize"]=function(t){return t.forEach((function(t,e){t=this.chains[e]["@@normalize"]([t])[0],t=this.chains[e].devices["@@normalize"]([t])[0]}),this),t},o.prototype["@@render"]=function(t){var e=!0;t=t||{},this.chains.forEach((function(i,r){void 0===t[r]&&(t[r]=i.devices.last.target),i.solve({position:t[r],orientation:this.orientation,offset:this.offset})||(e=!1)}),this),e&&this.chains.forEach((function(t){t.devices["@@render"](t.angles)}))},a.prototype.solve=function(t){(t=t||{})&&(this.position=t.position||this.position,this.orientation=t.orientation||this.orientation,this.offset=t.offset||this.offset);var e=this.eePosition({position:this.position,origin:this.origin,offset:this.offset,orientation:this.orientation});return this.angles=s[this.chainType](this,e),t.immediate&&this.devices["@@render"](this.angles),-1===this.angles.indexOf(!1)&&(this.devices.last={target:this.position},!0)},a.prototype["@@normalize"]=function(t){return t.forEach((function(t){var e;null===t[0]&&(t[0]={position:this.position}),t.forEach((function(i,r){!1===i&&(t[r]=e,i=e),null!==i&&Array.isArray(i.position)&&i.position.forEach((function(e,i){!1===e&&(t[r].position[i]=t[r-1].position[i])})),null!==i&&(e=i)})),null===t[t.length-1]&&(t[t.length-1]=e)}),this),t},a.prototype.eePosition=function(t){var e=t.position||[0,0,0],i=t.origin||[0,0,0],s=t.orientation||{},o=s.roll||0,a=s.pitch||0,l=s.yaw||0,h=t.offset||[0,0,0],c=h[0]||0,u=h[1]||0,d=h[2]||0;e=[e[0]-c,e[1]-u,e[2]-d];var p=new r(e),f=new r(i),g=new n.RotY(o);return p=g.dot(p),f=g.dot(f),p=(g=new n.RotX(a)).dot(p),f=g.dot(f),p=(g=new n.RotZ(l)).dot(p),f=(f=g.dot(f)).scale(-1),(p=p.add(f)).v},t.exports={Chain:a,Robot:o,ikSolvers:s}},function(t,e,i){e.vector=i(26),e.matrix=i(27),e.rotate=i(54),e.homog=i(131)},function(t,e,i){var r=i(26),n=i(27),s=i(54);t.exports=function(t,e){if(0===t&&(t=new s.RotX(0)),0===e&&(e=new r([0,0,0])),t.cols!==t.rows||e.v.length!==t.cols)return new Error("Rotation matrix must be square and transform must be of same order as matrix");for(var i=new n(4),o=0;o<t.rows;++o)for(var a=0;a<t.cols;++a)i.set(o,a,t.get(o,a));for(var l=0;l<e.v.length;++l)i.set(l,3,e.v[l]);return 2===t.cols&&(i.set(2,0,0),i.set(2,1,0),i.set(2,2,1),i.set(2,3,0)),i.set(3,0,0),i.set(3,1,0),i.set(3,2,0),i.set(3,3,1),i}},function(t,e,i){var r=i(133);t.exports=function(t,e){var i=[],n=[],s=e[0],o=e[1],a=e[2];i[0]=Math.atan(o/s),n[0]=r.findValidAngle(i[0],t.devices[0].range),i[0]=r.degToRad(n[0]),o-=Math.cos(i[0])*t.links[0];var l=(s-=Math.sin(i[0])*t.links[0])*s,h=o*o,c=a*a,u=Math.sqrt(l+h+c),d=Math.sqrt(l+h);return i[2]=r.solveAngle(t.links[1],t.links[2],u),i[1]=r.solveAngle(t.links[1],u,t.links[2]),i[1]+=Math.sin(a/d),e[0]<0&&(i[1]=Math.PI-i[1],i[2]=Math.PI-i[2]),n[1]=r.findValidAngle(i[1],t.devices[1].range),n[2]=r.findValidAngle(i[2],t.devices[2].range),n}},function(t,e){var i=function(t){return t/Math.PI*180};t.exports={radToDeg:i,degToRad:function(t){return t/180*Math.PI},solveAngle:function(t,e,i){return Math.acos((t*t+e*e-i*i)/(2*t*e))},findValidAngle:function(t,e){var r=i(t);return r>e[1]||r<e[0]?r+180>=e[0]&&r+180<=e[1]?r+=180:r-180>=e[0]&&r-180<=e[1]&&(r-=180):r}}},function(t,e,i){(function(e){const{EventEmitter:r}=i(2);t.exports=class extends r{constructor(t,e){super(e),this.options=e||{},this.browser=!0,this.path=this.options.path,this.isOpen=!1,this.port=null,this.writer=null,this.reader=null,this.baudRate=this.options.baudRate,this.requestOptions=this.options.requestOptions||{},this.options.autoOpen&&this.open()}list(t){return navigator.serial.getPorts().then(e=>{if(t)return t(null,e)}).catch(e=>{if(t)return t(e)})}open(t){window.navigator.serial.requestPort(this.requestOptions).then(t=>{if(this.port=t,!this.isOpen)return this.port.open({baudRate:this.baudRate||57600})}).then(()=>this.writer=this.port.writable.getWriter()).then(()=>this.reader=this.port.readable.getReader()).then(async()=>{for(this.emit("open"),this.isOpen=!0,t(null);this.port.readable.locked;)try{const{value:t,done:i}=await this.reader.read();if(i)break;this.emit("data",e.from(t))}catch(t){console.error(t)}}).catch(e=>{t(e)})}async close(t){try{await this.reader.releaseLock(),await this.writer.releaseLock(),await this.port.close(),this.isOpen=!1}catch(e){if(t)return t(e);throw e}t&&t(null)}async set(t={},e){try{const e={};Object.prototype.hasOwnProperty.call(t,"dtr")&&(e.dataTerminalReady=t.dtr),Object.prototype.hasOwnProperty.call(t,"rts")&&(e.requestToSend=t.rts),Object.prototype.hasOwnProperty.call(t,"brk")&&(e.break=t.brk),Object.keys(e).length>0&&await this.port.setSignals(e)}catch(t){if(e)return e(t);throw t}if(e)return e(null)}write(t,e){if(this.writer.write(t),e)return e(null)}async read(t){let e;try{e=await this.reader.read()}catch(e){if(t)return t(e);throw e}t&&t(null,e)}flush(t){if(console.warn("flush method is a NOP right now"),t)return t(null)}drain(t){if(console.warn("drain method is a NOP right now"),t)return t(null)}}}).call(this,i(7).Buffer)}]);